<!DOCTYPE html>
<html lang="zh">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Zodiac Wang" />

        <meta name="description" content="NumPy入门
" />
        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="NumPy, Python, posts, " />

<meta property="og:title" content="NumPy入门 "/>
<meta property="og:url" content="//zodiac911.github.io/blog/numpy-tutorial.html" />
<meta property="og:description" content="NumPy入门" />
<meta property="og:site_name" content="Zodiac Wang" />
<meta property="og:article:author" content="Zodiac Wang" />
<meta property="og:article:published_time" content="2019-01-03T00:00:00+08:00" />
<meta name="twitter:title" content="NumPy入门 ">
<meta name="twitter:description" content="NumPy入门">

        <title>NumPy入门  · Zodiac Wang
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="//zodiac911.github.io/blog/theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css" href="//zodiac911.github.io/blog/theme/tipuesearch/tipuesearch.css" media="screen">
        <link rel="stylesheet" type="text/css" href="//zodiac911.github.io/blog/theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css" href="//zodiac911.github.io/blog/theme/css/admonition.css" media="screen">
        <link rel="stylesheet" type="text/css" href="//zodiac911.github.io/blog/theme/css/custom.css" media="screen">
        <link rel="shortcut icon" href="//zodiac911.github.io/blog/theme/images/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="//zodiac911.github.io/blog/theme/images/apple-touch-icon-152x152.png" type="image/png" />
        <link rel="apple-touch-icon" href="//zodiac911.github.io/blog/theme/images/apple-touch-icon.png"  type="image/png" />
        <link rel="apple-touch-icon" sizes="57x57" href="//zodiac911.github.io/blog/theme/images/apple-touch-icon-57x57.png" type="image/png" />
        <link rel="apple-touch-icon" sizes="72x72" href="//zodiac911.github.io/blog/theme/images/apple-touch-icon-72x72.png" type="image/png" />
        <link rel="apple-touch-icon" sizes="76x76" href="//zodiac911.github.io/blog/theme/images/apple-touch-icon-76x76.png" type="image/png" />
        <link rel="apple-touch-icon" sizes="114x114" href="//zodiac911.github.io/blog/theme/images/apple-touch-icon-114x114.png" type="image/png" />
        <link rel="apple-touch-icon" sizes="120x120" href="//zodiac911.github.io/blog/theme/images/apple-touch-icon-120x120.png" type="image/png" />
        <link rel="apple-touch-icon" sizes="144x144" href="//zodiac911.github.io/blog/theme/images/apple-touch-icon-144x144.png" type="image/png" />
        <link rel="apple-touch-icon" sizes="152x152" href="//zodiac911.github.io/blog/theme/images/apple-touch-icon-152x152.png" type="image/png" />
        <link href="//zodiac911.github.io/blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Zodiac Wang - Full Atom Feed" />



    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="//zodiac911.github.io/blog/"><span class=site-name>Zodiac Wang</span></a>
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right top-menu">
                            <li ><a href="//zodiac911.github.io/blog">Home</a></li>
                            <li ><a href="//zodiac911.github.io/blog/categories">Categories</a></li>
                            <li ><a href="//zodiac911.github.io/blog/tags">Tags</a></li>
                            <li ><a href="//zodiac911.github.io/blog/archives">Archives</a></li>
                            <li><form class="navbar-search" action="//zodiac911.github.io/blog/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span1"></div>
                <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
    <h1><a href="//zodiac911.github.io/blog/numpy-tutorial.html"> NumPy入门  </a></h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">

            
            <style type="text/css">/*!
*
* IPython notebook
*
*/
/* CSS font colors for translated ANSI escape sequences */
/* The color values are a mix of
   http://www.xcolors.net/dl/baskerville-ivorylight and
   http://www.xcolors.net/dl/euphrasia */
.ansi-black-fg {
  color: #3E424D;
}
.ansi-black-bg {
  background-color: #3E424D;
}
.ansi-black-intense-fg {
  color: #282C36;
}
.ansi-black-intense-bg {
  background-color: #282C36;
}
.ansi-red-fg {
  color: #E75C58;
}
.ansi-red-bg {
  background-color: #E75C58;
}
.ansi-red-intense-fg {
  color: #B22B31;
}
.ansi-red-intense-bg {
  background-color: #B22B31;
}
.ansi-green-fg {
  color: #00A250;
}
.ansi-green-bg {
  background-color: #00A250;
}
.ansi-green-intense-fg {
  color: #007427;
}
.ansi-green-intense-bg {
  background-color: #007427;
}
.ansi-yellow-fg {
  color: #DDB62B;
}
.ansi-yellow-bg {
  background-color: #DDB62B;
}
.ansi-yellow-intense-fg {
  color: #B27D12;
}
.ansi-yellow-intense-bg {
  background-color: #B27D12;
}
.ansi-blue-fg {
  color: #208FFB;
}
.ansi-blue-bg {
  background-color: #208FFB;
}
.ansi-blue-intense-fg {
  color: #0065CA;
}
.ansi-blue-intense-bg {
  background-color: #0065CA;
}
.ansi-magenta-fg {
  color: #D160C4;
}
.ansi-magenta-bg {
  background-color: #D160C4;
}
.ansi-magenta-intense-fg {
  color: #A03196;
}
.ansi-magenta-intense-bg {
  background-color: #A03196;
}
.ansi-cyan-fg {
  color: #60C6C8;
}
.ansi-cyan-bg {
  background-color: #60C6C8;
}
.ansi-cyan-intense-fg {
  color: #258F8F;
}
.ansi-cyan-intense-bg {
  background-color: #258F8F;
}
.ansi-white-fg {
  color: #C5C1B4;
}
.ansi-white-bg {
  background-color: #C5C1B4;
}
.ansi-white-intense-fg {
  color: #A1A6B2;
}
.ansi-white-intense-bg {
  background-color: #A1A6B2;
}
.ansi-default-inverse-fg {
  color: #FFFFFF;
}
.ansi-default-inverse-bg {
  background-color: #000000;
}
.ansi-bold {
  font-weight: bold;
}
.ansi-underline {
  text-decoration: underline;
}
/* The following styles are deprecated an will be removed in a future version */
.ansibold {
  font-weight: bold;
}
.ansi-inverse {
  outline: 0.5px dotted;
}
/* use dark versions for foreground, to improve visibility */
.ansiblack {
  color: black;
}
.ansired {
  color: darkred;
}
.ansigreen {
  color: darkgreen;
}
.ansiyellow {
  color: #c4a000;
}
.ansiblue {
  color: darkblue;
}
.ansipurple {
  color: darkviolet;
}
.ansicyan {
  color: steelblue;
}
.ansigray {
  color: gray;
}
/* and light for background, for the same reason */
.ansibgblack {
  background-color: black;
}
.ansibgred {
  background-color: red;
}
.ansibggreen {
  background-color: green;
}
.ansibgyellow {
  background-color: yellow;
}
.ansibgblue {
  background-color: blue;
}
.ansibgpurple {
  background-color: magenta;
}
.ansibgcyan {
  background-color: cyan;
}
.ansibggray {
  background-color: gray;
}
div.cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  border-radius: 2px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  border-width: 1px;
  border-style: solid;
  border-color: transparent;
  width: 100%;
  padding: 5px;
  /* This acts as a spacer between cells, that is outside the border */
  margin: 0px;
  outline: none;
  position: relative;
  overflow: visible;
}
div.cell:before {
  position: absolute;
  display: block;
  top: -1px;
  left: -1px;
  width: 5px;
  height: calc(100% +  2px);
  content: '';
  background: transparent;
}
div.cell.jupyter-soft-selected {
  border-left-color: #E3F2FD;
  border-left-width: 1px;
  padding-left: 5px;
  border-right-color: #E3F2FD;
  border-right-width: 1px;
  background: #E3F2FD;
}
@media print {
  div.cell.jupyter-soft-selected {
    border-color: transparent;
  }
}
div.cell.selected,
div.cell.selected.jupyter-soft-selected {
  border-color: #ababab;
}
div.cell.selected:before,
div.cell.selected.jupyter-soft-selected:before {
  position: absolute;
  display: block;
  top: -1px;
  left: -1px;
  width: 5px;
  height: calc(100% +  2px);
  content: '';
  background: #42A5F5;
}
@media print {
  div.cell.selected,
  div.cell.selected.jupyter-soft-selected {
    border-color: transparent;
  }
}
.edit_mode div.cell.selected {
  border-color: #66BB6A;
}
.edit_mode div.cell.selected:before {
  position: absolute;
  display: block;
  top: -1px;
  left: -1px;
  width: 5px;
  height: calc(100% +  2px);
  content: '';
  background: #66BB6A;
}
@media print {
  .edit_mode div.cell.selected {
    border-color: transparent;
  }
}
.prompt {
  /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */
  min-width: 14ex;
  /* This padding is tuned to match the padding on the CodeMirror editor. */
  padding: 0.4em;
  margin: 0px;
  font-family: monospace;
  text-align: right;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
  /* Don't highlight prompt number selection */
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  /* Use default cursor */
  cursor: default;
}
@media (max-width: 540px) {
  .prompt {
    text-align: left;
  }
}
div.inner_cell {
  min-width: 0;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_area {
  border: 1px solid #cfcfcf;
  border-radius: 2px;
  background: #f7f7f7;
  line-height: 1.21429em;
}
/* This is needed so that empty prompt areas can collapse to zero height when there
   is no content in the output_subarea and the prompt. The main purpose of this is
   to make sure that empty JavaScript output_subareas have no height. */
div.prompt:empty {
  padding-top: 0;
  padding-bottom: 0;
}
div.unrecognized_cell {
  padding: 5px 5px 5px 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.unrecognized_cell .inner_cell {
  border-radius: 2px;
  padding: 5px;
  font-weight: bold;
  color: red;
  border: 1px solid #cfcfcf;
  background: #eaeaea;
}
div.unrecognized_cell .inner_cell a {
  color: inherit;
  text-decoration: none;
}
div.unrecognized_cell .inner_cell a:hover {
  color: inherit;
  text-decoration: none;
}
@media (max-width: 540px) {
  div.unrecognized_cell > div.prompt {
    display: none;
  }
}
div.code_cell {
  /* avoid page breaking on code cells when printing */
}
@media print {
  div.code_cell {
    page-break-inside: avoid;
  }
}
/* any special styling for code cells that are currently running goes here */
div.input {
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.input {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_prompt {
  color: #303F9F;
  border-top: 1px solid transparent;
}
div.input_area > div.highlight {
  margin: 0.4em;
  border: none;
  padding: 0px;
  background-color: transparent;
}
div.input_area > div.highlight > pre {
  margin: 0px;
  border: none;
  padding: 0px;
  background-color: transparent;
}
/* The following gets added to the <head> if it is detected that the user has a
 * monospace font with inconsistent normal/bold/italic height.  See
 * notebookmain.js.  Such fonts will have keywords vertically offset with
 * respect to the rest of the text.  The user should select a better font.
 * See: https://github.com/ipython/ipython/issues/1503
 *
 * .CodeMirror span {
 *      vertical-align: bottom;
 * }
 */
.CodeMirror {
  line-height: 1.21429em;
  /* Changed from 1em to our global default */
  font-size: 14px;
  height: auto;
  /* Changed to auto to autogrow */
  background: none;
  /* Changed from white to allow our bg to show through */
}
.CodeMirror-scroll {
  /*  The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/
  /*  We have found that if it is visible, vertical scrollbars appear with font size changes.*/
  overflow-y: hidden;
  overflow-x: auto;
}
.CodeMirror-lines {
  /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */
  /* we have set a different line-height and want this to scale with that. */
  /* Note that this should set vertical padding only, since CodeMirror assumes
       that horizontal padding will be set on CodeMirror pre */
  padding: 0.4em 0;
}
.CodeMirror-linenumber {
  padding: 0 8px 0 4px;
}
.CodeMirror-gutters {
  border-bottom-left-radius: 2px;
  border-top-left-radius: 2px;
}
.CodeMirror pre {
  /* In CM3 this went to 4px from 0 in CM2. This sets horizontal padding only,
    use .CodeMirror-lines for vertical */
  padding: 0 0.4em;
  border: 0;
  border-radius: 0;
}
.CodeMirror-cursor {
  border-left: 1.4px solid black;
}
@media screen and (min-width: 2138px) and (max-width: 4319px) {
  .CodeMirror-cursor {
    border-left: 2px solid black;
  }
}
@media screen and (min-width: 4320px) {
  .CodeMirror-cursor {
    border-left: 4px solid black;
  }
}
/*

Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org>
Adapted from GitHub theme

*/
.highlight-base {
  color: #000;
}
.highlight-variable {
  color: #000;
}
.highlight-variable-2 {
  color: #1a1a1a;
}
.highlight-variable-3 {
  color: #333333;
}
.highlight-string {
  color: #BA2121;
}
.highlight-comment {
  color: #408080;
  font-style: italic;
}
.highlight-number {
  color: #080;
}
.highlight-atom {
  color: #88F;
}
.highlight-keyword {
  color: #008000;
  font-weight: bold;
}
.highlight-builtin {
  color: #008000;
}
.highlight-error {
  color: #f00;
}
.highlight-operator {
  color: #AA22FF;
  font-weight: bold;
}
.highlight-meta {
  color: #AA22FF;
}
/* previously not defined, copying from default codemirror */
.highlight-def {
  color: #00f;
}
.highlight-string-2 {
  color: #f50;
}
.highlight-qualifier {
  color: #555;
}
.highlight-bracket {
  color: #997;
}
.highlight-tag {
  color: #170;
}
.highlight-attribute {
  color: #00c;
}
.highlight-header {
  color: blue;
}
.highlight-quote {
  color: #090;
}
.highlight-link {
  color: #00c;
}
/* apply the same style to codemirror */
.cm-s-ipython span.cm-keyword {
  color: #008000;
  font-weight: bold;
}
.cm-s-ipython span.cm-atom {
  color: #88F;
}
.cm-s-ipython span.cm-number {
  color: #080;
}
.cm-s-ipython span.cm-def {
  color: #00f;
}
.cm-s-ipython span.cm-variable {
  color: #000;
}
.cm-s-ipython span.cm-operator {
  color: #AA22FF;
  font-weight: bold;
}
.cm-s-ipython span.cm-variable-2 {
  color: #1a1a1a;
}
.cm-s-ipython span.cm-variable-3 {
  color: #333333;
}
.cm-s-ipython span.cm-comment {
  color: #408080;
  font-style: italic;
}
.cm-s-ipython span.cm-string {
  color: #BA2121;
}
.cm-s-ipython span.cm-string-2 {
  color: #f50;
}
.cm-s-ipython span.cm-meta {
  color: #AA22FF;
}
.cm-s-ipython span.cm-qualifier {
  color: #555;
}
.cm-s-ipython span.cm-builtin {
  color: #008000;
}
.cm-s-ipython span.cm-bracket {
  color: #997;
}
.cm-s-ipython span.cm-tag {
  color: #170;
}
.cm-s-ipython span.cm-attribute {
  color: #00c;
}
.cm-s-ipython span.cm-header {
  color: blue;
}
.cm-s-ipython span.cm-quote {
  color: #090;
}
.cm-s-ipython span.cm-link {
  color: #00c;
}
.cm-s-ipython span.cm-error {
  color: #f00;
}
.cm-s-ipython span.cm-tab {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=);
  background-position: right;
  background-repeat: no-repeat;
}
div.output_wrapper {
  /* this position must be relative to enable descendents to be absolute within it */
  position: relative;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  z-index: 1;
}
/* class for the output area when it should be height-limited */
div.output_scroll {
  /* ideally, this would be max-height, but FF barfs all over that */
  height: 24em;
  /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */
  width: 100%;
  overflow: auto;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  display: block;
}
/* output div while it is collapsed */
div.output_collapsed {
  margin: 0px;
  padding: 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
div.out_prompt_overlay {
  height: 100%;
  padding: 0px 0.4em;
  position: absolute;
  border-radius: 2px;
}
div.out_prompt_overlay:hover {
  /* use inner shadow to get border that is computed the same on WebKit/FF */
  -webkit-box-shadow: inset 0 0 1px #000;
  box-shadow: inset 0 0 1px #000;
  background: rgba(240, 240, 240, 0.5);
}
div.output_prompt {
  color: #D84315;
}
/* This class is the outer container of all output sections. */
div.output_area {
  padding: 0px;
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.output_area .MathJax_Display {
  text-align: left !important;
}
div.output_area 
div.output_area 
div.output_area img,
div.output_area svg {
  max-width: 100%;
  height: auto;
}
div.output_area img.unconfined,
div.output_area svg.unconfined {
  max-width: none;
}
div.output_area .mglyph > img {
  max-width: none;
}
/* This is needed to protect the pre formating from global settings such
   as that of bootstrap */
.output {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.output_area {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
div.output_area pre {
  margin: 0;
  padding: 1px 0 1px 0;
  border: 0;
  vertical-align: baseline;
  color: black;
  background-color: transparent;
  border-radius: 0;
}
/* This class is for the output subarea inside the output_area and after
   the prompt div. */
div.output_subarea {
  overflow-x: auto;
  padding: 0.4em;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
  max-width: calc(100% - 14ex);
}
div.output_scroll div.output_subarea {
  overflow-x: visible;
}
/* The rest of the output_* classes are for special styling of the different
   output types */
/* all text output has this class: */
div.output_text {
  text-align: left;
  color: #000;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
}
/* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */
div.output_stderr {
  background: #fdd;
  /* very light red background for stderr */
}
div.output_latex {
  text-align: left;
}
/* Empty output_javascript divs should have no height */
div.output_javascript:empty {
  padding: 0;
}
.js-error {
  color: darkred;
}
/* raw_input styles */
div.raw_input_container {
  line-height: 1.21429em;
  padding-top: 5px;
}
pre.raw_input_prompt {
  /* nothing needed here. */
}
input.raw_input {
  font-family: monospace;
  font-size: inherit;
  color: inherit;
  width: auto;
  /* make sure input baseline aligns with prompt */
  vertical-align: baseline;
  /* padding + margin = 0.5em between prompt and cursor */
  padding: 0em 0.25em;
  margin: 0em 0.25em;
}
input.raw_input:focus {
  box-shadow: none;
}
p.p-space {
  margin-bottom: 10px;
}
div.output_unrecognized {
  padding: 5px;
  font-weight: bold;
  color: red;
}
div.output_unrecognized a {
  color: inherit;
  text-decoration: none;
}
div.output_unrecognized a:hover {
  color: inherit;
  text-decoration: none;
}
.rendered_html {
  color: #000;
  /* any extras will just be numbers: */
}



.rendered_html :link {
  text-decoration: underline;
}
.rendered_html :visited {
  text-decoration: underline;
}






.rendered_html h1:first-child {
  margin-top: 0.538em;
}
.rendered_html h2:first-child {
  margin-top: 0.636em;
}
.rendered_html h3:first-child {
  margin-top: 0.777em;
}
.rendered_html h4:first-child {
  margin-top: 1em;
}
.rendered_html h5:first-child {
  margin-top: 1em;
}
.rendered_html h6:first-child {
  margin-top: 1em;
}
.rendered_html ul:not(.list-inline),
.rendered_html ol:not(.list-inline) {
  padding-left: 2em;
}








.rendered_html * + ul {
  margin-top: 1em;
}
.rendered_html * + ol {
  margin-top: 1em;
}





.rendered_html pre,




.rendered_html tr,
.rendered_html th,


.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
.rendered_html * + table {
  margin-top: 1em;
}

.rendered_html * + p {
  margin-top: 1em;
}

.rendered_html * + img {
  margin-top: 1em;
}
.rendered_html img,

.rendered_html img.unconfined,


.rendered_html * + .alert {
  margin-top: 1em;
}
[dir="rtl"] 
div.text_cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.text_cell > div.prompt {
    display: none;
  }
}
div.text_cell_render {
  /*font-family: "Helvetica Neue", Arial, Helvetica, Geneva, sans-serif;*/
  outline: none;
  resize: none;
  width: inherit;
  border-style: none;
  padding: 0.5em 0.5em 0.5em 0.4em;
  color: #000;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
a.anchor-link:link {
  text-decoration: none;
  padding: 0px 20px;
  visibility: hidden;
}
h1:hover .anchor-link,
h2:hover .anchor-link,
h3:hover .anchor-link,
h4:hover .anchor-link,
h5:hover .anchor-link,
h6:hover .anchor-link {
  visibility: visible;
}
.text_cell.rendered .input_area {
  display: none;
}
.text_cell.rendered 
.text_cell.rendered .rendered_html tr,
.text_cell.rendered .rendered_html th,
.text_cell.rendered 
.text_cell.unrendered .text_cell_render {
  display: none;
}
.text_cell .dropzone .input_area {
  border: 2px dashed #bababa;
  margin: -1px;
}
.cm-header-1,
.cm-header-2,
.cm-header-3,
.cm-header-4,
.cm-header-5,
.cm-header-6 {
  font-weight: bold;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}
.cm-header-1 {
  font-size: 185.7%;
}
.cm-header-2 {
  font-size: 157.1%;
}
.cm-header-3 {
  font-size: 128.6%;
}
.cm-header-4 {
  font-size: 110%;
}
.cm-header-5 {
  font-size: 100%;
  font-style: italic;
}
.cm-header-6 {
  font-size: 100%;
  font-style: italic;
}
</style>
<style type="text/css">.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style>
<style type="text/css">
/* Temporary definitions which will become obsolete with Notebook release 5.0 */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-bold { font-weight: bold; }
</style>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><div align="center">  <img src="http://mathalope.co.uk/wp-content/uploads/2017/09/python-numpy-logo-672x263.png" width="650"/> </div><br></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>NumPy入门笔记，NumPy官网这篇 <a href="https://docs.scipy.org/doc/numpy/user/quickstart.html">Tutorial</a> 的整理和补充</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><h1>Table of Contents<span class="tocSkip"></span></h1></p>
<div class="toc"><ul class="toc-item"><li><span><a href="#基础知识" data-toc-modified-id="基础知识-1"><span class="toc-item-num">1&nbsp;&nbsp;</span>基础知识</a></span><ul class="toc-item"><li><span><a href="#一个例子" data-toc-modified-id="一个例子-1.1"><span class="toc-item-num">1.1&nbsp;&nbsp;</span>一个例子</a></span></li><li><span><a href="#ndarray的构造" data-toc-modified-id="ndarray的构造-1.2"><span class="toc-item-num">1.2&nbsp;&nbsp;</span>ndarray的构造</a></span><ul class="toc-item"><li><span><a href="#基于可迭代对象构造" data-toc-modified-id="基于可迭代对象构造-1.2.1"><span class="toc-item-num">1.2.1&nbsp;&nbsp;</span>基于可迭代对象构造</a></span></li><li><span><a href="#内置构造函数" data-toc-modified-id="内置构造函数-1.2.2"><span class="toc-item-num">1.2.2&nbsp;&nbsp;</span>内置构造函数</a></span></li><li><span><a href="#按函数生成" data-toc-modified-id="按函数生成-1.2.3"><span class="toc-item-num">1.2.3&nbsp;&nbsp;</span>按函数生成</a></span></li></ul></li><li><span><a href="#打印多维数组" data-toc-modified-id="打印多维数组-1.3"><span class="toc-item-num">1.3&nbsp;&nbsp;</span>打印多维数组</a></span></li><li><span><a href="#基本操作" data-toc-modified-id="基本操作-1.4"><span class="toc-item-num">1.4&nbsp;&nbsp;</span>基本操作</a></span></li><li><span><a href="#通用函数" data-toc-modified-id="通用函数-1.5"><span class="toc-item-num">1.5&nbsp;&nbsp;</span>通用函数</a></span></li><li><span><a href="#索引、切片和迭代" data-toc-modified-id="索引、切片和迭代-1.6"><span class="toc-item-num">1.6&nbsp;&nbsp;</span>索引、切片和迭代</a></span></li></ul></li><li><span><a href="#形状操作" data-toc-modified-id="形状操作-2"><span class="toc-item-num">2&nbsp;&nbsp;</span>形状操作</a></span><ul class="toc-item"><li><span><a href="#改变ndarray的形状" data-toc-modified-id="改变ndarray的形状-2.1"><span class="toc-item-num">2.1&nbsp;&nbsp;</span>改变ndarray的形状</a></span></li><li><span><a href="#ndarray的组合" data-toc-modified-id="ndarray的组合-2.2"><span class="toc-item-num">2.2&nbsp;&nbsp;</span>ndarray的组合</a></span></li><li><span><a href="#拆分ndarray" data-toc-modified-id="拆分ndarray-2.3"><span class="toc-item-num">2.3&nbsp;&nbsp;</span>拆分ndarray</a></span></li></ul></li><li><span><a href="#副本与视图" data-toc-modified-id="副本与视图-3"><span class="toc-item-num">3&nbsp;&nbsp;</span>副本与视图</a></span><ul class="toc-item"><li><span><a href="#完全无复制" data-toc-modified-id="完全无复制-3.1"><span class="toc-item-num">3.1&nbsp;&nbsp;</span>完全无复制</a></span></li><li><span><a href="#视图与浅复制" data-toc-modified-id="视图与浅复制-3.2"><span class="toc-item-num">3.2&nbsp;&nbsp;</span>视图与浅复制</a></span><ul class="toc-item"><li><span><a href="#基于切片行为产生的视图" data-toc-modified-id="基于切片行为产生的视图-3.2.1"><span class="toc-item-num">3.2.1&nbsp;&nbsp;</span>基于切片行为产生的视图</a></span></li><li><span><a href="#基于view函数产生的视图" data-toc-modified-id="基于view函数产生的视图-3.2.2"><span class="toc-item-num">3.2.2&nbsp;&nbsp;</span>基于<code>view</code>函数产生的视图</a></span></li></ul></li><li><span><a href="#深复制" data-toc-modified-id="深复制-3.3"><span class="toc-item-num">3.3&nbsp;&nbsp;</span>深复制</a></span><ul class="toc-item"><li><span><a href="#基于高级索引产生的副本" data-toc-modified-id="基于高级索引产生的副本-3.3.1"><span class="toc-item-num">3.3.1&nbsp;&nbsp;</span>基于高级索引产生的副本</a></span></li><li><span><a href="#基于-copy函数产生的副本" data-toc-modified-id="基于-copy函数产生的副本-3.3.2"><span class="toc-item-num">3.3.2&nbsp;&nbsp;</span>基于 <code>copy</code>函数产生的副本</a></span></li><li><span><a href="#作为右值对其他ndarray进行赋值时，为深复制" data-toc-modified-id="作为右值对其他ndarray进行赋值时，为深复制-3.3.3"><span class="toc-item-num">3.3.3&nbsp;&nbsp;</span>作为右值对其他ndarray进行赋值时，为深复制</a></span></li><li><span><a href="#基于array函数的ndarray构造，为深复制" data-toc-modified-id="基于array函数的ndarray构造，为深复制-3.3.4"><span class="toc-item-num">3.3.4&nbsp;&nbsp;</span>基于<code>array</code>函数的ndarray构造，为深复制</a></span></li></ul></li><li><span><a href="#函数与方法概览" data-toc-modified-id="函数与方法概览-3.4"><span class="toc-item-num">3.4&nbsp;&nbsp;</span>函数与方法概览</a></span></li></ul></li><li><span><a href="#进阶内容" data-toc-modified-id="进阶内容-4"><span class="toc-item-num">4&nbsp;&nbsp;</span>进阶内容</a></span><ul class="toc-item"><li><span><a href="#广播规则" data-toc-modified-id="广播规则-4.1"><span class="toc-item-num">4.1&nbsp;&nbsp;</span>广播规则</a></span></li></ul></li><li><span><a href="#高级索引及索引技巧" data-toc-modified-id="高级索引及索引技巧-5"><span class="toc-item-num">5&nbsp;&nbsp;</span>高级索引及索引技巧</a></span><ul class="toc-item"><li><span><a href="#使用数字序列进行索引" data-toc-modified-id="使用数字序列进行索引-5.1"><span class="toc-item-num">5.1&nbsp;&nbsp;</span>使用数字序列进行索引</a></span><ul class="toc-item"><li><span><a href="#单个序列作为索引" data-toc-modified-id="单个序列作为索引-5.1.1"><span class="toc-item-num">5.1.1&nbsp;&nbsp;</span>单个序列作为索引</a></span></li><li><span><a href="#多个序列作为索引" data-toc-modified-id="多个序列作为索引-5.1.2"><span class="toc-item-num">5.1.2&nbsp;&nbsp;</span>多个序列作为索引</a></span></li></ul></li><li><span><a href="#使用布尔序列进行索引" data-toc-modified-id="使用布尔序列进行索引-5.2"><span class="toc-item-num">5.2&nbsp;&nbsp;</span>使用布尔序列进行索引</a></span><ul class="toc-item"><li><span><a href="#用一个和目标ndarray同样形状的布尔序列进行索引" data-toc-modified-id="用一个和目标ndarray同样形状的布尔序列进行索引-5.2.1"><span class="toc-item-num">5.2.1&nbsp;&nbsp;</span>用一个和目标ndarray同样形状的布尔序列进行索引</a></span></li><li><span><a href="#第二种场景更像前面提到的整数序列索引" data-toc-modified-id="第二种场景更像前面提到的整数序列索引-5.2.2"><span class="toc-item-num">5.2.2&nbsp;&nbsp;</span>第二种场景更像前面提到的整数序列索引</a></span></li></ul></li><li><span><a href="#ix_" data-toc-modified-id="ix_-5.3"><span class="toc-item-num">5.3&nbsp;&nbsp;</span><code>ix_</code></a></span></li><li><span><a href="#使用字符串索引" data-toc-modified-id="使用字符串索引-5.4"><span class="toc-item-num">5.4&nbsp;&nbsp;</span>使用字符串索引</a></span></li></ul></li><li><span><a href="#线性代数" data-toc-modified-id="线性代数-6"><span class="toc-item-num">6&nbsp;&nbsp;</span>线性代数</a></span><ul class="toc-item"><li><span><a href="#简单的线性代数运算" data-toc-modified-id="简单的线性代数运算-6.1"><span class="toc-item-num">6.1&nbsp;&nbsp;</span>简单的线性代数运算</a></span></li></ul></li><li><span><a href="#技巧和提示" data-toc-modified-id="技巧和提示-7"><span class="toc-item-num">7&nbsp;&nbsp;</span>技巧和提示</a></span><ul class="toc-item"><li><span><a href="#“自动”改变形状" data-toc-modified-id="“自动”改变形状-7.1"><span class="toc-item-num">7.1&nbsp;&nbsp;</span>“自动”改变形状</a></span></li><li><span><a href="#向量组合" data-toc-modified-id="向量组合-7.2"><span class="toc-item-num">7.2&nbsp;&nbsp;</span>向量组合</a></span></li><li><span><a href="#直方图" data-toc-modified-id="直方图-7.3"><span class="toc-item-num">7.3&nbsp;&nbsp;</span>直方图</a></span></li></ul></li><li><span><a href="#index" data-toc-modified-id="index-8"><span class="toc-item-num">8&nbsp;&nbsp;</span>index</a></span><ul class="toc-item"><li><span><a href="#numpy.random模块" data-toc-modified-id="numpy.random模块-8.1"><span class="toc-item-num">8.1&nbsp;&nbsp;</span><code>numpy.random</code>模块</a></span></li><li><span><a href="#ndarray-转换" data-toc-modified-id="ndarray-转换-8.2"><span class="toc-item-num">8.2&nbsp;&nbsp;</span>ndarray 转换</a></span></li><li><span><a href="#形状操作" data-toc-modified-id="形状操作-8.3"><span class="toc-item-num">8.3&nbsp;&nbsp;</span>形状操作</a></span></li><li><span><a href="#元素索引与转换" data-toc-modified-id="元素索引与转换-8.4"><span class="toc-item-num">8.4&nbsp;&nbsp;</span>元素索引与转换</a></span></li><li><span><a href="#计算" data-toc-modified-id="计算-8.5"><span class="toc-item-num">8.5&nbsp;&nbsp;</span>计算</a></span></li></ul></li><li><span><a href="#以下为补充内容" data-toc-modified-id="以下为补充内容-9"><span class="toc-item-num">9&nbsp;&nbsp;</span>以下为补充内容</a></span></li><li><span><a href="#函数理解" data-toc-modified-id="函数理解-10"><span class="toc-item-num">10&nbsp;&nbsp;</span>函数理解</a></span><ul class="toc-item"><li><span><a href="#numpy.apply_along_axis" data-toc-modified-id="numpy.apply_along_axis-10.1"><span class="toc-item-num">10.1&nbsp;&nbsp;</span><code>numpy.apply_along_axis</code></a></span></li><li><span><a href="#numpy.roll" data-toc-modified-id="numpy.roll-10.2"><span class="toc-item-num">10.2&nbsp;&nbsp;</span><code>numpy.roll</code></a></span></li><li><span><a href="#统计函数" data-toc-modified-id="统计函数-10.3"><span class="toc-item-num">10.3&nbsp;&nbsp;</span>统计函数</a></span></li><li><span><a href="#Matrix-library" data-toc-modified-id="Matrix-library-10.4"><span class="toc-item-num">10.4&nbsp;&nbsp;</span>Matrix library</a></span></li><li><span><a href="#numpy.random.choice" data-toc-modified-id="numpy.random.choice-10.5"><span class="toc-item-num">10.5&nbsp;&nbsp;</span><code>numpy.random.choice</code></a></span></li><li><span><a href="#array_split" data-toc-modified-id="array_split-10.6"><span class="toc-item-num">10.6&nbsp;&nbsp;</span><code>array_split</code></a></span></li><li><span><a href="#numpy.linalg.norm" data-toc-modified-id="numpy.linalg.norm-10.7"><span class="toc-item-num">10.7&nbsp;&nbsp;</span><code>numpy.linalg.norm</code></a></span></li><li><span><a href="#bincount" data-toc-modified-id="bincount-10.8"><span class="toc-item-num">10.8&nbsp;&nbsp;</span><code>bincount</code></a></span></li><li><span><a href="#unique" data-toc-modified-id="unique-10.9"><span class="toc-item-num">10.9&nbsp;&nbsp;</span><code>unique</code></a></span></li><li><span><a href="#hypot" data-toc-modified-id="hypot-10.10"><span class="toc-item-num">10.10&nbsp;&nbsp;</span><code>hypot</code></a></span></li><li><span><a href="#unravel_index" data-toc-modified-id="unravel_index-10.11"><span class="toc-item-num">10.11&nbsp;&nbsp;</span><code>unravel_index</code></a></span></li><li><span><a href="#NumPy-数据类型一览表" data-toc-modified-id="NumPy-数据类型一览表-10.12"><span class="toc-item-num">10.12&nbsp;&nbsp;</span>NumPy 数据类型一览表</a></span></li></ul></li><li><span><a href="#特定任务" data-toc-modified-id="特定任务-11"><span class="toc-item-num">11&nbsp;&nbsp;</span>特定任务</a></span><ul class="toc-item"><li><span><a href="#ndarray导入与导出" data-toc-modified-id="ndarray导入与导出-11.1"><span class="toc-item-num">11.1&nbsp;&nbsp;</span>ndarray导入与导出</a></span><ul class="toc-item"><li><span><a href="#导出" data-toc-modified-id="导出-11.1.1"><span class="toc-item-num">11.1.1&nbsp;&nbsp;</span>导出</a></span><ul class="toc-item"><li><span><a href="#savetxt" data-toc-modified-id="savetxt-11.1.1.1"><span class="toc-item-num">11.1.1.1&nbsp;&nbsp;</span>savetxt</a></span></li><li><span><a href="#tofile" data-toc-modified-id="tofile-11.1.1.2"><span class="toc-item-num">11.1.1.2&nbsp;&nbsp;</span>tofile</a></span></li><li><span><a href="#np.save" data-toc-modified-id="np.save-11.1.1.3"><span class="toc-item-num">11.1.1.3&nbsp;&nbsp;</span>np.save</a></span></li></ul></li><li><span><a href="#导入" data-toc-modified-id="导入-11.1.2"><span class="toc-item-num">11.1.2&nbsp;&nbsp;</span>导入</a></span><ul class="toc-item"><li><span><a href="#loadtxt" data-toc-modified-id="loadtxt-11.1.2.1"><span class="toc-item-num">11.1.2.1&nbsp;&nbsp;</span>loadtxt</a></span></li><li><span><a href="#genfromtxt" data-toc-modified-id="genfromtxt-11.1.2.2"><span class="toc-item-num">11.1.2.2&nbsp;&nbsp;</span>genfromtxt</a></span></li><li><span><a href="#fromfile" data-toc-modified-id="fromfile-11.1.2.3"><span class="toc-item-num">11.1.2.3&nbsp;&nbsp;</span>fromfile</a></span></li><li><span><a href="#np.load" data-toc-modified-id="np.load-11.1.2.4"><span class="toc-item-num">11.1.2.4&nbsp;&nbsp;</span>np.load</a></span></li></ul></li></ul></li><li><span><a href="#交换ndarray的轴[广义转置]" data-toc-modified-id="交换ndarray的轴[广义转置]-11.2"><span class="toc-item-num">11.2&nbsp;&nbsp;</span>交换ndarray的轴[广义转置]</a></span></li><li><span><a href="#NumPy向量化编程" data-toc-modified-id="NumPy向量化编程-11.3"><span class="toc-item-num">11.3&nbsp;&nbsp;</span>NumPy向量化编程</a></span><ul class="toc-item"><li><span><a href="#numpy.vectorize" data-toc-modified-id="numpy.vectorize-11.3.1"><span class="toc-item-num">11.3.1&nbsp;&nbsp;</span><code>numpy.vectorize</code></a></span></li></ul></li><li><span><a href="#给ndarray增加新的维度" data-toc-modified-id="给ndarray增加新的维度-11.4"><span class="toc-item-num">11.4&nbsp;&nbsp;</span>给ndarray增加新的维度</a></span><ul class="toc-item"><li><span><a href="#使用-newaxis-或者-None" data-toc-modified-id="使用-newaxis-或者-None-11.4.1"><span class="toc-item-num">11.4.1&nbsp;&nbsp;</span>使用 newaxis 或者 None</a></span></li><li><span><a href="#使用reshape" data-toc-modified-id="使用reshape-11.4.2"><span class="toc-item-num">11.4.2&nbsp;&nbsp;</span>使用<code>reshape</code></a></span></li></ul></li><li><span><a href="#自定义-dtype" data-toc-modified-id="自定义-dtype-11.5"><span class="toc-item-num">11.5&nbsp;&nbsp;</span>自定义 dtype</a></span></li><li><span><a href="#获取ndarray中出现次数最多的元素" data-toc-modified-id="获取ndarray中出现次数最多的元素-11.6"><span class="toc-item-num">11.6&nbsp;&nbsp;</span>获取ndarray中出现次数最多的元素</a></span><ul class="toc-item"><li><span><a href="#1维" data-toc-modified-id="1维-11.6.1"><span class="toc-item-num">11.6.1&nbsp;&nbsp;</span>1维</a></span></li><li><span><a href="#多维" data-toc-modified-id="多维-11.6.2"><span class="toc-item-num">11.6.2&nbsp;&nbsp;</span>多维</a></span></li></ul></li><li><span><a href="#ndarray转换为DataFrame（多维->2维）" data-toc-modified-id="ndarray转换为DataFrame（多维->2维）-11.7"><span class="toc-item-num">11.7&nbsp;&nbsp;</span>ndarray转换为DataFrame（多维-&gt;2维）</a></span><ul class="toc-item"><li><span><a href="#比较保守的转换" data-toc-modified-id="比较保守的转换-11.7.1"><span class="toc-item-num">11.7.1&nbsp;&nbsp;</span>比较保守的转换</a></span><ul class="toc-item"><li><span><a href="#补充：利用stack压缩列标签，转换为激进型" data-toc-modified-id="补充：利用stack压缩列标签，转换为激进型-11.7.1.1"><span class="toc-item-num">11.7.1.1&nbsp;&nbsp;</span>补充：利用<code>stack</code>压缩列标签，转换为激进型</a></span></li></ul></li><li><span><a href="#比较激进的转换" data-toc-modified-id="比较激进的转换-11.7.2"><span class="toc-item-num">11.7.2&nbsp;&nbsp;</span>比较激进的转换</a></span></li></ul></li></ul></li><li><span><a href="#问题与分析" data-toc-modified-id="问题与分析-12"><span class="toc-item-num">12&nbsp;&nbsp;</span>问题与分析</a></span><ul class="toc-item"><li><span><a href="#numpy.sort与numpy.argsort" data-toc-modified-id="numpy.sort与numpy.argsort-12.1"><span class="toc-item-num">12.1&nbsp;&nbsp;</span><code>numpy.sort</code>与<code>numpy.argsort</code></a></span><ul class="toc-item"><li><span><a href="#numpy.sort" data-toc-modified-id="numpy.sort-12.1.1"><span class="toc-item-num">12.1.1&nbsp;&nbsp;</span><code>numpy.sort</code></a></span></li><li><span><a href="#numpy.argsort" data-toc-modified-id="numpy.argsort-12.1.2"><span class="toc-item-num">12.1.2&nbsp;&nbsp;</span><code>numpy.argsort</code></a></span></li></ul></li><li><span><a href="#outer" data-toc-modified-id="outer-12.2"><span class="toc-item-num">12.2&nbsp;&nbsp;</span><code>outer</code></a></span></li><li><span><a href="#numpy.where,numpy.nonzero和numpy.argwhere" data-toc-modified-id="numpy.where,numpy.nonzero和numpy.argwhere-12.3"><span class="toc-item-num">12.3&nbsp;&nbsp;</span><code>numpy.where</code>,<code>numpy.nonzero</code>和<code>numpy.argwhere</code></a></span><ul class="toc-item"><li><span><a href="#numpy.where" data-toc-modified-id="numpy.where-12.3.1"><span class="toc-item-num">12.3.1&nbsp;&nbsp;</span><code>numpy.where</code></a></span><ul class="toc-item"><li><span><a href="#同时给定condition和x,-y" data-toc-modified-id="同时给定condition和x,-y-12.3.1.1"><span class="toc-item-num">12.3.1.1&nbsp;&nbsp;</span>同时给定condition和x, y</a></span></li><li><span><a href="#不给定x-y只给定一个条件" data-toc-modified-id="不给定x-y只给定一个条件-12.3.1.2"><span class="toc-item-num">12.3.1.2&nbsp;&nbsp;</span>不给定x y只给定一个条件</a></span></li></ul></li><li><span><a href="#numpy.nonzero" data-toc-modified-id="numpy.nonzero-12.3.2"><span class="toc-item-num">12.3.2&nbsp;&nbsp;</span><code>numpy.nonzero</code></a></span></li><li><span><a href="#numpy.argwhere" data-toc-modified-id="numpy.argwhere-12.3.3"><span class="toc-item-num">12.3.3&nbsp;&nbsp;</span>numpy.argwhere</a></span></li></ul></li><li><span><a href="#mgrid,-ogrid,-meshgrid,-ndenumerate与indices" data-toc-modified-id="mgrid,-ogrid,-meshgrid,-ndenumerate与indices-12.4"><span class="toc-item-num">12.4&nbsp;&nbsp;</span><code>mgrid</code>, <code>ogrid</code>, <code>meshgrid</code>, <code>ndenumerate</code>与<code>indices</code></a></span><ul class="toc-item"><li><span><a href="#mgrid" data-toc-modified-id="mgrid-12.4.1"><span class="toc-item-num">12.4.1&nbsp;&nbsp;</span><code>mgrid</code></a></span></li><li><span><a href="#ogrid" data-toc-modified-id="ogrid-12.4.2"><span class="toc-item-num">12.4.2&nbsp;&nbsp;</span><code>ogrid</code></a></span></li><li><span><a href="#meshgrid" data-toc-modified-id="meshgrid-12.4.3"><span class="toc-item-num">12.4.3&nbsp;&nbsp;</span><code>meshgrid</code></a></span></li><li><span><a href="#ndenumerate" data-toc-modified-id="ndenumerate-12.4.4"><span class="toc-item-num">12.4.4&nbsp;&nbsp;</span><code>ndenumerate</code></a></span></li><li><span><a href="#indices" data-toc-modified-id="indices-12.4.5"><span class="toc-item-num">12.4.5&nbsp;&nbsp;</span><code>indices</code></a></span></li></ul></li><li><span><a href="#allclose与array_equal" data-toc-modified-id="allclose与array_equal-12.5"><span class="toc-item-num">12.5&nbsp;&nbsp;</span><code>allclose</code>与<code>array_equal</code></a></span></li><li><span><a href="#ndarray-和-matrix" data-toc-modified-id="ndarray-和-matrix-12.6"><span class="toc-item-num">12.6&nbsp;&nbsp;</span>ndarray 和 matrix</a></span></li><li><span><a href="#reshape后自动降维" data-toc-modified-id="reshape后自动降维-12.7"><span class="toc-item-num">12.7&nbsp;&nbsp;</span>reshape后自动降维</a></span></li><li><span><a href="#(n,-)和(n,-1)的广播原则" data-toc-modified-id="(n,-)和(n,-1)的广播原则-12.8"><span class="toc-item-num">12.8&nbsp;&nbsp;</span>(n, )和(n, 1)的广播原则</a></span></li><li><span><a href="#tile和repeat" data-toc-modified-id="tile和repeat-12.9"><span class="toc-item-num">12.9&nbsp;&nbsp;</span><code>tile</code>和<code>repeat</code></a></span></li><li><span><a href="#只有一个数字的ndarray" data-toc-modified-id="只有一个数字的ndarray-12.10"><span class="toc-item-num">12.10&nbsp;&nbsp;</span>只有一个数字的ndarray</a></span></li><li><span><a href="#NumPy性能对比" data-toc-modified-id="NumPy性能对比-12.11"><span class="toc-item-num">12.11&nbsp;&nbsp;</span>NumPy性能对比</a></span></li><li><span><a href="#NumPy交换数据和比较操作" data-toc-modified-id="NumPy交换数据和比较操作-12.12"><span class="toc-item-num">12.12&nbsp;&nbsp;</span>NumPy交换数据和比较操作</a></span><ul class="toc-item"><li><span><a href="#交换" data-toc-modified-id="交换-12.12.1"><span class="toc-item-num">12.12.1&nbsp;&nbsp;</span>交换</a></span></li><li><span><a href="#比较" data-toc-modified-id="比较-12.12.2"><span class="toc-item-num">12.12.2&nbsp;&nbsp;</span>比较</a></span></li></ul></li><li><span><a href="#NumPy中的reshape操作" data-toc-modified-id="NumPy中的reshape操作-12.13"><span class="toc-item-num">12.13&nbsp;&nbsp;</span>NumPy中的reshape操作</a></span></li><li><span><a href="#索引(indexing)与高级索引(advanced-indexing,-fancy-indexing)的区别及特殊情况分析" data-toc-modified-id="索引(indexing)与高级索引(advanced-indexing,-fancy-indexing)的区别及特殊情况分析-12.14"><span class="toc-item-num">12.14&nbsp;&nbsp;</span>索引(indexing)与高级索引(advanced indexing, fancy indexing)的区别及特殊情况分析</a></span><ul class="toc-item"><li><span><a href="#切片与高级索引同时出现的场景" data-toc-modified-id="切片与高级索引同时出现的场景-12.14.1"><span class="toc-item-num">12.14.1&nbsp;&nbsp;</span>切片与高级索引同时出现的场景</a></span><ul class="toc-item"><li><span><a href="#高级索引项出现在第一维" data-toc-modified-id="高级索引项出现在第一维-12.14.1.1"><span class="toc-item-num">12.14.1.1&nbsp;&nbsp;</span>高级索引项出现在第一维</a></span></li><li><span><a href="#高级索引项出现在第一维之后的维度" data-toc-modified-id="高级索引项出现在第一维之后的维度-12.14.1.2"><span class="toc-item-num">12.14.1.2&nbsp;&nbsp;</span>高级索引项出现在第一维之后的维度</a></span></li></ul></li><li><span><a href="#作为索引的单个整数（以及只有一个整数的列表）" data-toc-modified-id="作为索引的单个整数（以及只有一个整数的列表）-12.14.2"><span class="toc-item-num">12.14.2&nbsp;&nbsp;</span>作为索引的单个整数（以及只有一个整数的列表）</a></span></li><li><span><a href="#特殊的切片情形" data-toc-modified-id="特殊的切片情形-12.14.3"><span class="toc-item-num">12.14.3&nbsp;&nbsp;</span>特殊的切片情形</a></span><ul class="toc-item"><li><span><a href="#若切片维度少于原始ndarray维度，就算某些维度的索引只是单个数字，也很好理解其仍为切片" data-toc-modified-id="若切片维度少于原始ndarray维度，就算某些维度的索引只是单个数字，也很好理解其仍为切片-12.14.3.1"><span class="toc-item-num">12.14.3.1&nbsp;&nbsp;</span>若切片维度少于原始ndarray维度，就算某些维度的索引只是单个数字，也很好理解其仍为切片</a></span></li><li><span><a href="#但当切片维度等于原始ndarray时，分两种情况。" data-toc-modified-id="但当切片维度等于原始ndarray时，分两种情况。-12.14.3.2"><span class="toc-item-num">12.14.3.2&nbsp;&nbsp;</span>但当切片维度等于原始ndarray时，分两种情况。</a></span></li></ul></li><li><span><a href="#其他需要特殊区分的场景" data-toc-modified-id="其他需要特殊区分的场景-12.14.4"><span class="toc-item-num">12.14.4&nbsp;&nbsp;</span>其他需要特殊区分的场景</a></span></li><li><span><a href="#无论是普通索引还是高级索引，作为左值对其赋值，都将对原ndarray产生影响" data-toc-modified-id="无论是普通索引还是高级索引，作为左值对其赋值，都将对原ndarray产生影响-12.14.5"><span class="toc-item-num">12.14.5&nbsp;&nbsp;</span>无论是普通索引还是高级索引，作为左值对其赋值，都将对原ndarray产生影响</a></span></li></ul></li><li><span><a href="#获取指定行列交叉点上的数据" data-toc-modified-id="获取指定行列交叉点上的数据-12.15"><span class="toc-item-num">12.15&nbsp;&nbsp;</span>获取指定行列交叉点上的数据</a></span></li><li><span><a href="#ndarray的链式索引" data-toc-modified-id="ndarray的链式索引-12.16"><span class="toc-item-num">12.16&nbsp;&nbsp;</span>ndarray的链式索引</a></span><ul class="toc-item"><li><span><a href="#作为右值" data-toc-modified-id="作为右值-12.16.1"><span class="toc-item-num">12.16.1&nbsp;&nbsp;</span>作为右值</a></span></li><li><span><a href="#作为左值" data-toc-modified-id="作为左值-12.16.2"><span class="toc-item-num">12.16.2&nbsp;&nbsp;</span>作为左值</a></span></li></ul></li><li><span><a href="#ndarray内存排布的深入理解" data-toc-modified-id="ndarray内存排布的深入理解-12.17"><span class="toc-item-num">12.17&nbsp;&nbsp;</span>ndarray内存排布的深入理解</a></span><ul class="toc-item"><li><span><a href="#引子" data-toc-modified-id="引子-12.17.1"><span class="toc-item-num">12.17.1&nbsp;&nbsp;</span>引子</a></span></li><li><span><a href="#内存排布" data-toc-modified-id="内存排布-12.17.2"><span class="toc-item-num">12.17.2&nbsp;&nbsp;</span>内存排布</a></span><ul class="toc-item"><li><span><a href="#可视化ndarray内存排布" data-toc-modified-id="可视化ndarray内存排布-12.17.2.1"><span class="toc-item-num">12.17.2.1&nbsp;&nbsp;</span>可视化ndarray内存排布</a></span></li></ul></li><li><span><a href="#视图与副本" data-toc-modified-id="视图与副本-12.17.3"><span class="toc-item-num">12.17.3&nbsp;&nbsp;</span>视图与副本</a></span><ul class="toc-item"><li><span><a href="#直接与间接访问" data-toc-modified-id="直接与间接访问-12.17.3.1"><span class="toc-item-num">12.17.3.1&nbsp;&nbsp;</span>直接与间接访问</a></span></li><li><span><a href="#中间变量" data-toc-modified-id="中间变量-12.17.3.2"><span class="toc-item-num">12.17.3.2&nbsp;&nbsp;</span>中间变量</a></span></li></ul></li><li><span><a href="#总结任务" data-toc-modified-id="总结任务-12.17.4"><span class="toc-item-num">12.17.4&nbsp;&nbsp;</span>总结任务</a></span></li><li><span><a href="#进阶任务" data-toc-modified-id="进阶任务-12.17.5"><span class="toc-item-num">12.17.5&nbsp;&nbsp;</span>进阶任务</a></span></li></ul></li></ul></li></ul></div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="kn">from</span> <span class="nn">IPython.core.interactiveshell</span> <span class="k">import</span> <span class="n">InteractiveShell</span>
<span class="n">InteractiveShell</span><span class="o">.</span><span class="n">ast_node_interactivity</span> <span class="o">=</span> <span class="s2">&quot;all&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="&#22522;&#30784;&#30693;&#35782;">&#22522;&#30784;&#30693;&#35782;<a class="anchor-link" href="#&#22522;&#30784;&#30693;&#35782;">&#182;</a></h1><p>NumPy中主要的数据格式叫做ndarray，或者叫array，顾名思义即多维数组。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#19968;&#20010;&#20363;&#23376;">&#19968;&#20010;&#20363;&#23376;<a class="anchor-link" href="#&#19968;&#20010;&#20363;&#23376;">&#182;</a></h2><p>ndarray的一些属性</p>
<ul>
<li><strong>ndarray.ndim</strong>   维度</li>
<li><strong>ndarray.shape</strong>   形状，比如3维数组可能的形状(3,3,2)</li>
<li><strong>ndarray.size</strong>    ndarray中的元素数</li>
<li><strong>ndarray.dtype</strong>   ndarray中元素的数据类型</li>
<li><strong>ndarray.itemsize</strong> 每一个元素的字节数,等价于<code>ndarray.dtype.itemsize</code></li>
<li><strong>ndarray.data</strong>    实际存储 ndarray 内容的内存</li>
<li><strong>ndarray.T</strong>      ndarray的转置，一个视图(view, 类似于引用),下文统称视图.</li>
<li><strong>ndarray.flat</strong>    返回ndarray的一维化迭代器，对此迭代器赋值将导致整个数组元素被覆盖，而<code>ndarray.flatten()</code> 返回一个一维化的ndarray<strong>副本</strong></li>
<li><strong>ndarray.real/imag</strong> 返回复数数组的实部/虚部数组</li>
<li><strong>ndarray.nbytes</strong>   数组占用的字节数</li>
<li><strong>ndarray.base</strong>    返回父 ndarray，如果该ndarray是其他 ndarray 的 view，则返回原始的 ndarray</li>
<li><strong>ndarray.flags</strong>   ndarray的基本信息，是否对底层数据具有所有权（即是否为其他ndarray的视图）,是否可写入等等</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>arange</strong></p>
<p>Return evenly spaced values within a given interval.</p>
<p>返回指定区间内均匀分布的1-D ndarray</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">([</span><span class="n">start</span><span class="p">,</span> <span class="p">]</span><span class="n">stop</span><span class="p">,</span> <span class="p">[</span><span class="n">step</span><span class="p">,</span> <span class="p">]</span><span class="n">dtype</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
<p><strong>reshape</strong></p>
<p>Gives a new shape to an array without changing its data.</p>
<p>返回具有新形状的ndarray视图</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">newshape</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">)[</span><span class="n">source</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="n">arr</span><span class="o">.</span><span class="n">ndim</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[2]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>2</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[3]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(3, 4)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span><span class="o">.</span><span class="n">size</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[4]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>12</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span><span class="o">.</span><span class="n">dtype</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[5]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>dtype(&#39;int32&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span><span class="o">.</span><span class="n">itemsize</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[6]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>4</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span><span class="o">.</span><span class="n">data</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[7]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&lt;memory at 0x00000209CE6FCB40&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span><span class="o">.</span><span class="n">T</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[8]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0,  4,  8],
       [ 1,  5,  9],
       [ 2,  6, 10],
       [ 3,  7, 11]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span><span class="o">.</span><span class="n">flat</span>

<span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">arr</span><span class="o">.</span><span class="n">flat</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[9]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&lt;numpy.flatiter at 0x209cd2340d0&gt;</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>0
1
2
3
4
5
6
7
8
9
10
11
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">arr</span><span class="o">.</span><span class="n">imag</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[10]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(array([[ 0,  1,  2,  3],
        [ 4,  5,  6,  7],
        [ 8,  9, 10, 11]]), array([[0, 0, 0, 0],
        [0, 0, 0, 0],
        [0, 0, 0, 0]]))</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span><span class="o">.</span><span class="n">nbytes</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[11]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>48</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span><span class="o">.</span><span class="n">base</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[12]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span><span class="o">.</span><span class="n">flags</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[13]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>  C_CONTIGUOUS : True
  F_CONTIGUOUS : False
  OWNDATA : False
  WRITEABLE : True
  ALIGNED : True
  WRITEBACKIFCOPY : False
  UPDATEIFCOPY : False</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>对ndarray.flat赋值，导致后续元素全部受影响</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">arr</span>

<span class="n">arr</span><span class="o">.</span><span class="n">flat</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">arr</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[14]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[ 0,  1,  2,  3,  4],
        [ 5,  6,  7,  8,  9],
        [10, 11, 12, 13, 14],
        [15, 16, 17, 18, 19]],

       [[20, 21, 22, 23, 24],
        [25, 26, 27, 28, 29],
        [30, 31, 32, 33, 34],
        [35, 36, 37, 38, 39]],

       [[40, 41, 42, 43, 44],
        [45, 46, 47, 48, 49],
        [50, 51, 52, 53, 54],
        [55, 56, 57, 58, 59]]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[14]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[1, 2, 1, 2, 1],
        [2, 1, 2, 1, 2],
        [1, 2, 1, 2, 1],
        [2, 1, 2, 1, 2]],

       [[1, 2, 1, 2, 1],
        [2, 1, 2, 1, 2],
        [1, 2, 1, 2, 1],
        [2, 1, 2, 1, 2]],

       [[1, 2, 1, 2, 1],
        [2, 1, 2, 1, 2],
        [1, 2, 1, 2, 1],
        [2, 1, 2, 1, 2]]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="ndarray&#30340;&#26500;&#36896;">ndarray&#30340;&#26500;&#36896;<a class="anchor-link" href="#ndarray&#30340;&#26500;&#36896;">&#182;</a></h2><h3 id="&#22522;&#20110;&#21487;&#36845;&#20195;&#23545;&#35937;&#26500;&#36896;">&#22522;&#20110;&#21487;&#36845;&#20195;&#23545;&#35937;&#26500;&#36896;<a class="anchor-link" href="#&#22522;&#20110;&#21487;&#36845;&#20195;&#23545;&#35937;&#26500;&#36896;">&#182;</a></h3><p>Create an array.</p>
<p>构造 ndarray</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="s1">&#39;K&#39;</span><span class="p">,</span> <span class="n">subok</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">ndmin</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
<p>基于 list 或 tuple等可迭代序列构造ndarray，NumPy会自动推断数据格式（dtype）</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="n">arr</span>
<span class="n">arr</span><span class="o">.</span><span class="n">dtype</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[15]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([2, 3, 4])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[15]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>dtype(&#39;int32&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.2</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">,</span> <span class="mf">5.1</span><span class="p">])</span>
<span class="n">arr</span><span class="o">.</span><span class="n">dtype</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[16]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>dtype(&#39;float64&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>不要使用多个位置参数调用<code>np.array</code></p>
<p><code>np.array(1,2,3,4)    # WRONG</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>  <span class="c1"># RIGHT</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[17]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([1, 2, 3, 4])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>array 自动将二维或多维序列转换为多维数组, <code>array</code> 函数只接受一个序列参数,整体输入即可。</p>
<div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="mf">1.5</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span> <span class="c1"># wrong</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([(</span><span class="mf">1.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[18]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[1.5, 2. , 3. ],
       [4. , 5. , 6. ]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>通过<code>dtype</code>参数指定数组元素的类型</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">complex</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[19]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[1.+0.j, 2.+0.j],
       [3.+0.j, 4.+0.j]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#20869;&#32622;&#26500;&#36896;&#20989;&#25968;">&#20869;&#32622;&#26500;&#36896;&#20989;&#25968;<a class="anchor-link" href="#&#20869;&#32622;&#26500;&#36896;&#20989;&#25968;">&#182;</a></h3><p>需要构造已知维度的ndarray时，NumPy提供了很多构造特定ndarray的方法，比如 <code>ones</code>，<code>zeros</code> 还有<code>empty</code>，<code>empty</code>创建的数组内所包含的数是随机的，取决于分配的内存块中当前的状态，默认的 dtype 是 float64。</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
<span class="n">numpy</span><span class="o">..</span><span class="n">ones</span><span class="p">(</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
<span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
</pre></div>
<p><strong>NumPy 中改变数组大小的操作很慢，因为需要重新分配内存并将已有数据复制一遍</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[20]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int16</span><span class="p">)</span>          <span class="c1"># 指定 dtype</span>
<span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>                           <span class="c1"># 值不确定</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[20]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[0., 0., 0., 0.],
       [0., 0., 0., 0.],
       [0., 0., 0., 0.]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[20]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[1, 1, 1, 1],
        [1, 1, 1, 1],
        [1, 1, 1, 1]],

       [[1, 1, 1, 1],
        [1, 1, 1, 1],
        [1, 1, 1, 1]]], dtype=int16)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[20]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[1.5, 2. , 3. ],
       [4. , 5. , 6. ]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Numpy 提供了一个类似于<code>range</code>的函数<code>arange</code>, 接受 <code>start</code>, <code>stop</code>, <code>step</code> 参数。</p>
<div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">([</span><span class="n">start</span><span class="p">,]</span> <span class="n">stop</span><span class="p">[,</span> <span class="n">step</span><span class="p">,],</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[21]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[21]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([10, 15, 20, 25])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[21]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([0. , 0.3, 0.6, 0.9, 1.2, 1.5, 1.8])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>当<code>arange</code>接受float参数的时候，因为浮点数精度的问题，行为可能会比较诡异。</strong></p>
<p><strong>此时推荐使用 linspace 函数，linspace 有一个 endpoint 参数，决定区间是否包含第二个参数作为最后一个数据点，默认为 True</strong></p>
<p><strong>linspace</strong></p>
<p>Return evenly spaced numbers over a specified interval.</p>
<p>返回指定区间内的均匀分布数值</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span>
    <span class="p">[</span><span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="s1">&#39;stop&#39;</span><span class="p">,</span> <span class="s1">&#39;num=50&#39;</span><span class="p">,</span> <span class="s1">&#39;endpoint=True&#39;</span><span class="p">,</span> <span class="s1">&#39;retstep=False&#39;</span><span class="p">,</span> <span class="s1">&#39;dtype=None&#39;</span><span class="p">,</span> <span class="s1">&#39;axis=0&#39;</span><span class="p">],</span>
<span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[22]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">numpy</span> <span class="k">import</span> <span class="n">pi</span>

<span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[22]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([0.  , 0.25, 0.5 , 0.75, 1.  , 1.25, 1.5 , 1.75, 2.  ])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[22]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([0.        , 0.6981317 , 1.3962634 , 2.0943951 , 2.7925268 ,
       3.4906585 , 4.1887902 , 4.88692191, 5.58505361, 6.28318531])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[22]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([ 0.00000000e+00,  6.42787610e-01,  9.84807753e-01,  8.66025404e-01,
        3.42020143e-01, -3.42020143e-01, -8.66025404e-01, -9.84807753e-01,
       -6.42787610e-01, -2.44929360e-16])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>另见：</strong></p>

<pre><code>array, zeros, zeros_like, ones, ones_like, empty, empty_like, arange, linspace, numpy.random.rand, numpy.random.randn, fromfunction, fromfile</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>zeros_like</strong></p>
<p>Return an array of zeros with the same shape and type as a given array.</p>
<p>构造和输入ndarray同形状的元素全为0的ndarray</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="s1">&#39;K&#39;</span><span class="p">,</span> <span class="n">subok</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[23]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">arr</span>

<span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[23]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[23]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[0, 0, 0, 0],
       [0, 0, 0, 0],
       [0, 0, 0, 0]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>ones_like</strong></p>
<p>Return an array of ones with the same shape and type as a given array.</p>
<p>构造和输入ndarray同形状的元素全为1的ndarray</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">ones_like</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="s1">&#39;K&#39;</span><span class="p">,</span> <span class="n">subok</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>empty_like</strong></p>
<p>Return a new array with the same shape and type as a given array.</p>
<p>构造和输入ndarray同形状的空ndarray</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">empty_like</span><span class="p">(</span><span class="n">prototype</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="s1">&#39;K&#39;</span><span class="p">,</span> <span class="n">subok</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>rand</strong></p>
<p>Random values in a given shape.</p>
<p>返回指定形状的随机数</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">d0</span><span class="p">,</span> <span class="n">d1</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">dn</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[24]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[24]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[0.18692556, 0.12425864, 0.38854238, 0.33444117],
       [0.28436856, 0.73242097, 0.92433785, 0.57142291],
       [0.01159949, 0.05949372, 0.21421816, 0.57355643]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>randn</strong></p>
<p>Return a sample (or samples) from the “standard normal” distribution.</p>
<p>指定形状的标准正态分布随机数</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="n">d0</span><span class="p">,</span> <span class="n">d1</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">dn</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[25]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[25]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0.25060812,  0.19705778, -0.07811055,  0.28026645],
       [-1.53577158,  0.26562853,  0.79261808,  0.70344017],
       [ 0.50744347,  0.12512166, -0.55941091,  0.32812377]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>fromfile</strong></p>
<p><code>numpy.fromfile</code>见<a href="#fromfile">fromfile</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#25353;&#20989;&#25968;&#29983;&#25104;">&#25353;&#20989;&#25968;&#29983;&#25104;<a class="anchor-link" href="#&#25353;&#20989;&#25968;&#29983;&#25104;">&#182;</a></h3><p>类似 Python 生成式或者迭代器</p>
<div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">fromfunction</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">shape</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
<p>根据 shape 给定的维度，以坐标作为输入，经函数处理后得到输出</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[26]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">10</span><span class="o">*</span><span class="n">x</span><span class="o">+</span><span class="n">y</span>


<span class="n">np</span><span class="o">.</span><span class="n">fromfunction</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>  <span class="c1"># 指定形状，生成</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[26]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0,  1,  2,  3],
       [10, 11, 12, 13],
       [20, 21, 22, 23],
       [30, 31, 32, 33],
       [40, 41, 42, 43]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#25171;&#21360;&#22810;&#32500;&#25968;&#32452;">&#25171;&#21360;&#22810;&#32500;&#25968;&#32452;<a class="anchor-link" href="#&#25171;&#21360;&#22810;&#32500;&#25968;&#32452;">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[27]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>                    <span class="c1"># 1d array</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>          <span class="c1"># 2d array</span>
<span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>         <span class="c1"># 3d array</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>[0 1 2 3 4 5]
[[ 0  1  2]
 [ 3  4  5]
 [ 6  7  8]
 [ 9 10 11]]
[[[ 0  1  2  3]
  [ 4  5  6  7]
  [ 8  9 10 11]]

 [[12 13 14 15]
  [16 17 18 19]
  [20 21 22 23]]]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>如果数组过大，打印时会自动跳过中间部分。想要强制打印整个数组，可以使用 <code>set_printoptions</code></p>
<p><code>np.set_printoptions(threshold=np.nan)</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#22522;&#26412;&#25805;&#20316;">&#22522;&#26412;&#25805;&#20316;<a class="anchor-link" href="#&#22522;&#26412;&#25805;&#20316;">&#182;</a></h2><p>对ndarray的操作，大部分是elementwise的，即按元素操作。之后产生一个新的ndarray.</p>
<p>注意，在 NumPy 中 <code>*</code> 是元素乘法，如果需要矩阵乘法操作，使用 <code>dot</code> 或者 <code>@</code> 操作符</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[28]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
<span class="n">B</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]])</span>

<span class="n">A</span><span class="o">*</span><span class="n">B</span>                         <span class="c1"># elementwise product</span>
<span class="n">A</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>                    <span class="c1"># matrix product</span>
<span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>                <span class="c1"># another matrix product</span>
<span class="n">A</span><span class="nd">@B</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[28]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[2, 0],
       [0, 4]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[28]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[5, 4],
       [3, 4]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[28]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[5, 4],
       [3, 4]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[28]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[5, 4],
       [3, 4]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>以上操作也可以用函数替代，比如</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[29]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[29]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[3, 1],
       [3, 5]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>+=</code> <code>*=</code> 之类的操作 会就地操作原数组，而不是产生一个新的数组，因为优先调用 <code>iadd</code> 等 inplace 方法。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[30]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">a</span> <span class="o">*=</span> <span class="mi">3</span>
<span class="n">a</span>


<span class="n">b</span> <span class="o">+=</span> <span class="n">a</span>
<span class="n">b</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">a</span> <span class="o">+=</span> <span class="n">b</span>                  <span class="c1"># b is not automatically converted to integer type</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[30]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[3, 3, 3],
       [3, 3, 3]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[30]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[3.39390146, 3.4361519 , 3.23511957],
       [3.48940575, 3.49200153, 3.10309887]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Cannot cast ufunc add output from dtype(&#39;float64&#39;) to dtype(&#39;int32&#39;) with casting rule &#39;same_kind&#39;
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>当两个操作数精度不同时，NumPy 会自动采用较高精度，叫做 upcasting</strong>，所以 float 无法自动转换到 int</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>很多操作，比如求和已经作为ndarray的方法进行了实现。例如 <code>sum</code> <code>min</code> <code>max</code> 等。这些操作默认 <code>axis=None</code>，但是可以手动指定<code>axis</code>参数来对某一维进行操作。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[31]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

<span class="n">arr</span>
<span class="n">arr</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>                            <span class="c1"># sum of each column</span>
<span class="n">arr</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>                            <span class="c1"># min of each row</span>
<span class="n">arr</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>                         <span class="c1"># cumulative sum along each row</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[31]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[31]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([12, 15, 18, 21])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[31]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([0, 4, 8])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[31]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0,  1,  3,  6],
       [ 4,  9, 15, 22],
       [ 8, 17, 27, 38]], dtype=int32)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#36890;&#29992;&#20989;&#25968;">&#36890;&#29992;&#20989;&#25968;<a class="anchor-link" href="#&#36890;&#29992;&#20989;&#25968;">&#182;</a></h2><p>NumPy 内置了很多函数比如 <code>sin</code> <code>cos</code> <code>exp</code> <code>sqrt</code> <code>add</code>，被称作 ufunc，NumPy 中这些 ufunc 大多是 elementwise 的，返回新的 ndarray</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[32]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

<span class="n">arr</span>
<span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

<span class="n">arr_1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">arr_1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[32]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[32]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[1.00000000e+00, 2.71828183e+00, 7.38905610e+00, 2.00855369e+01],
       [5.45981500e+01, 1.48413159e+02, 4.03428793e+02, 1.09663316e+03],
       [2.98095799e+03, 8.10308393e+03, 2.20264658e+04, 5.98741417e+04]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[32]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[0.        , 1.        , 1.41421356, 1.73205081],
       [2.        , 2.23606798, 2.44948974, 2.64575131],
       [2.82842712, 3.        , 3.16227766, 3.31662479]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[32]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 1.,  2.,  3.,  4.],
       [ 5.,  6.,  7.,  8.],
       [ 9., 10., 11., 12.]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>另见：</strong></p>

<pre><code>all, any, apply_along_axis, argmax, argmin, argsort, average, bincount, ceil, clip, conj, corrcoef, cov, cross, cumprod, cumsum, diff, dot, floor, inner, inv, lexsort, max, maximum, mean, median, min, minimum, nonzero, outer, prod, re, round, sort, std, sum, trace, transpose, var, vdot, vectorize, where</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>all</strong></p>
<p>Test whether all array elements along a given axis evaluate to True.</p>
<p>检验给定维度的所有值是否都满足一定条件为 True</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">keepdims</span><span class="o">=&lt;</span><span class="n">no</span> <span class="n">value</span><span class="o">&gt;</span><span class="p">)[</span><span class="n">source</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[33]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[33]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>nan 值被认为是 True</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>any</strong></p>
<p>Test whether any array element along a given axis evaluates to True.</p>
<p>检验给定维度是否有任一值满足一定条件为 True</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">keepdims</span><span class="o">=&lt;</span><span class="n">no</span> <span class="n">value</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[34]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[34]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>nan值为True</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>apply_along_axis</code>见<a href=""></a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>apply_along_axis</strong> 见补充部分</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>argmax</strong></p>
<p>Returns the indices of the maximum values along an axis.</p>
<p>指定维度最大值的“坐标”</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
<p><strong>注意：该函数返回的 坐标是 1-D的，即无论是否指定某个维度或整体寻找最大值，返回的“坐标”都是1-D的。</strong></p>
<p><strong>出现重复最大值时，返回第一次出现的“坐标”</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[35]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

<span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

<span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[35]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>11</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[35]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([2, 2, 2, 2], dtype=int64)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[35]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([3, 3, 3], dtype=int64)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>argmin</strong></p>
<p>Returns the indices of the minimum values along an axis.</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">argmin</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
<p>与 <code>argmax</code>类似</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>argsort</strong>见补充部分</p>
<p><strong>outer</strong>见补充部分</p>
<p><strong>transpose</strong>见补充部分</p>
<p><strong>vectorize</strong>见补充部分</p>
<p><strong>where</strong>见补充部分</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#32034;&#24341;&#12289;&#20999;&#29255;&#21644;&#36845;&#20195;">&#32034;&#24341;&#12289;&#20999;&#29255;&#21644;&#36845;&#20195;<a class="anchor-link" href="#&#32034;&#24341;&#12289;&#20999;&#29255;&#21644;&#36845;&#20195;">&#182;</a></h2><p>一维ndarray的索引、切片和迭代与 python list 没有什么区别。</p>
<p>多维ndarray的每一维度都有对应一个index，按序列形式传递，当有些维度的索引没有给出的时候，默认为<code>:</code>，即该维度全部元素。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[36]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">arr</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[36]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[37]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

<span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>                       <span class="c1"># each row in the second column of b</span>

<span class="n">arr</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>                        <span class="c1"># equivalent to the previous example</span>

<span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="p">:]</span>                      <span class="c1"># each column in the second and third row of b</span>

<span class="n">arr</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>                                  <span class="c1"># 等价于 b[-1,:]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[37]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>11</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[37]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([1, 5, 9])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[37]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([1, 5, 9])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[37]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[37]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([ 8,  9, 10, 11])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>x[i]</code> 也可以写成 <code>x[i, ...]</code>, <code>...</code> 可以代表任意多个 <code>:</code> ，假设 x 是5维的，则</p>
<ul>
<li><code>x[1,2,...]</code> 等价于 <code>x[1,2,:,:,:]</code></li>
<li><code>x[...,3]</code> 等价于 <code>x[:,:,:,:,3]</code></li>
<li><code>x[4,...,5,:]</code> 等价于 <code>x[4,:,:,5,:]</code></li>
</ul>
<p><strong>对多维数组的迭代，等价于对第一维度的迭代</strong>，如果要对整个ndarray的所有元素进行迭代，可以使用 <code>ndarray.flat</code>，返回一个原数组的一维化迭代器。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[38]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">arr</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>[0 1 2 3]
[4 5 6 7]
[ 8  9 10 11]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[39]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">arr</span><span class="o">.</span><span class="n">flat</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>0
1
2
3
4
5
6
7
8
9
10
11
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>另见：</p>

<pre><code>Indexing, Indexing (reference), newaxis, ndenumerate, indices</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>newaxis</strong>见补充部分</p>
<p><strong>ndenumerate</strong>见补充部分</p>
<p><strong>indices</strong>见补充部分</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="&#24418;&#29366;&#25805;&#20316;">&#24418;&#29366;&#25805;&#20316;<a class="anchor-link" href="#&#24418;&#29366;&#25805;&#20316;">&#182;</a></h1><h2 id="&#25913;&#21464;ndarray&#30340;&#24418;&#29366;">&#25913;&#21464;ndarray&#30340;&#24418;&#29366;<a class="anchor-link" href="#&#25913;&#21464;ndarray&#30340;&#24418;&#29366;">&#182;</a></h2><p>用到的主要函数 <code>ravel, flattern, reshape, resize</code></p>
<p><strong>ravel</strong></p>
<p>Return a contiguous flattened array.</p>
<p>返回一维化<strong>视图</strong></p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">ravel</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
</pre></div>
<p>参数 <code>order</code> 控制一维化的顺序，<code>order='C'</code>时从最外层维度开始一维化，如果为<code>F</code>在从最内层开始。</p>
<p><strong>flatten</strong></p>
<p>Return a copy of the array collapsed into one dimension.</p>
<p>返回一维化<strong>副本</strong></p>
<div class="highlight"><pre><span></span><span class="n">ndarray</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">order</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
</pre></div>
<p><strong><code>ravel()</code>返回的是原ndarray的视图，视图的数据改变会影响原ndarray，<code>flatten()</code> 返回一个一维化的副本</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[40]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">arr</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>  <span class="c1"># 一维化视图</span>
<span class="n">arr</span><span class="o">.</span><span class="n">ravel</span><span class="p">(</span><span class="n">order</span><span class="o">=</span><span class="s1">&#39;F&#39;</span><span class="p">)</span>  <span class="c1"># F order</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[40]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[40]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([ 0,  4,  8,  1,  5,  9,  2,  6, 10,  3,  7, 11])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[41]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

<span class="n">arr</span><span class="o">.</span><span class="n">T</span>
<span class="n">arr</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">shape</span>
<span class="n">arr</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[41]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0,  1,  2],
       [ 3,  4,  5],
       [ 6,  7,  8],
       [ 9, 10, 11]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[41]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0,  4,  8],
       [ 1,  5,  9],
       [ 2,  6, 10],
       [ 3,  7, 11]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[41]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(4, 3)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[41]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(3, 4)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[42]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<span class="n">arr</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span><span class="o">.</span><span class="n">flags</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[42]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[42]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>  C_CONTIGUOUS : True
  F_CONTIGUOUS : True
  OWNDATA : True
  WRITEABLE : True
  ALIGNED : True
  WRITEBACKIFCOPY : False
  UPDATEIFCOPY : False</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>ndarray.resize</strong></p>
<p>Change shape and size of array in-place.</p>
<p>就地改变ndarray的形状（有reference检查）</p>
<div class="highlight"><pre><span></span><span class="n">ndarray</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">new_shape</span><span class="p">,</span> <span class="n">refcheck</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
<p><strong>numpy.resize</strong></p>
<p>Return a new array with the specified shape.</p>
<p>返回改变形状的副本（无reference检查）</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">new_shape</span><span class="p">)[</span><span class="n">source</span><span class="p">]</span>
</pre></div>
<p><strong>resize 和 reshape有两处不同，其一，ndarray.resize会进行reference检查，而reshape不会；其二，resize可以将原ndarray改变包含更多或更少元素的形状，更少时直接丢弃部分元素即可，更多时重复原ndarray。</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[43]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]],</span> <span class="n">order</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">arr</span>
<span class="n">arr</span><span class="o">.</span><span class="n">resize</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>  <span class="c1"># 即使存在 reference，依然可以就地resize</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">arr</span><span class="o">.</span><span class="n">resize</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>cannot resize an array that references or is referenced
by another array in this way.
Use the np.resize function or refcheck=False
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>实际上，即使存在reference，只要不更改核心数据，也还是可以就地resize的。</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>另见：</p>

<pre><code>ndarray.shape, reshape, resize, ravel</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="ndarray&#30340;&#32452;&#21512;">ndarray&#30340;&#32452;&#21512;<a class="anchor-link" href="#ndarray&#30340;&#32452;&#21512;">&#182;</a></h2><p>用到的主要函数 <code>vstack, hstack, column_stack, concatenate</code></p>
<p><strong>vstack</strong></p>
<p>Stack arrays in sequence vertically (row wise).</p>
<p>垂直组合ndarray</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">vstack</span><span class="p">(</span><span class="n">tup</span><span class="p">)</span>
</pre></div>
<p><strong>hstack</strong></p>
<p>Stack arrays in sequence horizontally (column wise).</p>
<p>水平组合ndarray</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="n">tup</span><span class="p">)</span>
</pre></div>
<p><strong>column_stack</strong></p>
<p>Stack 1-D arrays as columns into a 2-D array.</p>
<p>将1-Dndarray作为列组合为2-Dndarray</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">column_stack</span><span class="p">(</span><span class="n">tup</span><span class="p">)</span>
</pre></div>
<p><strong>concatenate</strong></p>
<p>Join a sequence of arrays along an existing axis.</p>
<p>按指定维度组合ndarray</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">,</span> <span class="o">...</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
<p><strong>直接使用concatenate就完事了，高效、可控</strong></p>
<p><strong>直接使用concatenate就完事了，高效、可控</strong></p>
<p><strong>直接使用concatenate就完事了，高效、可控</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[44]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr_a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">arr_a</span>

<span class="n">arr_b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">24</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">arr_b</span>

<span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">arr_a</span><span class="p">,</span> <span class="n">arr_b</span><span class="p">))</span>

<span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">arr_a</span><span class="p">,</span> <span class="n">arr_b</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[44]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[44]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[12, 13, 14, 15],
       [16, 17, 18, 19],
       [20, 21, 22, 23]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[44]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11],
       [12, 13, 14, 15],
       [16, 17, 18, 19],
       [20, 21, 22, 23]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[44]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0,  1,  2,  3, 12, 13, 14, 15],
       [ 4,  5,  6,  7, 16, 17, 18, 19],
       [ 8,  9, 10, 11, 20, 21, 22, 23]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>仅对于2-D ndarrays<code>column_stack</code>是和<code>hstack</code>一样的</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[45]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">arr_a</span><span class="p">,</span> <span class="n">arr_b</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[45]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0,  1,  2,  3, 12, 13, 14, 15],
       [ 4,  5,  6,  7, 16, 17, 18, 19],
       [ 8,  9, 10, 11, 20, 21, 22, 23]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[46]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">4.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">])</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">3.</span><span class="p">,</span> <span class="mf">8.</span><span class="p">])</span>
<span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>     <span class="c1"># returns a 2D array</span>

<span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>           <span class="c1"># the result is different</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[46]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[4., 3.],
       [2., 8.]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[46]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([4., 2., 3., 8.])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>实际上，hstack 按第二维度拼接，而 vstack 按第一维度拼接</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[47]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr_a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">arr_a</span>

<span class="n">arr_b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">24</span><span class="p">,</span> <span class="mi">48</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">arr_b</span>

<span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">arr_a</span><span class="p">,</span> <span class="n">arr_b</span><span class="p">))</span><span class="o">.</span><span class="n">shape</span>

<span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">arr_a</span><span class="p">,</span> <span class="n">arr_b</span><span class="p">))</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[47]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[ 0,  1,  2,  3],
        [ 4,  5,  6,  7],
        [ 8,  9, 10, 11]],

       [[12, 13, 14, 15],
        [16, 17, 18, 19],
        [20, 21, 22, 23]]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[47]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[24, 25, 26, 27],
        [28, 29, 30, 31],
        [32, 33, 34, 35]],

       [[36, 37, 38, 39],
        [40, 41, 42, 43],
        [44, 45, 46, 47]]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[47]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(4, 3, 4)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[47]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(2, 6, 4)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>concatenate 可以指定按哪个维度拼接，若指定 <code>axis=None</code> 则组合为1-D</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[48]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr_a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">arr_a</span>

<span class="n">arr_b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">24</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">arr_b</span>

<span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">arr_a</span><span class="p">,</span> <span class="n">arr_b</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">arr_a</span><span class="p">,</span> <span class="n">arr_b</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">arr_a</span><span class="p">,</span> <span class="n">arr_b</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[48]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[48]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[12, 13, 14, 15],
       [16, 17, 18, 19],
       [20, 21, 22, 23]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[48]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11],
       [12, 13, 14, 15],
       [16, 17, 18, 19],
       [20, 21, 22, 23]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[48]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0,  1,  2,  3, 12, 13, 14, 15],
       [ 4,  5,  6,  7, 16, 17, 18, 19],
       [ 8,  9, 10, 11, 20, 21, 22, 23]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[48]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16,
       17, 18, 19, 20, 21, 22, 23])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>此外还有<code>r_</code> 和 <code>c_</code> 在构建ndarray时也很有用</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[49]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">r_</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[49]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([1, 2, 3, 0, 4])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>另见：</p>

<pre><code>hstack, vstack, column_stack, concatenate, c_, r_</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#25286;&#20998;ndarray">&#25286;&#20998;ndarray<a class="anchor-link" href="#&#25286;&#20998;ndarray">&#182;</a></h2><p>用到的主要函数 <code>hsplit, vsplit, split</code></p>
<p><strong>hsplit</strong></p>
<p>Split an array into multiple sub-arrays horizontally (column-wise).</p>
<p>水平拆分ndarray</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">hsplit</span><span class="p">(</span><span class="n">ary</span><span class="p">,</span> <span class="n">indices_or_sections</span><span class="p">)</span>
</pre></div>
<p><strong>vsplit</strong></p>
<p>Split an array into multiple sub-arrays vertically (row-wise).</p>
<p>垂直拆分ndarray</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">vsplit</span><span class="p">(</span><span class="n">ary</span><span class="p">,</span> <span class="n">indices_or_sections</span><span class="p">)</span>
</pre></div>
<p><strong>split</strong></p>
<p>Split an array into multiple sub-arrays.</p>
<p>按指定维度拆分ndarray</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">ary</span><span class="p">,</span> <span class="n">indices_or_sections</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
<p>其中<code>indices_or_sections</code>可以只给出拆分后的个数,也可用于精细拆分,比如给定 [2, 3] 则拆分如下</p>
<ul>
<li><code>arr[:2]</code></li>
<li><code>arr[2:3]</code></li>
<li><code>arr[3:]</code></li>
</ul>
<p>axis 指定沿着哪个维度拆分.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[50]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">arr</span>

<span class="n">np</span><span class="o">.</span><span class="n">hsplit</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>   <span class="c1"># 分为2个</span>

<span class="n">np</span><span class="o">.</span><span class="n">hsplit</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>   <span class="c1"># 第2和第3列后拆分</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[50]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[50]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[array([[0, 1],
        [4, 5],
        [8, 9]]), array([[ 2,  3],
        [ 6,  7],
        [10, 11]])]</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[50]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[array([[0],
        [4],
        [8]]), array([[1],
        [5],
        [9]]), array([[ 2,  3],
        [ 6,  7],
        [10, 11]])]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[51]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[51]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[array([[0, 1, 2, 3]]), array([[4, 5, 6, 7]]), array([[ 8,  9, 10, 11]])]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[52]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[52]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[array([[0, 1, 2, 3],
        [4, 5, 6, 7]]),
 array([[ 8,  9, 10, 11]]),
 array([], shape=(0, 4), dtype=int32)]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[53]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[53]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[array([[0, 1],
        [4, 5],
        [8, 9]]), array([[ 2,  3],
        [ 6,  7],
        [10, 11]])]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="&#21103;&#26412;&#19982;&#35270;&#22270;">&#21103;&#26412;&#19982;&#35270;&#22270;<a class="anchor-link" href="#&#21103;&#26412;&#19982;&#35270;&#22270;">&#182;</a></h1><p><strong>NumPy中关于复制大概分三种情况：完全不复制、视图（view）或者叫浅复制（shadow copy）以及副本或者叫深复制（deep copy）</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#23436;&#20840;&#26080;&#22797;&#21046;">&#23436;&#20840;&#26080;&#22797;&#21046;<a class="anchor-link" href="#&#23436;&#20840;&#26080;&#22797;&#21046;">&#182;</a></h2><p>将ndarray作为右值对某个变量名进行赋值不会有底层数据的复制，只是将另一个变量名也绑定到同一个ndarray上；函数调用也是一样，按引用调用，不会复制nndarray对象的数据（底层数据以及shape，data type等边缘数据都不存在复制）</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[54]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">arr</span>  <span class="c1"># 将s这一变量名绑定到arr上</span>
<span class="n">s</span> <span class="ow">is</span> <span class="n">arr</span>  <span class="c1"># s即为arr</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[54]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[55]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">s</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span>    <span class="c1"># 改变s的形状当然也改变arr</span>
<span class="n">arr</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[55]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(3, 4)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[56]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 函数调用传入的是类似“指针”的东西</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>


<span class="nb">id</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

<span class="n">f</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[56]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>2241145493744</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>2241145493744
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#35270;&#22270;&#19982;&#27973;&#22797;&#21046;">&#35270;&#22270;&#19982;&#27973;&#22797;&#21046;<a class="anchor-link" href="#&#35270;&#22270;&#19982;&#27973;&#22797;&#21046;">&#182;</a></h2><p><strong>视图</strong>，即不同的ndarray共用同一块内存作为底层数据，虽然外部属性诸如形状、数据类型、strides等不一样，但其底层的数据内存块是一样的。其中作为base的ndarray对存储底层数据的内存块具有所有权，其他作为视图的ndarray都是在该内存块的基础上借用其数据。改变视图的形状等边缘属性不会影响原ndarray，但改变视图的核心数据会影响原ndarray的底层数据。</p>
<p><strong>切片或者普通索引总是返回视图，但仅仅针对作为右值时而言。作为左值时对其进行赋值都将直接影响原ndarray，而不会有新的ndarray产生（无论是视图或副本）</strong></p>
<p><strong>切片或者普通索引总是返回视图，但仅仅针对作为右值时而言。作为左值时对其进行赋值都将直接影响原ndarray，而不会有新的ndarray产生（无论是视图或副本）</strong></p>
<p><strong>切片或者普通索引总是返回视图，但仅仅针对作为右值时而言。作为左值时对其进行赋值都将直接影响原ndarray，而不会有新的ndarray产生（无论是视图或副本）</strong></p>
<p><strong>实际上，只要新的ndarray可以通过调整shape dtype strides这三要素调整索引机制，在原始内存块中标记出新ndarray所需内存块，那么就NumPy就倾向于返回视图</strong></p>
<p>关于普通索引与高级索引的区别，见补充内容相关部分。</p>
<p>关于ndarray的内存管理，见<a href="http://www.labri.fr/perso/nrougier/from-python-to-numpy/#anatomy-of-an-array">from-python-to-numpy</a></p>
<p>此外，使用<code>view</code>方法也能返回视图。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#22522;&#20110;&#20999;&#29255;&#34892;&#20026;&#20135;&#29983;&#30340;&#35270;&#22270;">&#22522;&#20110;&#20999;&#29255;&#34892;&#20026;&#20135;&#29983;&#30340;&#35270;&#22270;<a class="anchor-link" href="#&#22522;&#20110;&#20999;&#29255;&#34892;&#20026;&#20135;&#29983;&#30340;&#35270;&#22270;">&#182;</a></h3><p>所谓切片，即对ndarray进行索引时，每个维度上的索引值都是类似<code>start:stop:step</code>这样格式的，比如<code>arr[0:4:2, 1:5:1]</code>或者<code>arr[1, :-1]</code>。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[57]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="mi">5</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>

<span class="n">s</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span>  <span class="c1"># s对底层数据没有所有权</span>
<span class="n">s</span><span class="o">.</span><span class="n">base</span> <span class="ow">is</span> <span class="p">(</span><span class="n">arr</span> <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span> <span class="k">else</span> <span class="n">arr</span><span class="o">.</span><span class="n">base</span><span class="p">)</span>  <span class="c1"># s为arr的视图</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[57]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[57]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[58]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">s</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span>  <span class="c1"># 改变s的形状不改变 arr 的形状</span>
<span class="n">s</span>

<span class="n">arr</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[58]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[1., 1., 1.],
       [1., 1., 1.]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[58]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(3, 4)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[59]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">999</span>  <span class="c1"># 改变s的数据同时改变 arr 的数据</span>
<span class="n">s</span>

<span class="n">arr</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[59]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[  1.,   1., 999.],
       [  1.,   1.,   1.]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[59]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[  1.,   1.,   1., 999.],
       [  1.,   1.,   1.,   1.],
       [  1.,   1.,   1.,   1.]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#22522;&#20110;view&#20989;&#25968;&#20135;&#29983;&#30340;&#35270;&#22270;">&#22522;&#20110;<code>view</code>&#20989;&#25968;&#20135;&#29983;&#30340;&#35270;&#22270;<a class="anchor-link" href="#&#22522;&#20110;view&#20989;&#25968;&#20135;&#29983;&#30340;&#35270;&#22270;">&#182;</a></h3><p><strong>view</strong></p>
<p>New view of array with the same data.</p>
<p>返回原ndarray的视图，<strong>可通过这一函数调整对底层内存的索引方式（8个8byte或4个16byte）</strong></p>
<div class="highlight"><pre><span></span><span class="n">ndarray</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
<p>参数dtype用于改变对底层内存块的看待方式，即多少个字节作为一个元素单元。参数type的可选值为<code>np.ndarray</code>或<code>np.matrix</code>，用于更改ndarray的属性。不含参数的<code>view</code>则只返回一个视图，不改变原ndarray的其他属性。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[60]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">view</span><span class="p">()</span>

<span class="n">s</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span>  <span class="c1"># s对底层数据没有所有权</span>
<span class="n">s</span><span class="o">.</span><span class="n">base</span> <span class="ow">is</span> <span class="p">(</span><span class="n">arr</span> <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span> <span class="k">else</span> <span class="n">arr</span><span class="o">.</span><span class="n">base</span><span class="p">)</span>  <span class="c1"># s为arr的视图</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[60]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[60]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>view另一种更常用的情形是改变<strong>对底层内存块的认识方式</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[61]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int8</span><span class="p">)</span>
<span class="n">arr</span>

<span class="c1"># 将改变s的元素值以及形状</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int16</span><span class="p">)</span>
<span class="n">s</span>
<span class="n">s</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[61]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[1, 1, 1, 1],
       [1, 1, 1, 1],
       [1, 1, 1, 1]], dtype=int8)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[61]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[257, 257],
       [257, 257],
       [257, 257]], dtype=int16)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[61]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(3, 2)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[62]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">s</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span>  <span class="c1"># s对底层数据没有所有权</span>
<span class="n">s</span><span class="o">.</span><span class="n">base</span> <span class="ow">is</span> <span class="p">(</span><span class="n">arr</span> <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span> <span class="k">else</span> <span class="n">arr</span><span class="o">.</span><span class="n">base</span><span class="p">)</span>  <span class="c1"># s为arr的视图</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[62]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[62]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#28145;&#22797;&#21046;">&#28145;&#22797;&#21046;<a class="anchor-link" href="#&#28145;&#22797;&#21046;">&#182;</a></h2><p>首先明确一个概念，<strong>高级索引（advanced indexing, fancy indexing）</strong>。区别于上面的切片概念，当对ndarray进行索引时，只要某一维度上的索引值出现了诸如<code>[1,2,4]</code>或<code>[True, True, False]</code>之类的通过明确序列给定的索引（而不是<code>1:5:2</code>这类复合<code>start:stop:step</code>范式的索引）时，那么就算作高级索引。</p>
<p>实际上，因为一旦涉及到这种在某一维度上给定一个由明确序列给定的索引时（例如[1, 2, 4]），NumPy很难通过形状、数据类型、strides（可能还需要一个start_offset） 来描述新ndarray在原ndarray的底层数据内存块上的索引机制，因此必然需要将数据在新的内存块上复制一份。</p>
<p><strong>使用高级索引时总是返回副本，即对原ndarray进行深复制，但仅仅针对作为右值时而言。作为左值时对其进行赋值都将直接影响原ndarray，而不会有新的ndarray产生（无论是视图或副本）</strong></p>
<p><strong>使用高级索引时总是返回副本，即对原ndarray进行深复制，但仅仅针对作为右值时而言。作为左值时对其进行赋值都将直接影响原ndarray，而不会有新的ndarray产生（无论是视图或副本）</strong></p>
<p><strong>使用高级索引时总是返回副本，即对原ndarray进行深复制，但仅仅针对作为右值时而言。作为左值时对其进行赋值都将直接影响原ndarray，而不会有新的ndarray产生（无论是视图或副本）</strong></p>
<p>具体关于高级索引的用法，见下文高级索引技巧小节。</p>
<p>此外，使用<code>copy</code>函数可以对ndarray进行深复制；ndarray作为左值时，会从作为右值的ndarray复制底层数据；使用<code>array</code>函数构造ndarray时，也会对输入序列的数据进行复制。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#22522;&#20110;&#39640;&#32423;&#32034;&#24341;&#20135;&#29983;&#30340;&#21103;&#26412;">&#22522;&#20110;&#39640;&#32423;&#32034;&#24341;&#20135;&#29983;&#30340;&#21103;&#26412;<a class="anchor-link" href="#&#22522;&#20110;&#39640;&#32423;&#32034;&#24341;&#20135;&#29983;&#30340;&#21103;&#26412;">&#182;</a></h3><p>关于具体的高级索引方法，参考后文。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[63]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="n">s</span>

<span class="n">s</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span>  <span class="c1"># s拥有自己的底层数据</span>
<span class="n">s</span><span class="o">.</span><span class="n">base</span> <span class="ow">is</span> <span class="p">(</span><span class="n">arr</span> <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span> <span class="k">else</span> <span class="n">arr</span><span class="o">.</span><span class="n">base</span><span class="p">)</span>  <span class="c1"># s为独立ndarray</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[63]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[1., 1., 1., 1.],
       [1., 1., 1., 1.],
       [1., 1., 1., 1.]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[63]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[63]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#22522;&#20110;-copy&#20989;&#25968;&#20135;&#29983;&#30340;&#21103;&#26412;">&#22522;&#20110; <code>copy</code>&#20989;&#25968;&#20135;&#29983;&#30340;&#21103;&#26412;<a class="anchor-link" href="#&#22522;&#20110;-copy&#20989;&#25968;&#20135;&#29983;&#30340;&#21103;&#26412;">&#182;</a></h3><p><strong>numpy.copy</strong></p>
<p>Return an array copy of the given object.</p>
<p>返回ndarray的副本</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="s1">&#39;K&#39;</span><span class="p">)</span>
</pre></div>
<p><strong>ndarray.copy</strong></p>
<p>Return a copy of the array.</p>
<p>返回副本</p>
<div class="highlight"><pre><span></span><span class="n">ndarray</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">order</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[64]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="n">s</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span>  <span class="c1"># s拥有自己的底层数据</span>
<span class="n">s</span><span class="o">.</span><span class="n">base</span> <span class="ow">is</span> <span class="p">(</span><span class="n">arr</span> <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span> <span class="k">else</span> <span class="n">arr</span><span class="o">.</span><span class="n">base</span><span class="p">)</span>  <span class="c1"># s为独立ndarray</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[64]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[64]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[65]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">9999</span>  <span class="c1"># 对s进行更改不影响arr</span>
<span class="n">arr</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[65]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[1., 1., 1., 1.],
       [1., 1., 1., 1.],
       [1., 1., 1., 1.]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#20316;&#20026;&#21491;&#20540;&#23545;&#20854;&#20182;ndarray&#36827;&#34892;&#36171;&#20540;&#26102;&#65292;&#20026;&#28145;&#22797;&#21046;">&#20316;&#20026;&#21491;&#20540;&#23545;&#20854;&#20182;ndarray&#36827;&#34892;&#36171;&#20540;&#26102;&#65292;&#20026;&#28145;&#22797;&#21046;<a class="anchor-link" href="#&#20316;&#20026;&#21491;&#20540;&#23545;&#20854;&#20182;ndarray&#36827;&#34892;&#36171;&#20540;&#26102;&#65292;&#20026;&#28145;&#22797;&#21046;">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[66]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">s</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[66]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[67]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span><span class="p">[:</span><span class="mi">2</span><span class="p">,</span> <span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span><span class="p">[:</span><span class="mi">2</span><span class="p">,</span> <span class="p">:</span><span class="mi">2</span><span class="p">]</span>
<span class="n">arr</span>
<span class="n">arr</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span>  <span class="c1"># 深复制</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[67]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[0., 0., 1., 1.],
       [0., 0., 1., 1.],
       [1., 1., 1., 1.]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[67]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#22522;&#20110;array&#20989;&#25968;&#30340;ndarray&#26500;&#36896;&#65292;&#20026;&#28145;&#22797;&#21046;">&#22522;&#20110;<code>array</code>&#20989;&#25968;&#30340;ndarray&#26500;&#36896;&#65292;&#20026;&#28145;&#22797;&#21046;<a class="anchor-link" href="#&#22522;&#20110;array&#20989;&#25968;&#30340;ndarray&#26500;&#36896;&#65292;&#20026;&#28145;&#22797;&#21046;">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[68]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span>  <span class="c1"># s拥有独立数据</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[68]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[69]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">999</span>  <span class="c1"># 不影响arr</span>

<span class="n">arr</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[69]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[1., 1., 1., 1.],
       [1., 1., 1., 1.],
       [1., 1., 1., 1.]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#20989;&#25968;&#19982;&#26041;&#27861;&#27010;&#35272;">&#20989;&#25968;&#19982;&#26041;&#27861;&#27010;&#35272;<a class="anchor-link" href="#&#20989;&#25968;&#19982;&#26041;&#27861;&#27010;&#35272;">&#182;</a></h2><ul>
<li><p>Array Creation</p>

<pre><code>  arange, array, copy, empty, empty_like, eye, fromfile, fromfunction, identity, linspace, logspace, mgrid, ogrid, ones, ones_like, r, zeros, zeros_like</code></pre>
</li>
<li><p>Conversions</p>

<pre><code>  ndarray.astype, atleast_1d, atleast_2d, atleast_3d, mat</code></pre>
</li>
<li><p>Manipulations</p>

<pre><code>  array_split, column_stack, concatenate, diagonal, dsplit, dstack, hsplit,
  hstack, ndarray.item, newaxis, ravel, repeat, reshape, resize, squeeze, swapaxes, take, transpose, vsplit, vstack</code></pre>
</li>
<li><p>Questions</p>

<pre><code>  all, any, nonzero, where</code></pre>
</li>
<li><p>Ordering</p>

<pre><code>  argmax, argmin, argsort, max, min, ptp, searchsorted, sort</code></pre>
</li>
<li><p>Operations</p>

<pre><code>  choose, compress, cumprod, cumsum, inner, ndarray.fill, imag, prod, put, putmask, real, sum</code></pre>
</li>
<li><p>Basic Statistics</p>

<pre><code>  cov, mean, std, var</code></pre>
</li>
<li><p>Basic Linear Algebra</p>

<pre><code>  cross, dot, outer, linalg.svd, vdot</code></pre>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="&#36827;&#38454;&#20869;&#23481;">&#36827;&#38454;&#20869;&#23481;<a class="anchor-link" href="#&#36827;&#38454;&#20869;&#23481;">&#182;</a></h1><h2 id="&#24191;&#25773;&#35268;&#21017;">&#24191;&#25773;&#35268;&#21017;<a class="anchor-link" href="#&#24191;&#25773;&#35268;&#21017;">&#182;</a></h2><p>Broadcasting allows universal functions to deal in a meaningful way with inputs that do not have exactly the same shape.</p>
<p>用有意义的方式处理 shape 不统一的情况。</p>
<p>The <strong>first rule</strong> of broadcasting is that if all input arrays do not have the same number of dimensions, a “1” will be repeatedly prepended to the shapes of the smaller arrays until all the arrays have the same number of dimensions.</p>
<p>The <strong>second rule</strong> of broadcasting ensures that arrays with a size of 1 along a particular dimension act as if they had the size of the array with the largest shape along that dimension. The value of the array element is assumed to be the same along that dimension for the “broadcast” array.</p>
<p>After application of the broadcasting rules, the sizes of all arrays must match. More details can be found in <a href="https://docs.scipy.org/doc/numpy/user/basics.broadcasting.html">Broadcasting</a>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="&#39640;&#32423;&#32034;&#24341;&#21450;&#32034;&#24341;&#25216;&#24039;">&#39640;&#32423;&#32034;&#24341;&#21450;&#32034;&#24341;&#25216;&#24039;<a class="anchor-link" href="#&#39640;&#32423;&#32034;&#24341;&#21450;&#32034;&#24341;&#25216;&#24039;">&#182;</a></h1><p><strong>高级索引（advanced indexing, fancy indexing）</strong>，这是一个与普通索引(indexing)相区别的概念。所谓高级索引，区别于上面的普通索引或切片概念，即对ndarray进行索引时，只要某一维度上的索引值出现了诸如<code>[1,2,4]</code>或<code>[True, True, False]</code>之类的通过明确序列给定的索引（而不是<code>1:5:2</code>这类复合<code>start:stop:step</code>范式的索引）时，那么就算作高级索引。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#20351;&#29992;&#25968;&#23383;&#24207;&#21015;&#36827;&#34892;&#32034;&#24341;">&#20351;&#29992;&#25968;&#23383;&#24207;&#21015;&#36827;&#34892;&#32034;&#24341;<a class="anchor-link" href="#&#20351;&#29992;&#25968;&#23383;&#24207;&#21015;&#36827;&#34892;&#32034;&#24341;">&#182;</a></h2><p>将坐标分为两类：</p>
<ul>
<li>直觉坐标，每个元素都由(x,y,z,...)构成，即一个完整的“坐标”</li>
<li>反直觉“坐标”，是一个列表，列表的每一部分对应一个维度上的所有坐标值，例如列表第一部分就是所有“坐标”中 x 值的集合)</li>
</ul>
<p>假设数据点为3维，共有n个数据。</p>
<p>则直觉坐标类似于：
$$\left[ \left( x_1,y_1,z_1 \right) ,\left( x_2,y_2,z_2 \right) ,\cdots ,\left( x_n,y_n,z_n \right) \right] $$
反直觉“坐标”类似于，
$$\left[ \left( x_1,x_2,\cdots ,x_n \right) ,\left( y_1,y_2,\cdots ,y_n \right) ,\left( z_1,z_2,\cdots ,z_n \right) \right] $$</p>
<p>本节的索引方法对应反直觉“坐标”，作为参数的每一部分都对应<strong>某个维度上的“坐标值”</strong>，而并非一个完整的“坐标”。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>无论目标ndarray本身为多少维，关键区别在于作为索引的序列。<strong>对ndarray进行索引时，主要区别就是作为索引的是一个序列，还是多个序列</strong> 单个列表、多个列表、单个ndarray、多个ndarray都可以作为索引，<strong>而单个列表如果是嵌套结构，其最外层会被剥离，但单个ndarray尽管不止一维度，仍然被视作整体。</strong></p>
<div class="highlight"><pre><span></span><span class="n">arr</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]])]</span> <span class="c1"># 单一序列 对arr第一维度进行索引</span>
<span class="n">arr</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])]</span>  <span class="c1"># 两个序列 对arr第一以及第二维度进行索引</span>
</pre></div>
<p>这些序列从前往后对应目标ndarray的第一维度、第二维度……等等维度上的“坐标”，以此类推。</p>
<p>多个序列进行索引时，</p>
<p><strong>这些ndarray的形状需要一样</strong></p>
<p><strong>这些ndarray的形状需要一样</strong></p>
<p><strong>这些ndarray的形状需要一样</strong></p>
<p><strong>索引后得到的ndarray，其前几维形状首先与作为索引的序列形状一样，之后会依据索引得到的形状在后面进行增补，例如对形状为（2,3,4）的ndarray，使用2个形状为（3,3）的ndarray进行索引，则得到的ndarray形状为（3,3,4）</strong> (首先基于（3,3）的基础形状，目标ndarray在对前两维进行索引后得到的结果为（4，）故最终结果增补为（3,3,4））</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#21333;&#20010;&#24207;&#21015;&#20316;&#20026;&#32034;&#24341;">&#21333;&#20010;&#24207;&#21015;&#20316;&#20026;&#32034;&#24341;<a class="anchor-link" href="#&#21333;&#20010;&#24207;&#21015;&#20316;&#20026;&#32034;&#24341;">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[70]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
<span class="n">i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>  <span class="c1"># 对第一维度进行索引</span>

<span class="n">j</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">]])</span>
<span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>  <span class="c1"># 仍然对第一维度进行索引</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[70]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([ 1,  1,  9, 64, 25], dtype=int32)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[70]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 9, 16],
       [81, 49]], dtype=int32)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[71]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">palette</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>                <span class="c1"># black</span>
                    <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>              <span class="c1"># red</span>
                    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>              <span class="c1"># green</span>
                    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">],</span>              <span class="c1"># blue</span>
                    <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">]])</span>       <span class="c1"># white</span>

<span class="n">image</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>           <span class="c1"># each value corresponds to a color in the palette</span>
                  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="n">palette</span><span class="p">[</span><span class="n">image</span><span class="p">]</span>  <span class="c1"># 单个序列索引</span>
<span class="n">palette</span><span class="p">[</span><span class="n">image</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>  <span class="c1"># （2,4）-&gt;(2,4,3)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[71]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[  0,   0,   0],
        [255,   0,   0],
        [  0, 255,   0],
        [  0,   0,   0]],

       [[  0,   0,   0],
        [  0,   0, 255],
        [255, 255, 255],
        [  0,   0,   0]]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[71]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(2, 4, 3)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#22810;&#20010;&#24207;&#21015;&#20316;&#20026;&#32034;&#24341;">&#22810;&#20010;&#24207;&#21015;&#20316;&#20026;&#32034;&#24341;<a class="anchor-link" href="#&#22810;&#20010;&#24207;&#21015;&#20316;&#20026;&#32034;&#24341;">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[72]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">j</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]])</span>

<span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>  <span class="c1"># 对第一维度索引</span>
<span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>

<span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span>  <span class="c1"># 对前2个维度索引</span>
<span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[72]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[ 4,  5,  6,  7],
        [ 4,  5,  6,  7]],

       [[ 4,  5,  6,  7],
        [ 8,  9, 10, 11]]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[72]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(2, 2, 4)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[72]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 5,  5],
       [ 5, 10]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[72]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(2, 2)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[73]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">arr</span>

<span class="n">i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
              <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]])</span>
<span class="n">j</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
              <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span>

<span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span>                                   <span class="c1"># 双重序列选择</span>
<span class="n">arr</span><span class="p">[[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]]</span>                                <span class="c1"># 最外层列表被剥离，结果同上</span>
<span class="n">arr</span><span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[73]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[73]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 2,  5],
       [ 7, 11]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stderr output_text">
<pre>c:\users\twang\appdata\local\conda\conda\envs\py36\lib\site-packages\ipykernel_launcher.py:10: FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.
  # Remove the CWD from sys.path while we load stuff.
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[73]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 2,  5],
       [ 7, 11]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[73]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 2,  5],
       [ 7, 11]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[74]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">arr</span><span class="p">[:,</span> <span class="n">j</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[74]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 2,  6],
       [ 6, 10]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[74]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[ 2,  1],
        [ 3,  3]],

       [[ 6,  5],
        [ 7,  7]],

       [[10,  9],
        [11, 11]]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[75]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">])</span>
<span class="n">arr</span><span class="p">[</span><span class="n">s</span><span class="p">]</span>
<span class="n">arr</span><span class="p">[</span><span class="n">s</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>

<span class="n">arr</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">s</span><span class="p">)]</span>     <span class="c1"># 等价于 a[i,j]，tuple(s) 将ndarray的最外层转换为tuple形式，所以被NumPy忽略</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[75]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[[ 0,  1,  2,  3,  4],
         [ 5,  6,  7,  8,  9]],

        [[ 5,  6,  7,  8,  9],
         [10, 11, 12, 13, 14]]],


       [[[10, 11, 12, 13, 14],
         [ 5,  6,  7,  8,  9]],

        [[15, 16, 17, 18, 19],
         [15, 16, 17, 18, 19]]]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[75]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(2, 2, 2, 5)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[75]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 2,  6],
       [ 8, 13]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>将 i,j组合为 ndarray则不进行剥离，从而相当于对第一维进行索引</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[76]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

<span class="n">arr</span><span class="p">[[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]]</span>  <span class="c1"># 整数list会被剥离</span>
<span class="n">arr</span><span class="p">[[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]],</span> <span class="p">]</span>
<span class="n">arr</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stderr output_text">
<pre>c:\users\twang\appdata\local\conda\conda\envs\py36\lib\site-packages\ipykernel_launcher.py:3: FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.
  This is separate from the ipykernel package so we can avoid doing imports until
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[76]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([ 8, 14])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[76]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[ 5,  6,  7,  8,  9],
        [10, 11, 12, 13, 14]],

       [[15, 16, 17, 18, 19],
        [20, 21, 22, 23, 24]]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[76]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([ 8, 14])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong><code>a[i,j]</code> 与 <code>a[[i, j]]</code> 结果相同，此时<code>i,j</code>均为ndarray，可以理解为此时 NumPy 自动对最外层的<code>[]</code>嵌套进行剥离，无论是[list of ndarray]还是[list of integer list]，最外层都会被剥离，可以理解为NumPy期望在更多的维度上进行索引，而不是将序列视为整体只在某一个维度上进行索引</strong></p>
<p>关于对最外层列表的剥离，有一个特殊情况，即类似出现<code>arr[[1,2,3]]</code>的情况时，详见补充内容，索引与高级索引的区别。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>一个利用 multi-index 进行数据选择的例子</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[77]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">145</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>                 <span class="c1"># time scale</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>      <span class="c1"># 4 time-dependent series</span>
<span class="n">time</span>

<span class="n">data</span>

<span class="c1"># index of the maxima for each series</span>
<span class="n">ind</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">ind</span>

<span class="n">time_max</span> <span class="o">=</span> <span class="n">time</span><span class="p">[</span><span class="n">ind</span><span class="p">]</span>                       <span class="c1"># times corresponding to the maxima</span>

<span class="c1"># =&gt; data[ind[0],0], data[ind[1],1]...</span>
<span class="n">data_max</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">ind</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span>

<span class="n">time_max</span>

<span class="n">data_max</span>

<span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">data_max</span> <span class="o">==</span> <span class="n">data</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[77]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([ 20.  ,  51.25,  82.5 , 113.75, 145.  ])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[77]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0.        ,  0.84147098,  0.90929743,  0.14112001],
       [-0.7568025 , -0.95892427, -0.2794155 ,  0.6569866 ],
       [ 0.98935825,  0.41211849, -0.54402111, -0.99999021],
       [-0.53657292,  0.42016704,  0.99060736,  0.65028784],
       [-0.28790332, -0.96139749, -0.75098725,  0.14987721]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[77]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([2, 0, 3, 1], dtype=int64)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[77]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([ 82.5 ,  20.  , 113.75,  51.25])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[77]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([0.98935825, 0.84147098, 0.99060736, 0.6569866 ])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[77]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>可以把 array indexed 数组作为赋值对象，但是如果 index 重复出现则以最后一次为准，<strong>最好别这么用</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[78]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">a</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">a</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[78]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([2, 1, 3, 3, 4])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>array 在 python 中的 += 方法可能会出现意想不到的结果</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[79]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">a</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="n">a</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[79]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([1, 1, 3, 3, 4])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>虽然 index 0 出现了两次，但是只会增加一次，因为 a+=1 等同于 a = a + 1.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#20351;&#29992;&#24067;&#23572;&#24207;&#21015;&#36827;&#34892;&#32034;&#24341;">&#20351;&#29992;&#24067;&#23572;&#24207;&#21015;&#36827;&#34892;&#32034;&#24341;<a class="anchor-link" href="#&#20351;&#29992;&#24067;&#23572;&#24207;&#21015;&#36827;&#34892;&#32034;&#24341;">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>有两种典型的应用场景：</p>
<h3 id="&#29992;&#19968;&#20010;&#21644;&#30446;&#26631;ndarray&#21516;&#26679;&#24418;&#29366;&#30340;&#24067;&#23572;&#24207;&#21015;&#36827;&#34892;&#32034;&#24341;">&#29992;&#19968;&#20010;&#21644;&#30446;&#26631;ndarray&#21516;&#26679;&#24418;&#29366;&#30340;&#24067;&#23572;&#24207;&#21015;&#36827;&#34892;&#32034;&#24341;<a class="anchor-link" href="#&#29992;&#19968;&#20010;&#21644;&#30446;&#26631;ndarray&#21516;&#26679;&#24418;&#29366;&#30340;&#24067;&#23572;&#24207;&#21015;&#36827;&#34892;&#32034;&#24341;">&#182;</a></h3><p><strong>这种 indexing 方法返回的是一个 1-D array，相当于过滤器，但返回的是类似视图的ndarray，对其赋值将影响原ndarray</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[80]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">arr</span> <span class="o">&gt;</span> <span class="mi">4</span>
<span class="n">mask</span>

<span class="n">arr</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[80]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[False, False, False, False],
       [False,  True,  True,  True],
       [ True,  True,  True,  True]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[80]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([ 5,  6,  7,  8,  9, 10, 11])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[81]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">arr</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[81]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[0, 1, 2, 3],
       [4, 0, 0, 0],
       [0, 0, 0, 0]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>一个产生 mandelbrot set 的例子</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[82]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">mandelbrot</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">maxit</span><span class="o">=</span><span class="mi">20</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns an image of the Mandelbrot fractal of size (h,w).&quot;&quot;&quot;</span>
    <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ogrid</span><span class="p">[</span><span class="o">-</span><span class="mf">1.4</span><span class="p">:</span><span class="mf">1.4</span><span class="p">:</span><span class="n">h</span><span class="o">*</span><span class="mi">1</span><span class="n">j</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="mf">0.8</span><span class="p">:</span><span class="n">w</span><span class="o">*</span><span class="mi">1</span><span class="n">j</span><span class="p">]</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="o">*</span><span class="mi">1</span><span class="n">j</span>
    <span class="n">z</span> <span class="o">=</span> <span class="n">c</span>
    <span class="n">divtime</span> <span class="o">=</span> <span class="n">maxit</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">maxit</span><span class="p">):</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">z</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">c</span>
        <span class="n">diverge</span> <span class="o">=</span> <span class="n">z</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">conj</span><span class="p">(</span><span class="n">z</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="o">**</span><span class="mi">2</span>            <span class="c1"># who is diverging</span>
        <span class="n">div_now</span> <span class="o">=</span> <span class="n">diverge</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">divtime</span> <span class="o">==</span> <span class="n">maxit</span><span class="p">)</span>  <span class="c1"># who is diverging now</span>
        <span class="n">divtime</span><span class="p">[</span><span class="n">div_now</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>                  <span class="c1"># note when</span>
        <span class="n">z</span><span class="p">[</span><span class="n">diverge</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>                        <span class="c1"># avoid diverging too much</span>

    <span class="k">return</span> <span class="n">divtime</span>


<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">mandelbrot</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">400</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[82]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&lt;matplotlib.image.AxesImage at 0x209d0b5c4e0&gt;</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>




<div class="output_png output_subarea ">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQsAAAD8CAYAAABgtYFHAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAADl0RVh0U29mdHdhcmUAbWF0cGxvdGxpYiB2ZXJzaW9uIDIuMi4zLCBodHRwOi8vbWF0cGxvdGxpYi5vcmcvIxREBQAAIABJREFUeJztvX90W+WZ7/t5ZUmJIzmOA7EdQ10S4wCBAA0uP0rSekrbQCad0jOHmrbrlmTlhgboXZzTOXcKc7Nup2tlTpk5c9rLrLZAct2E3sUtpj9up5NJSymD24S2QAgkgaTEcUJd4tjmh+NYioOl6L1/7B/ekvVjS9qS9pbez1patra2pHdL2t/9PM/7vM8jpJQoFApFLnyVHoBCofAGSiwUCoUtlFgoFApbKLFQKBS2UGKhUChsocRCoVDYomRiIYS4VQjxhhDimBDigVK9j0KhKA+iFHkWQog64CjwSeAt4CXg81LKw46/mUKhKAulsiyuB45JKY9LKaeBJ4HPlOi9FApFGfCX6HUvAv5suf8WcEOmnYNijpxLqERDUSgUAJOMvyOlXFTo80slFiLNtiR/RwhxN3A3wFzmcYO4pURDUSgUAL+WP/5TMc8vlRvyFvABy/2LgWHrDlLKbVLKLillV4A5JRqGQqFwilKJxUtApxBiiRAiCNwJ/LxE76VQKMpASdwQKWVcCPEV4GmgDvi+lPL1UryXQqEoD6WKWSCl3A3sLtXrKxSK8qIyOBWOU9fURF1TU6WHoXCYklkWCu/i1Ile7OucHx93ZBwKZ1BiUaN44cqfbYxKSMqPEosqxwuiUAiZjkuJSOlQYlFlVKs42CX1+JV4OIcSCw9T68JgByUezqFmQzyKEorCUJ9b4SjLwkOoH7ozKGujMJRYuBglDuXB+jkr4ciMEgsXokSicijhyIwSC5egBMJ9GN+JEg0NJRYVRolEdkRTY0HPk+MTjo1BWRsaSiwqiBKK2RQqDtlex2nhqFXBUGJRZpRAJOOUOOTzHsWKR626J0osyoQSiRkKFYjzTfbqtNaNR/N6/0LFo9bcEyUWJUaJRPHWgyES0fYwAMGJuPlYYOJcxv1ziUbq+IqxOGrB2lBiUSKUSDgnEgCxxrmML6sj2hGjeU+QYCQBQOSi+TQdPpP1+fmKBhRnbVSrYCixcBglEs7EIVKFAqDp6HlCw37eu22KOQfmEQtL5p0SRNvDBCfiaa0M62vZFQ0oztqoVvekqLUhQog3hRCHhBCvCiH26dsWCiGeEUIM6H9r5uypdaEQTY2OC0UqwUiCOQfm8Z27H+WxLzxGcHKmw4QhKk5SjgCsVyiqfaEQ4k2gS0r5jmXbPwHvSSkf0nucNkkpv5btdeaLhdLrfUNqWSicPKHSCYUhAtONmiE8HfZxepn22IKjmC5JrlgG5GddWCl2BsUNFsav5Y9fllJ2Ffr8Uqw6/QzwuP7/48DtJXgP11Dr9SZLLRRWrGIAEA9LphsE0+HZP+NY49ykm933yESxVlM1/E6KjVlI4FdCCAk8JqXcBrRIKU8BSClPCSGaix2kG/H6F18MpTDNCzmJfS3nOMNc/BHBgqM+wD9LUAwMwQhMnON8U6hgC6PYmRMvz5oUa1ncLKVcCdwG3CeE+KjdJwoh7hZC7BNC7IvxfpHDKC9KKJwlH6EwxCAQEWy/4QcM9jwKQLRNszCmG/0Zb8fv9JmiUaiFYVDs5+DF31BRloWUclj/OyaE+P/QuqePCiEW61bFYmAsw3O3AdtAi1kUM45y4cUv2CkqFehLDVoacYvgze+y6YUv0RCeItExpV9u5sGwdv0z4hjm88I+/OH3mW6cA8wt2sIA7TMpNjfDSxZGwZaFECIkhGgw/gc+BbyG1qbwLn23u4B/LXaQbkAJRWko5AofjCSIHliIb7Ce8ZH5rFo6SEN4Kmmf6bAv6RZtE/gG6834hrIw8qcYN6QF2CuEOAC8CPy7lPKXwEPAJ4UQA8An9fuexktfqJM4NRWaiXxPVOtsyLxTgnmnBMFRP3uPd7C2/TDfuftRLeCp3z75N3uJtglOL4P3rzlLPCx54R8fcfw4akUwCnZDpJTHgWvSbH8X8PY8qI5XvsRSUGq3o9grenBSmwkJRATRSIBPNLzO42/fzNnFkkBEEAtLdg8t5zt3P0p3fYI1R9Yxtred1fd9mSBa3CPW6Iw7As64JODuwKcq2JsBJRSlw65QWOMVhlWRSmASfNE6Njy7kVWNAyQ6poh2xHhjo2ZBbHh2Ix19mzn5q/akBK5Cx5QNJz43N//uVLp3Gtz8hZUSL2YrxhrAHxEQ8fPQK7cy0L2TLWMr6Oxfj2+wnlBEEJjULJHUoCfMWBeAKywMcK+VoSwLC9WQOFMIpY5NWHHSqkglHgkA0Hf4OhKjcwlERMnGlw2nPku3/RaVWCjKRiEnYqpQpMvWNFjWcQpg1sxIrtdMxU2C4SaUWOi4TcXLgRstCsi8IMwqFNMNglgDxMJSS/tuibO980kAfnZtr/Y64cwxCq8IhpusXSUW1K5QlItChcJ6QqcTiqnWBG9sfITGjnGaWs/wTPRSADYN3EkidJ54WBLtiKV9jUzvWei4M1FNLknNBzjd8CWUGy8JxXTYx3RDcuzBEAoj1Xt/Vx/9Uz6667UA5tNX7GJDaDU72vfQ2b+eWEOA4CTm6xmBzunGzGtJUsdfyUxPg0pnfNasZeEm865clNPtAOeE4i/v3sPZxVJzOxpm3IvO/vVsGFoNYAqFwY72PQAMdO8E9LUjuugYWZ2lOpZ0VIOFUZNiUWsiAeUPuBUjFGaatu5u9B2+jse+8BhTrQmmWhPEw5JE6DwN4SlTFNKxcl8PS3ZtMsUl1qC5MEZWZ2RxnSlMdgrnnG8KOeKaFEulfr8174bUAl4RCgNDJEBzNxrDUywNnCEROm/uY8x8WN2PdPjDMeLROvP+VKsmHL6Wc8Qi8+CU7aGaFJqP4ZQ7ApVxSWpOLGrNqnCrUKQVCd2quPZLh/hG2y8AaPeHGYpHOB6bT1PrGSYj9SxteYenr9iV8z2uaR5mVecAD71yK3G09/voTa+zqnGA7w58DDk5L48jS8aJBK5iKbdgFFVWzynKVVZPCUXpKEYkIDlOEW0TTLUmSITO4w/HzLiDYUXksiZS2TC0mr3HO2gIT7G/q4/O/vUkRucyf8BnZnaadTIylOPLRiGi4WSXNLuC4cayeq6kloTCjYHM1PJ2VlJzHgKTaCfyqJ/E6FyG4hFgJoiZj1AAfKPtFwx072Rt+2EAHvjQLxnseZS/vHsm3mGNXeRb+LfSsYxy/bar3rKoJZEA97kduU68dLkUxqyFMfNxyUf+bMvtsEPvRCtb93wagOCoP2PBXyi9leGkdQG5LQxlWShMym1NZBKKdIVy05Epi9K6OjQelrwdDdE/5cxP9ZOhYwRH/YQGA8w7lZy/kTqeQloL5GNhOP19lfrCWNViUWtWRbnIdkLYPcHsLg5r7BhnUSjK0kD6rmP5csverzjyOtlww/RqKaja2ZBaEgo3xCfyuQrnEgrTDQlLdl/bS7s/DIRtv34meidaaQhPMRHWK31PziRpZcrqtFYFzwcnMj8LoZQzJFVtWdQC5VwIlqkBkBNCkS6j8o2Nj7DtvZvsDzIHGxtH2N/Vx0dvep14novM7LpWqeSyMkrx/ZXqQlmVYlErVkU5hMIJkbCW40/7eMoiMdCCm5f13sMTL95opnQ7Qe9EKzva92gFczKMwRhzJlIbGOX6HKpFMHKKhRDi+0KIMSHEa5ZtafuZCo1/EUIcE0IcFEKsdHzEOagFoSjH1GixIpFLIMz9MgiFgS9alzWlOx/6p3w89MqtXNZ7j1ans4GkRWr5CEYquQSkEnEMp88FO5bFTuDWlG0PAM9KKTuBZ/X7oDUb6tRvdwPOl1LOQq0IRSnJNcsByUJgvUUuCpq3XFgXcxnVuCFZKJzGmp9hrXWRKhhJY7MheJlIFY5sguGFYjk5xUJK+VvgvZTNmfqZfgb4gdT4A7BAbzRUcpRQFI4hELmmQg1BSO3JMR32EVlcxwv/+Ainl2H2H816s5TsN9/HIhTWk7mzfz29E61FH+fKfT1m6b3U97SOx7xZrR6bomEVzvcun8PQ/3qe6UZ/kmBk+pzd7o4UGrNI6mcKGP1MLwL+bNnvLX3bLLzcvrASlFIo7GKuBL3jveSrsWXh1x2f3ssrW76X/XWMKlcpNwNDKIzVpaAFJ4tlMlJvvq71fdJxpjNhtkRMGnsWwUj3WEN4ymyrWEjehptwOsCZrkJq2m9ESrlNStklpewKMKeoN612q6JU/UXtZF9aXY9om1ZbYjJSb55MC9b/mTOd2tJxgCVz3uay3nvM+hHpbmc6E7x2//eIdsS4/fN7CN78LrGwJBaW5hJ0q1A0hKdYc2RdUdbFhqHVNISn8Ie1ylnGe7x/zdnkWhn6zddyjts/v2emh2oa1yT1ZmAVmInBJsZWx213QnOzdVFonkWmfqZvAR+w7HcxMFzMAGsZp384xRajCQ1LfvjczXz0ptfZ0b2H/ikfg9PNPAVmOvZ3Bz6W+TVT4hEn1m0HYGvzIZaMbAJgy+p/M62Ilft6uK/zN+yd6OSiuacBGIpH9LwL+/RP+bTnN8NwqJEPL/8Tu4eWMxmpZ6B7J0OrIvzFT/4b/ohguiXOiXXb2TK2gq3Nh3jpUx/k5K/aCQ1r1zzjpE/XVsD6uGE9NXaMMz4yP9ndcrC5kV3qmppmBxPyxNbaECHEJcAuKeVV+v3/AbwrpXxICPEAsFBK+bdCiL8EvgKsBW4A/kVKeX2u1y9mbUi1WhVOCkW+kfhMzYhTV4QaJ7vByn09TEbqSYxqz/dHxKxy/NZyeAZD8Qi3v7qRRaGoY2tA7NA70Zrk3izZtYmm1jOzxtHRt5n5A7pIZGlUZGAIRbQjxol121m5r4fAjxamXd2aSSycXjcC8PR720u7NkQI8UPg98BlQoi3hBAbydzPdDdwHDgGbAfuLXRgdlBCkZlcQctM5ONXW9dr9E/5uK/zN6xaOsilV79F719t4yOffI2p1oTpYsR012LNkXVJr9PuD7O/q48HL9md11iLxSoUW8ZWsKzjFPu7+mYJ1mDPo9kDoSk3a+m/LWMr2N/Vpz1Xj11Y8VJquKdXnVabWBQrEsX+8DIVpDH/D/t4Z6XU3JD2PWYMITX4aK03MRSP8LFf/ld8erUqX8s528Vr3ED/lI8Nz24kOOqfZSUZlsOSXZs4sW77TP6GHg8BTWg6+jZTP+IjMAmnr43RvMdP+OR0Ugp5qoXhScvCrVSbUBRLua5Ql179lpkktXeikxPvL5q1jzWfYdPAnfjDMRKh86ZQtIWcPxFKRabcDMAUQMMde2PjI0n7GAHaROg8U60Jzi62f2F2Y95F1S4k8xKF/jCcEoh8XI+Tv2qn4+BmQLMSVi0dzLr/01fsYg3reDscMs1xL7FlbAVNrWfYv06rsBUbrDcfM1yqBy/ZbXZqT3RM0RCeYjJST6PeGe2L1/+BTzS8zldfvwMOLKzUoRSNJ92QarIqChEKJ62IbEKRqTCN4ZNPt8RZ1nEqp0vRO9HKifcXsbX5kDODriBLdmmzNka5v9TZGSNomlr6b8muTYQGA4SGZ8r4pa5kTRfsdNIdKdYN8ZxlUS1Cka9IlMLNKDZJyB+O2Yo9aDGN4pOq3IC1aDAwaxrXiN8YQrFhaDUHxtrMmEY23FAEOBuejVl4lXwWgRU6o2GHQsrdpbL9hh84OiYvsL+rj1VLB20HaHe072FisImOvs0kOqYy5md4AU+JhdetinxFolQUalGkthHc8OxGJ4bjOeyugt0ytoIluzZRP+Jj/oCPhb/Q4h25WiZacVOg01Ni4WXsfOmVrhKdjmxt/nzROlbu6ynjaLzFS+9+EMi+BsVLeEYsvGpV2HE7yiUS+dSigMy1Jqw//slIPRuGVpvl+hUzPHjJbk6s284bGx+Z1Z8E0lt46X4HbrEuPBfg9Ap2LYlykW8h3VShMDIYU/MIjOlBxWyMIOdVD99LKP16Sk+hxMJh7FgR5aYQobBaEsGb3+W1rj6W7NqUlIl5Qu8UplF8Qd1qwlgn4xusZ97kzPbUgsB2cbJPaqF4Qiy84IJUg0jAzGKx9685S2J0Ln936894alibmm9qPcP4yHz84RgNyqLIyMp9PUwMNqVdSOdlPCEWbqUQV8N6AhfS8coOxVbbjnbEONG900ws2ti4i6F4hG9d+SO6uxKOFtCtNtYcWcf4yHyCWUTCal0Yy9W9gOsDnG61KvIVinTBxULLy2ejGKEw3I/QYICV+3qSMhDb/WHz/l2LnmdV44AzA64yPnzBn/CHY1lbDRRKpQOdyrLIk3xEwqhbCbnn1tOd5HavOPmKTTprInWKNNs6ju76BN311ZGR6TRbmw9pxXx2bWI6BPFwHYFJPVU+SzMjK27N5FRikYN81DzVkohcFDQDhUH9h5JPcMtJiyNr7cg0uRQdfZtnFalR2KN/ymeuRF25r4fpkQsI6kHOdILhFVfE1W5IpVwQIzeiGKEArfRarEGrYTC2Ok5kcZ2tMvnFkq0+5Kx9MyRd+SOCJbs20dm/vkSjrF6s7ptZ+CZDu4FC2wxUAteOtNxC4dQy8VRrQKvdGCDaEaP5r4cY+0k7kYuCrlgjkC070yC1dL4iPzr71+MLS7Ra1slBT6MQTjCPGdFKTqG62rIoJVbrodBl4nanQ0PDEl+0jrejM/vbOVGtGFei4Y8KIovrkqpNF0K651qTr+JhiT8cwx+OqdmPImgITzHdEue1+7+XVEX87GLt833vtinPtAkotH3h3wshTgohXtVvay2PPai3L3xDCLGmVAMvhkqUr/voTa+zKJQctLJ7sltrSXz+L55PqpJdjGBkwiiqu7TlHZa2vONY+8BaZFEoarYfMCppGbVABrp38sCHflnhEdrHjhuyE/gOkLoe+dtSyn+2bhBCLAfuBK4E2oBfCyGWSSnPOzDWonBq2imbUGS6OkTbBP0HLwcg1AAgzCrR2UrLpwpBrAGeePFGTtz/PT609V5br5HrNc3tulVhrb5d7gK61cjn2vax8YqZmaNEh5bM1r10kM7+9YT3ziNMxU8PW+QUCynlb/VWAHb4DPCklPJ94IQQ4hhwPVp1cNs4Fa+oZDl9g9PLIHTNu9zefpgnXrwRMPpnpCbtZLYQjBP5ok8N0Raa0ArAWl4jl2jksj7M1O6w5Lm//meM1G1roE5RGKnFjAe6d5rVtFaOtTHROZfwKe0xu7MilYpbFGPDfkXvlP59o4s6Lmlf6HSX8UKFYjrsY94pwfTzF9B3+Dq+eP0fZkrjW1r2xRo0UTm9jLSdvIz9nr5iFwfG2kiEzpuvAWnK06f0Fc04vjQNiTcN3FnQsSrsYwjIolCU+hHvhA0LHekjQAdwLXAK+J/69oq0L4TCpjvtYFcoMjXmCU5KLcCpF3pt7BhnuiXO+9ec5f1rznKmUxOPSz7yZ+JGfw1r3099Sbix2nN/Vx8n1m0n0THFRZ8a4vS1saS2e2cXy4yik3qzvofB0cHFs/p6KErDsYMXazU5C1hYVgkKmjqVUo4a/wshtgNGjbGi2xfm64K4oWFwJoKRhHllD0QEP/q3VSQ6psyuV9s7nwTg9lc30haaoO2mCfoPXk48XMdUq5brYBAPS7Nj1n2dv2FAX/G5MtpDdFSrGG203gP0eo+CgGXFYzqsQmHMgDx4ye5ZBWcVzrFhaDW/e+Yq5p8SBCPeiFdAgZaF3t/U4LOAMVPyc+BOIcQcIcQSoBN4sbghVgeBSU0wEqNzGR+Zz9HBxXx9+Dba/WHWth82Zxz84RiXXv0WvpbMvqvVD/7WlT9iuiVOPCzZcUsvW8ZW0Nm/fqZTeEOmV0n/2ED3Tj2dWwmF0wzFI6ZQzDslbLVCzEQl1onktCz09oXdwIVCiLeArwPdQohr0VyMN4EvA0gpXxdCPAUcBuLAfaWaCXGzRZEtK69+xEcsLIiHJd9o+wW9E5eaJfJ3tO9hy9zTbG0+xMpoD+MtWkKUPxwjEQngD8e4pjnZUOuuT9B99R/Ze7yDX09eqTXzffeDHI0sJhY2LJNkCyNVJGKW7lmK0rDmyDqODi4mNBhg3qS9nqluw3V9Q3K5IaVU1EKFIlO8wryfUkzGODkTHVNZW/mt3NfD2vbDnDy3wNyWLudhy9gKcx/r40axGl/LOXyD9WlrKxhjiYcll179lmfaCnoRo3dIQBcLY9bKGrPI1TA5lXxmRWqqb4gXhSIT8bAkEQnQtjTzl722/TBL5rydszlPpsetDYA6RjdnHQvA8dEL6b9ExSpKzczUuS9pmtvti8lcJRbZrAo3CkUqdoViuiVOU+sZIHtZ+WI7eFmTqhKh88TRSuIZgdN4Sj3Njy4dVEJRIvqnfPjDMWJh7Tcy1SqZP+Aj6KE6x56Y5PWCUGQiXZ6DL1rHNc3DfOvKH5X0va0nfvfVf6T3r7Zx6dVvmQFRg0ToPP5wTKV1l5Du+gQD3TsJXfMeiY4pev9qG69s+Z75uNutCvCIWLgVqwuSdRl4mnjF3uMdfPPNtfROtJZ2kDp3LXqe7voEH77gT4AmEMbNWLuwZWxFWcZSy6xtP8wq3YK76uF7Kz2cvHCVG5ION896GGQSCqtVkdpvIx4J8HY4xIn3F1GOPqCGlbG1+RC7W5czPjIfwBSKhvBUVTQudjvWzzhXDozbcK1lUYpsTAMnhMKwKnIJxellmFmaoMUJfC3n8IdjrG0/zN0L81o24wj7u/poaj1DU+sZGsJTNISnZq2IVZQGq/UWnCw+e7Oc+RautyycptRCYbUmom2CQATu+PRe+g5fRzwSMGcoNgyt5u6Fv5/VhbtcrG0/bLbXA2gLVbYnRbXTO9HK1j2fJjQY4Ges1tK8XVAAKR9cIxbWmZBKVzHOhDVGka08XmoD4R8+dzPP/fU/JwmDFkysXGOerc2H2AKcPLeAi+aeZsmctys2llpgY+MI/11v0JTqfnghuAkudEPcOPNhLdc/3ejnvcvnmAu1rKQu0IKZOMXHfvlfXVdx6u6Fv2dV4wBL5rxNR3Cs0sOpenwt59h93z8B9mqPuA3XiUWpKEQosvX0MMqkpVvFmYqR1+C2qcl2f5iO4BgdwTGWBs5UejhVT8/yl5OsS6+sNjVwjRtSSnIJRa76h6nt/YKTko6+zfg6pohF5pmPpa6/sAY1/eEYa46sY3vnkxWLU6RjJhfDPWOqVrY2H+Ky3ntY4MF1IeAysSiFC5Kr+nYusuVP9Cx/mSciNxIcNfYRxMJyVjcqX8s5Brp3MhSPuEooFOXDWBeyQA9ses2qgCp3Q3K1D8xGun4b1sK59SM+nnjxRrqv/qOZEWkIxWDPo/hazplJT6DVMFBCUZtsGVvBjlt6tQVkKbEKrwQ3wWWWhVNY2wfmSz5NX4KjfvYe7zALznT2r8eHJgwN4SnQ8xfejoa4a9HzeY9FUR143f0wcI1YpHNBMsUaMi3fLUYkwF6Lv3SBzA1Dq9nRvoee5S9z8twCdrTvYagtwvHYfJYGzvD14dsYnG5W/UFrkDVH1vHm7z6gFbvRq2J50QUBF4mFlVwByULK8efCjkWRTigawlPm/9ZU3nZ/mHZ/Aghr4hGPoIKItcfn2vbx7Ui7J4vdpOI6sShECKYb/UyHfZxeBs37089fZ1PzXEJhLV5jMNWqvc9kpJ4DtNG/KHsdCBWvqD0Mq2LBcPpCN05RrtYArhKLTEKRTSTM/xsE8XCCyOI6wqdmV/Kzs9hr1mOWMvxWjEY8K/f1sCgUVdWlFGkx3I8MBe49h50anB9A60bWCiSAbVLKh4UQC4E+4BK0Opyfk1KOCyEE8DCwFjgLrJdS7s/1PsUIBWh5Df6IdnJPT/qSKmvPeq7FSkg1D1NL5MfCktA17zEx2GQmVyVC51m5r4f9XX30T/nUlKgiCWOa1Ku1NjNhx7KIA38jpdwvhGgAXhZCPAOsB56VUj4khHgAeAD4GnAbWlXvTuAGtB4jN+R6E0MUrFNJ0fbkE9Aw4VLXZZxeBtMtMZpaz7C/q0/r2DVSl5QkFZyUSS36wBCXzJmXxlTo/q4+loxsYjqklao7PnqhWThXcz2UUCg0Ovo2ExrxJf/2PJjanQ477QtPoTUSQko5KYQ4gtZl7DNoVb8BHgf60cTiM8APpFYJ+A9CiAVCiMX662QlclEQLgoy3SDMk9tAu8prHb6ME9680ndMcULvowFaI58JmgjePE70wEKmW+JahexRTZAuvfotPte2j617Pk2iI0Y8EqCp9QyTkXrikQBbVv8bAN8d+JhZzWrHLb2AJg6qTqUiFaN6dzBNUeRqIa+kLL3n6YeAF4AWQwD0v836brZaGJayfaFCoXAe260AhBBh4DfAP0gpfyqEOC2lXGB5fFxK2SSE+Hfgm1LKvfr2Z4G/lVK+nOm154uF8rpb/hYoxg2Jp7ghPltuSLry+AbWjMwluzYBM27IqqWDrlsYpqg8qb89a8l/mD0bkimD024rAAM7syFlaQUghAgAPwGekFL+VN88argXeocyY41zQS0M031ooaFI2gBn+OR0UoCzeT+MLwsQHV3IVc/fy4XDkmDk/KwAZ3BSEpyEwKQvaZuV5ClS7f+V+3rwRevwRwRvjn6AeEucA2Nt0K5VbV4aOKMCnAoA88Ji9AcBffFhFcQt7MyGCKAXOCKl/JbloZ8DdwEP6X//1bL9K0KIJ9ECmxN24hV149G0MyKBiXNpBSM4EU8SjMCkVl5dy5TT57QzfEHW8uvpBGUGAWhd0OstW+PhOvZ39ampU0VaUvvNVsuMiB3L4mbgfwEOCSFe1bf9HZpIPCWE2AgMAXfoj+1GmzY9hjZ1usHuYLIJBsyeRjVMuulGP8FJiT8i0uZYWPedvT1zDkYwApyanZQVmPTR0ac17ZlsqWdltIdvXfkjFfRUJHHJR/7Mm7/7AEGPFebNhJ3ZkL0Y9vhsbkmzvwTuK3RAmQQDMvt3gQkIAU2HC0v3TrVSZj0eSQDJgqH1LJWEOqa4pnk4p1CoXIza4+krdtHb1sq3d/4nGNZzfxr9jmdxliN7E1y6RL1uPJo1wGM8nnqDwpf82vnlmprSAAAfDElEQVQC05mTk5EZB2XL2AqzdN5QPGImbG0YWs0z0UsLGpfC2zw13EUsLLNWUvMKrkn3luMTs1ae5hsRTt0/Xysjm4VhZISm5n/ATLm8vsPXAZrfdWCsDUAtUa9xnr5iF1yhxS+Ck6WzLsqBKy2LYjEsjcDEOfNml+BE3PYXOd0SZ9XSQZbs2qSV2RusJzE6lx3te5iM1DM+Mp+jg4uZjNTz+Ns3F3o4Co+zZWwFj33hMc9bF1UpFgZWS8MJ0TBnWSYlU60Jvnj9H+g/eDnBUb+Zs+GPCDr6NpMYnYsvWodPL/8+s0xdUWtsbT7Ehmc3auuWUmbfCi2pUAlc44ZAelekWFIDpukEI9sXls016Tt8HaHBwMxrT0JgUptuTSrYy1w6+9eztOUd1xXsVZQH63TqgqM+wHuuSFVbFga5Yh9WdyWd62JYGcGJuOZzNgitzuZgvS4QaRrHTGJmh/ojgngkwNNX7HKdUPRP+cxArKK0bBlbwRsbH/GsO1ITYgH5B0shu+ty1cP3aglgk9K8ZcKo9u22JkND8QiD080MTjdzPDa/0sOpevoOX5ckyvnUe3UDrhttKVwRg2w5HNmwJoUFJ+IsnIinbV9oCEZSAldEEA9LfnPrt11nVWx77yazfSGgaoSWmMToXNZ+928J4M0UcNdYFufHx83/y5Vkki9WSyN8clrr/5ByA2ZZGp//i+e5Ze9XWLJrE2uOrAM0K6OSpv+WsRW89O4HGY428tK7H2TvRGfFxlIL9E60mm0hUquveSXIaXvVaSmZLxbKG8QtZWuOXOpO6jAT9T69TO9Ipscv4mGJr0UTnJ7lL1esk/rKfT1J99Ual/KwZWyFWdj5hq/dQ/jkNDA78J6P22z34lqWVaeVwPgASiEahbojVowFbplmS4wkrgVHYbrBZ86O+COCOHNJhM6ze2g5kFwVvBys3NfD+IgWo/CHY2V971rH+l1PN4iiE7TKaYW7xg3JRKk+jFwp5fmQcZGaxSe1zo6AdpIuCkVZMudtR8aQi/4p7aveMrbCFAqAeESb+p2M1LNlbEVZxlLLWJcEpCsG7WZcLxZuJnV6NRNG/MIqGKuWDvLgJbvZ2FieoOLjb99M/5SPl979IICZMOaL1pmCUW4LpxbZPbScvcc76J/y8dr936v0cPLCtW6IFTfOkNglXZXxROg8B8ba+OrYHezv6ivZe/dPzdQK7T94Ob+NXqmPaSZ+AppwxJnprKZwnv4pH5te+BK+wXp8wMbRu5k/4COMHvRsnOv6vqeusiysMyKplNI3K7U7Mmu/UT8Tg02Mj8zPmnuxZWwFvROtBY/nm2+uNf83Kn35ra6Q5b4vWmde8RTO012fIB4JENCXBcwf8HmuKI4nLAsDN1oYqZW8ctXGMPBHBImWGMPRzMeze2g5a9sPs2FoZloz3ZV/y9gKTp5bMOvxo4OL6Ti4GV/LuYz1Rs2ga1iytOUdVcCnDAQmZ9fmBPdbF54SC3DnLEmm0n+QvHDIGtCKhyXPrfrOrDoXxtSaMWPxxMiN+MNauwJ/OMYGZgvGyXML2Hu8g57lWk1ksyz9qPb1BkbmJaWjW8cRiAhTMNTUaekw8musFJuYVe58JM/anHJ8oiQflhOzJNnckanWBNMtcRKh83x9+DY2No6YsxAbhlbTd/g61hxZx2SknuCon+CoX/Nz9UCkUSfDoH/KR//By0mMzuUTDa+zZWwFx0cvxBetM03etOtWLNuM/YxSgQrnefqKXfzm1m/z4c8e4uxibxbDySkWQogPCCGeE0IcEUK8LoS4X9/+90KIk0KIV/XbWstzHhRCHBNCvCGEWFPKA/AKRp6Fr+UcTa1nWNZxim+0/YKheITdQ8vN2EU8EuDYwYvNhkjpsMYxvvr6HeYS+Q3PbmRr8yEGuneasYhUobCS7rHO/vXm4jKFs7T7w+xo38NHPvla0YJRiSznnBmcepn/xdb2hcDtwOeAiJTyn1P2Xw78ELgeaAN+DSyTUqavpMtMBqeBNZPT9oGUKJZh1y1JdUOMzu4Gp5fBHZ/ey+6h5YyPzDeToRKjc/FHBJd85M8cO3ixGVswTmTrUvc3Nj5ivp6x5P3o4OKkZfLGvuksioxjb5h57nRLnGUdp5RLUgY6+jZz4X5hZnHCzHR8Luu2ELEoeQZnlvaFmfgM8KSU8n3ghBDiGJpw/L7QQdrB+uE5KRx24xhpA53hoNnYKNFxFoCJwSaCEUFAP8EDk9rJ+ubvPoCf2Se59v/MFciIZQRH/Zw80M6CWS6GUXo+d6TduLIZYwCUUJSRS69+i5Mj7QQj3qhtUUz7QtD6gxwUQnxfCGGYA7baF5YSp+MZhcYwgpEEZxdLgje/S8/yl3nixRu1blW6IBiiEJiEBUe1W2hYJi17D05Kc781R9ZxTfPwTDzC2vXKekuzuC3t+CwL3ozX2t75ZEHHqrCP4Ua+HQ2Z3fG8gG2x0NsX/gT4L1LKM2jd0TuAa9Esj/9p7Jrm6bMuc9l6nWbLt8gHQzScEI5CA58LjsL08xfwxIs3mtvMqbMsJ3hSy7tJSWhYcvJX7fQfvJzBnkeTXsPcL4M45BIOUzAigr/4yX8zt6vYRfGk5sl09q/noVduZcPQaiYj9cwfmPl87U6bVmpVtq1fQrr2hVLKUSnleSllAtiO5mqAzfaFUsptUsouKWVXgDnFHIMtnBKObIKR6csODUu6r/4jyzpOmSe5QdaTOOWxwCR88fo/cNXD99p+jVyvaW7XLZj6kZkGSt98c21SYpcif54a7qKzf7153zdYj2+wnv6DlzPQvZOv/G8/zfxkl2FnNiRt+0I98GnwWeA1/f+fA3cKIeYIIZYAncCLzg25eEopGJn47e+v5O1ocuwjnxMctBP6h8/dnNzwuQQFVAzBOD56IcdHL3RdhS8v8XY0ZK69uaz3HnOaOjjqN60Mr1BM+8LPCyGuRXMx3gS+DCClfF0I8RRwGIgD92WbCakUqYKRb1DUEAw7wc9omyARirMoFGWMC4D8T3Jj/7bfAhT/caZbs6JZK1pA1h8RTIe0H7laL1I4Rr7MVQ/fy7ykwLXgdEuA5j1+ghPTrs7cNCimfeHuLM/5B+AfihgX58fHC5pCLZRCZ1NSRSN1ViTaJoh2aNOkYz9pJzgpk6bKSoHd2o7pBCMVVe+iOAa6d3LVgXtnuZ+AJhR5XjQqWUXO1ene5RYMg0KEwzrFagjGdNinzXS8GtCDmOfLMkWW7j1ydVpLJR6WZvl6RX5YV/saFclSY0zm/x6YMjVwtVi4gXzcFauVEZg4R5iZk7SQH4Vd09RODUfr+6cKRzrBGOx51NZ7K2bTXZ9gya5NgLaad36GGJPxnXjBBQElFnljZyFbcic07W+uE7qYH4z1ufkIh1U0UgVj5b6ejLU2+qd8DE43l61wj5fYMraCvsPXmSUBrCt97VoUTpVMcBrXT6I7lXPhNHZ8x1ztEwvpxZqLfFs0Jt2PJAhOSqIdMfZ39SXlWBhd4UGruqWqgafnpXc/qK0QTlMOoFgqXfVeWRZFYCe2kS4AWmqsfU5yka7+RmgwQGf/ehKjc/m7W3/GU8NdPH3FLm5/9Q5zXUtDeAraSzJ8T/P0FbtYGe1hItqUUTCsIu0VFwQ8IhaVCnTmQy73JJ+pVqewKxpWtyQYScCwj8DkPAC+PfKfCN78LgDjI/PxRetIROuwuUatJtnf1cdKepiM1BMbrNf733ofV/UNyYbbxSIVO7Mo5RQOu41sDCvDGr8wFsPBzKpWgOmWOE2tZ7imeZhvtP3CdR3X3MJVD9+rrfmJJGa5fuksi3QxCydckGJXnbo+ZuFV7KSWO9mOIBd2zV3jx5y6NsVsAG0xrX3ROiYj9c4OtIowYjxeq+KdCU+4IeANVyQd+cyelNrSyMctMVwSw8IITmrFWowl84aF0RCe0jM8lVWRyjffXMsGvbzhvAaBdm32Z50yLZVV4QTKsigTdmdP3DZtli3DMBE6X9JWBl7nwxf8CSBtoWQv4imxcOs0ql3sXiFKLRqFRuBT05V33NLrxHA8h92FdVubD3Fi3XamWhOc6Uzw3m1TgP10fHCPVQEeE4tqIJ9l8oZolEI4cgmGNRCXybrY9MKXHB2TF1i5r4e9xzvSVutOx4ah1TR2jDPY8yi+wfqca3HcjOdG7nXrwiDf2hqlEI5i5/jjkYCtk6Z3orVq+qiOj8wnHglwfPRCQEtWs2IUuzGCmzva97C/q48luzbldEfc5oKm4jmxgOoRDCjMzHRSNLIJRjrrItagtTOIhyX+cIy2UO7xPzXcZXaM9xpbxlaYi8E6+9cntWdYsmsTmwbuNIVhzZF1PPTKrazc18OmF75kPm/L2Ap23NJL8OZ3Ob2MtNaFmwObBp6ZDalmCm2cZP2BFTOTkk/G50WfGjIL+m4YWs1Fc09n3X/NkXUcH72QeCRgViRvC014pkbG1uZDPPHijVzWew8+koOV8XBdUnHjp6/YxWW/u4co9STCknG96M0TL97ID6M3azVCWuJw1JunnSctC6gu68IJymXCHjt4sRngW9U4wJI5b8/ax7qmZHvnk8QjAS3zc3Qux0cvzNqy0W1YjyXVjUiEtCJExgpToxKWgS9aZ/6tH/Ex75T9WRG3WRXgoQzOdHgx78IOTrQyKNTSSGddWLM6o22CqdYEidB5dtzSO9OlXV+Juneik+FoIw9espvH376Z3/7+yqQ1Etn6kljrQJSbLWMreOndD2Zsg3DVw/fm1YfF6MHyxev/wNbmQ9zwtXsAzCxOq/tXLhek5H1D3IxXE7Vy4UQD6EJdlGx9W1Oxntjd9Qm++vrHmIzUkxidy8aDd+OPCOpTrsappjtoQcLbX93IolCU7jL2LOmdaDWX2W9tPsSSF29kZbSHRaFo0hg7+jabNSnsdT4XgGC6BbNvbQDSpnu7PahpxU7B3rlCiBeFEAf09oXf0LcvEUK8IIQYEEL0CSGC+vY5+v1j+uOXlPIAqtUdcbrvST4/ymxBz6nWBB+96XVOrNtO/5SP3olWc0Zkf1cfDeEpTSR0s9tME9dPNmv1cIN2f5jxkfkcHVycVDp/5b4eeida2TC0mi1jK+idaJ01+2CH/ikfW8ZWsGFoNWuOrDODlkax3KF4hI6+zQRH/YyPzOfpK3aZszdrjqyjfsSXse1CuvYNRnp8aDBgNoWabhC2CyC50QUBe+0LBRCSUkb0lgB7gfuBrwI/lVI+KYR4FDggpXxECHEvcLWUcrMQ4k7gs1LKnmzvUagbYlCN1oWVUrRmtGNtWC2M6UY/48vquP3ze+g7fB2J0bnUj/i46FNDHDt4MaBV1+qdaOWffvzZrO0Tz3QmGOx5lCW7NvHF6//A7qHlRA8sBLRyfgZGTKCp9QyLQlE+17av4II7G4ZWc2CszbR8DHwt5/AN1s+KR7x/zVl6lr/Mz364mtBw+pJ4mTBmO6YbBGc6NZeteY/frL2aq0VhKcTi/Pg4v5Y/LsoNyStmIYSYhyYW9wD/DrRKKeNCiJuAv5dSrhFCPK3//3shhB8YARbJLG9UrFiAEoxCyUc0Ihdp7RjFre8if3mBeaU1VqW+dv/32DK2IslHT4d1FWva99MFIx6WJELn8YdjDHTvtH9QGejsX28GW83G0RlE7UxngvoRn7la1EomC8GamTkd9pmfVeBHC2fFKsotFEDRYmErZiGEqENriHwp8F1gEDgtpTQ+NWuLQrN9oS4kE8AFwDuFDtIO1Rq/MCh0ejUXdmIbRhwjfHJaOyF2LCC5HYGP4KQ2GzDvlOCZyVVJz7eebNNhw6QnbRfxWEPK9CR1NLSecST4abSQzCQUVjfjwv2CYGTmGO24EMn7+AEfVFgonMTW1KneeexatO5i1wNXpNtN/1t0+0JFZbDTbS3dSWP46wuOzpxwmVompvr2dgKG+7v6HJkl2dp8KGNrA3uBS/sEJ+KET04TPjltSyhKhZMxvbxmQ6SUp4UQ/cCNwAIhhF+3LqwtCo32hW/pbkgj8F6a19oGbAPNDSn4CCxUu3UBzsyUZCPbcnnDwsh0lQ1aLoy5FksZgmFYGoC5BD6bi1IMmXImMpXph+JK9acGirMJhdutCrA3G7JICLFA/78e+ARwBHgO+M/6bncB/6r//3P9Pvrj/5EtXuE01To7YsXpLvHpyDSDYrfAcHAibt6y7pdSZAdIcg0SofOOtU/srk/wwId+yRsbHyEWlmn7ziaNLQ+hsBZfTvcZVWKK1OlzwY5lsRh4XI9b+ICnpJS7hBCHgSeFEFuBV9D6oaL//X+EEMfQLIo7HR2xDWrBwoDSWxmQ2dLItyiwQTqLI1ORndfuf8QMmDrFxsYRNgyt1mdd0pfpTx1zKvkuwMslFKUMajqJpzM4s1ELYmFQasGwkikIajeRCzK7KNYpR4CziyXP3PU/HKvt2TvRyncHPsbEoFZ5e94pkRRjMUgnFIWu0HWTUBQ7G+LZtSG5qAV3xKAcbolBph9/Pv1PcromhjsSEdz+6kbWHFlXUDJWKhsbR5iM1OfV/KfQvi6VqnpWyt991YoF1JZglBM7sya5sBsPmBhs4u1oiOOx+bb2z8Wzq77jyOtkw0sp3PlQ1WJRa5Qzop7tymm301rG5CZL/oU/IrQ1Iw4tMHsmeinTLXGiHTHOLk52we2U6c9FPkLh9PdV6otj1YvF+fHxmrIwyj0Fl+vkyCUa2cr3xcKSeFiyvfPJosZouDBbxlawsXGELav/jRPrtnPHp/dmHXe+VLNQgMdXneZDrcyQQOmyPTNRNx7NmTaebfYktYWiUY3LSPU2ApxGFme+2ZxfH76Nvcc7aAhPsbX5EA+9civ/fXQu8wd8BPV8wWI6mlfa7SjXxbBmxAJqSzCgPFOrBnZ7n2QSDatgfPizh/hG2y8AbUXqUDzC8dh8vvr6HUxG6lna8o6tpewbhlazqnGAvcc7SIzOZWJ0LhuaV/PAh37Jdwc+hhy4IGnZuNNTounwokVhUFNiAUowSo0dKwPSi4Z20vp59QcrWNugLRGfak3Q2DHOz67tZXxEC3IejSxmDdqy+Acv2Z3Ryjgw1mYKhbEe5Le/v5LfciW+lnPMaQBOFX6clabc7nXNiUUt4lbBgPTFdpIXmvmYbKnneGy+WaYO4OjgYppaz+R0R+KRAEHLVOm8U9qK11ik3nblq1QKFQonrYpKxOGqPsCZjloKeBq4LfBpxWr+ByfiM4vQ9CIyPctf5sv/75epH/FRP+LDHxFmn9VsqeD7u/o4sW67KRRGendoWLLgKIRPnc/LBXFLx7hK/X5rUiyg9mZJoLzJW1CcYACmYPz7ttXJVbf0k3+ge6dZJdy6SAxmuoZ19q8H0OpSpKyILdWxpMOpz72Sv9maFQuDWhMMKH8+hl0yCUb41HlzObthbVjL863c18NXX7/DLMm35sg6+g9eTkffZuKRQHLNihxp3enGr4RCo+bFAir/JVQCLwkGzF6dagjGZb33MDHYxPjIfD4ZOgZo7QeMalihwUDa18j0noWOOxPVIhSgxMLEDV9GuXHDmpJ0ZDp50wlGICLwRwTBUT+bBrQFzre/ulF7nSztAnNZFW4RCje5y0osFGWjkBMw9aTOFms4OrgYgMlIfV6vmYpbhMJtKLGw4CYVLydutDAyuSPZMErm9Sx/GV/LObPwbynGl41qcj2sqDyLNNRa4pZBudPEnSAwCVOtWhXwLR/6pVnB+8S67awMaz07jPaBDPtmWSa5OoPli1OuhxtRlkUG3PqFlYNylOyzgx3rItaA2Upx70QnvsF6QoMBLuvVWhHsuKWXwZ5HuehTQ2mriec7pmxUs1CAEous1KpbAu4RjEwYJ34sLPGHY/x68kruWvS8mY8x75RgbfthvrJtM5f13sPx0Qs505lgz3cfM1/DyYrbxX5eXvit2elINhf4LTAHzW35sZTy60KIncDHAONTWi+lfFXvYPYwsBY4q2/fn+09SlFWz2lq0S0xKKVbkistPDUV3FhsNrZSL8HXEqf76j9yYKyN6ecvSOoeZiXaJoiF9cxNm53B7OKEUJSDcjQZeh/4uLV9oRDiF/pj/7uU8scp+98GdOq3G4BH9L+eplbjGFDatSX5rCMxmA77CF3zHpOReprCU+w93gFoVzODWbMmwz7eu22K4H5tr1oTCifI6YZIDaMAYkC/ZTNHPgP8QH/eH9D6iywufqiVxwumYqkod6q4QWrOhRG7mH7+Arbf8AP2d/XhG6xnzoF5ZqvBdNOrwUhCW1TmYMOfWhIKsBmzEELUCSFeBcaAZ6SUL+gP/YMQ4qAQ4ttCCEPYzfaFOtbWhlWB175kJymFYORz0hpuSCws2fTCl8yUb1MoLP1KUm9Ln0wooSiCgtoXCiGuAh4ELgc+DCwEvqbvXhPtC5WV4aylUcjJm9CrXS04SlIRm3RYy/sVIxTFHreXfzd5zYZIKU8D/cCtUspTuqvxPrADrQcqzLQvNLC2NrS+1jYpZZeUsiuQ5G16Cy9/+U5QTsFI7Tfij2h9P9K5HZm6gxVTi6JWRcKg0PaFfzTiEPrsx+3Aa/pTfg58SWjcCExIKQusR+QdvP5DKAYnrQw7J3O0TfDYFx7jsS/MTINa61I4vTCs1kXCoJj2hf8hhFiE5na8CmzW99+NNm16DG3qdIPzw3YntTxjAs5lgGabIZkO+3j/mrN8ZdtmYmHJvAZBUA+/F9o1LBvVuMajUHKKhZTyIPChNNs/nmF/CdxX/NC8iXEVUaJRnGhYBcMovTe+rI5oR4zmX9QTjJwH9GnUoezdyspdWLdaLIlU1NqQEqFEo3jRsFYMD0yco+mon6ajPoIT0+Y+oaHM1kS+IlHt6drFosSixCjRmH0S5isexklvN3VLiURpUGJRJpRozGA9OfMRDqeK5VbrEvJSo8SizFh/YEo4irc6CnmPYqk1kTBQYlFBan32JB1OiUepZjFqVShAiUXFUe5JdtwwdVnLAmFFiYVLUO6J+1AikYwSCxeirI3KoQQiM0osXEzqD1eJR2lQAmEPJRYeQrkqzqDEoTBUDU6Pon7whaE+t8JRloWHSffDVxZHMkocnEOJRZVR63EOJQ6lQ4lFlZPp5PG6iChRKD9KLGqUbCebW4RECYK7UGKhmEWxJ6khNupkry6UWCgcR4lEdaKmThUKhS2UWCgUClvYFgu90dArQohd+v0lQogXhBADQog+IURQ3z5Hv39Mf/yS0gxdoVCUk3wsi/uBI5b7/wh8W0rZCYwDG/XtG4FxKeWlwLf1/RQKhcex277wYuAvgf9bvy+AjwNGU+TH0XqHgNbr9HH9/x8Dt+j7KxQKD2N3NuT/Av4WaNDvXwCcllIa/eKs/UzNXqdSyrgQYkLf/x3rCwoh7gbu1u++/2v549eoTi4k5dirhGo9LqjeY7usmCfnFAshxDpgTEr5shCi29icZldp47GZDVJuA7bp77FPStlla8Qeo1qPrVqPC6r32IQQ+4p5vh3L4mbgr4QQa4G5wHw0S2OBEMKvWxfWfqZGr9O3hBB+oBF4r5hBKhSKypMzZiGlfFBKebGU8hLgTuA/pJRfBJ4D/rO+213Av+r//1y/j/74f+hdyhQKhYcpJs/ia8BXhRDH0GISvfr2XuACfftXgQdsvNa2Isbhdqr12Kr1uKB6j62o4xLqoq9QKOygMjgVCoUtKi4WQohbhRBv6BmfdlwWVyGE+L4QYkwI8Zpl20IhxDN6duszQogmfbsQQvyLfqwHhRArKzfy7AghPiCEeE4IcUQI8boQ4n59u6ePTQgxVwjxohDigH5c39C3V0VGcikzrSsqFkKIOuC7wG3AcuDzQojllRxTAewEbk3Z9gDwrJ7d+iwzcZvbgE79djfwSJnGWAhx4G+klFcANwL36d+N14/tfeDjUsprgGuBW4UQN1I9Gcmly7SWUlbsBtwEPG25/yDwYCXHVOBxXAK8Zrn/BrBY/38x8Ib+/2PA59Pt5/Yb2mzXJ6vp2IB5wH7gBrQkLL++3fxdAk8DN+n/+/X9RKXHnuF4LkYT8I8Du9Bynhw7rkq7IWa2p441E9TLtEgpTwHof5v17Z48Xt1E/RDwAlVwbLqp/iowBjwDDGIzIxkwMpLdiJFpndDv2860xsZxVVosbGV7VhGeO14hRBj4CfBfpJRnsu2aZpsrj01KeV5KeS3alfh64Ip0u+l/PXFc1kxr6+Y0uxZ8XJUWCyPb08CaCeplRoUQiwH0v2P6dk8drxAigCYUT0gpf6pvropjA5BSngb60WIyC/SMY0ifkYzLM5KNTOs3gSfRXBEz01rfp6jjqrRYvAR06hHbIFqG6M8rPCYnsGaxpma3fkmfObgRmDBMerehrxTuBY5IKb9lecjTxyaEWCSEWKD/Xw98Ai0g6OmMZFmOTGsXBGXWAkfR/Mb/o9LjKWD8PwROATE0td6I5vs9Cwzofxfq+wq02Z9B4BDQVenxZzmuVWhm6UHgVf221uvHBlwNvKIf12vA/6lvXwq8CBwDfgTM0bfP1e8f0x9fWuljsHGM3cAup49LZXAqFApbVNoNUSgUHkGJhUKhsIUSC4VCYQslFgqFwhZKLBQKhS2UWCgUClsosVAoFLZQYqFQKGzx/wMX5Wsr3gS+AAAAAABJRU5ErkJggg==
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#31532;&#20108;&#31181;&#22330;&#26223;&#26356;&#20687;&#21069;&#38754;&#25552;&#21040;&#30340;&#25972;&#25968;&#24207;&#21015;&#32034;&#24341;">&#31532;&#20108;&#31181;&#22330;&#26223;&#26356;&#20687;&#21069;&#38754;&#25552;&#21040;&#30340;&#25972;&#25968;&#24207;&#21015;&#32034;&#24341;<a class="anchor-link" href="#&#31532;&#20108;&#31181;&#22330;&#26223;&#26356;&#20687;&#21069;&#38754;&#25552;&#21040;&#30340;&#25972;&#25968;&#24207;&#21015;&#32034;&#24341;">&#182;</a></h3><p><strong>但是只能对单一维度进行选择，同时对多个维度进行选择会得到奇怪的结果</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[83]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">mask_1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">])</span>
<span class="n">mask_2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">])</span>

<span class="n">arr</span><span class="p">[</span><span class="n">mask_1</span><span class="p">,</span> <span class="p">:]</span>  <span class="c1"># 选择行</span>
<span class="n">arr</span><span class="p">[</span><span class="n">mask_1</span><span class="p">]</span>  <span class="c1"># 选择行</span>
<span class="n">arr</span><span class="p">[:,</span> <span class="n">mask_2</span><span class="p">]</span>  <span class="c1"># 选择列</span>
<span class="n">arr</span><span class="p">[</span><span class="n">mask_1</span><span class="p">,</span> <span class="n">mask_2</span><span class="p">]</span>  <span class="c1"># 奇怪结果</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[83]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[83]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[83]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0,  2],
       [ 4,  6],
       [ 8, 10]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[83]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([ 4, 10])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="ix_"><code>ix_</code><a class="anchor-link" href="#ix_">&#182;</a></h2><p>Construct an open mesh from multiple sequences.</p>
<p>返回从输入序列中各取一个的所有组合</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">ix_</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
</pre></div>
<p>比如计算 a+b*c</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[84]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">ax</span><span class="p">,</span> <span class="n">bx</span><span class="p">,</span> <span class="n">cx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ix_</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>

<span class="n">ax</span>
<span class="n">bx</span>
<span class="n">cx</span>

<span class="n">ax</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">bx</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">cx</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[84]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[2]],

       [[3]],

       [[4]],

       [[5]]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[84]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[8],
        [5],
        [4]]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[84]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[5, 4, 6, 8, 3]]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[84]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>((4, 1, 1), (1, 3, 1), (1, 1, 5))</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[85]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">ax</span><span class="o">+</span><span class="n">bx</span><span class="o">*</span><span class="n">cx</span>
<span class="n">result</span>
<span class="n">result</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[85]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[42, 34, 50, 66, 26],
        [27, 22, 32, 42, 17],
        [22, 18, 26, 34, 14]],

       [[43, 35, 51, 67, 27],
        [28, 23, 33, 43, 18],
        [23, 19, 27, 35, 15]],

       [[44, 36, 52, 68, 28],
        [29, 24, 34, 44, 19],
        [24, 20, 28, 36, 16]],

       [[45, 37, 53, 69, 29],
        [30, 25, 35, 45, 20],
        [25, 21, 29, 37, 17]]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[85]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(4, 3, 5)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[86]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">result</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">a</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">+</span><span class="n">b</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="n">c</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[86]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>17</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[86]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>17</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>利用上述性质实现 reduce</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[87]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">ufunc_reduce</span><span class="p">(</span><span class="n">ufct</span><span class="p">,</span> <span class="o">*</span><span class="n">vectors</span><span class="p">):</span>
    <span class="n">vs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ix_</span><span class="p">(</span><span class="o">*</span><span class="n">vectors</span><span class="p">)</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">ufct</span><span class="o">.</span><span class="n">identity</span>
    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">vs</span><span class="p">:</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">ufct</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">r</span>


<span class="n">ufunc_reduce</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">add</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[87]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[15, 14, 16, 18, 13],
        [12, 11, 13, 15, 10],
        [11, 10, 12, 14,  9]],

       [[16, 15, 17, 19, 14],
        [13, 12, 14, 16, 11],
        [12, 11, 13, 15, 10]],

       [[17, 16, 18, 20, 15],
        [14, 13, 15, 17, 12],
        [13, 12, 14, 16, 11]],

       [[18, 17, 19, 21, 16],
        [15, 14, 16, 18, 13],
        [14, 13, 15, 17, 12]]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>此版本的 reduce 和 ufunc.reduce 相比的优点是利用 broadcasting rules 从而避免了中间变量的产生。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#20351;&#29992;&#23383;&#31526;&#20018;&#32034;&#24341;">&#20351;&#29992;&#23383;&#31526;&#20018;&#32034;&#24341;<a class="anchor-link" href="#&#20351;&#29992;&#23383;&#31526;&#20018;&#32034;&#24341;">&#182;</a></h2><p>见<a href="https://docs.scipy.org/doc/numpy/user/basics.rec.html#structured-arrays">Structured arrays</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="&#32447;&#24615;&#20195;&#25968;">&#32447;&#24615;&#20195;&#25968;<a class="anchor-link" href="#&#32447;&#24615;&#20195;&#25968;">&#182;</a></h1><h2 id="&#31616;&#21333;&#30340;&#32447;&#24615;&#20195;&#25968;&#36816;&#31639;">&#31616;&#21333;&#30340;&#32447;&#24615;&#20195;&#25968;&#36816;&#31639;<a class="anchor-link" href="#&#31616;&#21333;&#30340;&#32447;&#24615;&#20195;&#25968;&#36816;&#31639;">&#182;</a></h2><p>更多内容可以参考<code>numpy.linalg</code>模块</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[88]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">]])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

<span class="n">arr</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>  <span class="c1"># 转置</span>
<span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">inv</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>  <span class="c1"># 求逆</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>[[1. 2.]
 [3. 4.]]
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[88]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[1., 3.],
       [2., 4.]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[88]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[-2. ,  1. ],
       [ 1.5, -0.5]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[89]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">u</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># 2x2 单位矩阵</span>
<span class="n">u</span>

<span class="n">j</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]])</span>
<span class="n">j</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[89]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[1., 0.],
       [0., 1.]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[89]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0., -1.],
       [ 1.,  0.]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[90]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>  <span class="c1"># 矩阵乘法</span>
<span class="n">np</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>  <span class="c1"># 迹</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[90]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[-1.,  0.],
       [ 0., -1.]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[90]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>2.0</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[91]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">5.</span><span class="p">],</span> <span class="p">[</span><span class="mf">7.</span><span class="p">]])</span>
<span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>  <span class="c1"># 求解线性方程</span>

<span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">eig</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>  <span class="c1"># 计算特征值和特征向量</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[91]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[-3.],
       [ 4.]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[91]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(array([0.+1.j, 0.-1.j]),
 array([[0.70710678+0.j        , 0.70710678-0.j        ],
        [0.        -0.70710678j, 0.        +0.70710678j]]))</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="&#25216;&#24039;&#21644;&#25552;&#31034;">&#25216;&#24039;&#21644;&#25552;&#31034;<a class="anchor-link" href="#&#25216;&#24039;&#21644;&#25552;&#31034;">&#182;</a></h1><h2 id="&#8220;&#33258;&#21160;&#8221;&#25913;&#21464;&#24418;&#29366;">&#8220;&#33258;&#21160;&#8221;&#25913;&#21464;&#24418;&#29366;<a class="anchor-link" href="#&#8220;&#33258;&#21160;&#8221;&#25913;&#21464;&#24418;&#29366;">&#182;</a></h2><p>改变ndarray形状时，可以省略某一维度的值，NumPy会自动推断。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[92]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<span class="n">arr</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span>

<span class="n">arr</span><span class="o">.</span><span class="n">shape</span>
<span class="n">arr</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[92]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(2, 5, 3)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[92]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[ 0,  1,  2],
        [ 3,  4,  5],
        [ 6,  7,  8],
        [ 9, 10, 11],
        [12, 13, 14]],

       [[15, 16, 17],
        [18, 19, 20],
        [21, 22, 23],
        [24, 25, 26],
        [27, 28, 29]]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#21521;&#37327;&#32452;&#21512;">&#21521;&#37327;&#32452;&#21512;<a class="anchor-link" href="#&#21521;&#37327;&#32452;&#21512;">&#182;</a></h2><p>见<a href="#ndarray的组合">ndarray的组合</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#30452;&#26041;&#22270;">&#30452;&#26041;&#22270;<a class="anchor-link" href="#&#30452;&#26041;&#22270;">&#182;</a></h2><p><code>histogram</code>函数以ndarray为输入，输出一个hitogram向量和一个bin向量，hitogram对应区间计数，bin对应区间划分。</p>
<p>matplotlib中也有直方图函数<code>hist</code>和NumP中的主要区别是,<code>hist</code>自动画出热力图而<code>numpy.histogram</code>只是产生数据。</p>
<p>Compute the histogram of a set of data.</p>
<p>计算数据的直方图统计结果</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">normed</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="bp">None</span><span class="p">)[</span><span class="n">source</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[93]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 生成数据</span>
<span class="n">mu</span><span class="p">,</span> <span class="n">sigma</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">0.5</span>
<span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">mu</span><span class="p">,</span> <span class="n">sigma</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span>
<span class="n">arr</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[93]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([1.47284974, 1.31379922, 2.93450001, ..., 3.30305208, 2.03302393,
       1.88693229])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[94]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Plot a normalized histogram with 50 bins</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">normed</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stderr output_text">
<pre>c:\users\twang\appdata\local\conda\conda\envs\py36\lib\site-packages\matplotlib\axes\_axes.py:6571: UserWarning: The &#39;normed&#39; kwarg is deprecated, and has been replaced by the &#39;density&#39; kwarg.
  warnings.warn(&#34;The &#39;normed&#39; kwarg is deprecated, and has been &#34;
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[94]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(array([0.00116306, 0.00116306, 0.00232611, 0.00116306, 0.00232611,
        0.00697833, 0.00697833, 0.00465222, 0.01860889, 0.03023944,
        0.0523375 , 0.07443555, 0.10467499, 0.14654499, 0.16515387,
        0.26401359, 0.33844914, 0.42567829, 0.53965773, 0.56408189,
        0.65480022, 0.73156188, 0.80716048, 0.8013452 , 0.74319243,
        0.75947521, 0.7676166 , 0.67108299, 0.59897356, 0.56524495,
        0.42102607, 0.36519941, 0.28145942, 0.20120859, 0.15817554,
        0.1279361 , 0.07327249, 0.06164194, 0.03372861, 0.01744583,
        0.01511972, 0.00697833, 0.00581528, 0.00232611, 0.00232611,
        0.00348917, 0.00116306, 0.        , 0.        , 0.00116306]),
 array([-0.07747034,  0.00851008,  0.0944905 ,  0.18047093,  0.26645135,
         0.35243178,  0.4384122 ,  0.52439262,  0.61037305,  0.69635347,
         0.78233389,  0.86831432,  0.95429474,  1.04027516,  1.12625559,
         1.21223601,  1.29821643,  1.38419686,  1.47017728,  1.55615771,
         1.64213813,  1.72811855,  1.81409898,  1.9000794 ,  1.98605982,
         2.07204025,  2.15802067,  2.24400109,  2.32998152,  2.41596194,
         2.50194236,  2.58792279,  2.67390321,  2.75988364,  2.84586406,
         2.93184448,  3.01782491,  3.10380533,  3.18978575,  3.27576618,
         3.3617466 ,  3.44772702,  3.53370745,  3.61968787,  3.70566829,
         3.79164872,  3.87762914,  3.96360957,  4.04958999,  4.13557041,
         4.22155084]),
 &lt;a list of 50 Patch objects&gt;)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>




<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[95]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 通过NumPy计算</span>
<span class="n">n</span><span class="p">,</span> <span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">normed</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">n</span>
<span class="n">bins</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stderr output_text">
<pre>c:\users\twang\appdata\local\conda\conda\envs\py36\lib\site-packages\ipykernel_launcher.py:2: VisibleDeprecationWarning: Passing `normed=True` on non-uniform bins has always been broken, and computes neither the probability density function nor the probability mass function. The result is only correct if the bins are uniform, when density=True will produce the same result anyway. The argument will be removed in a future version of numpy.
  
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[95]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([0.00116306, 0.00116306, 0.00232611, 0.00116306, 0.00232611,
       0.00697833, 0.00697833, 0.00465222, 0.01860889, 0.03023944,
       0.0523375 , 0.07443555, 0.10467499, 0.14654499, 0.16515387,
       0.26401359, 0.33844914, 0.42567829, 0.53965773, 0.56408189,
       0.65480022, 0.73156188, 0.80716048, 0.8013452 , 0.74319243,
       0.75947521, 0.7676166 , 0.67108299, 0.59897356, 0.56524495,
       0.42102607, 0.36519941, 0.28145942, 0.20120859, 0.15817554,
       0.1279361 , 0.07327249, 0.06164194, 0.03372861, 0.01744583,
       0.01511972, 0.00697833, 0.00581528, 0.00232611, 0.00232611,
       0.00348917, 0.00116306, 0.        , 0.        , 0.00116306])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[95]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([-0.07747034,  0.00851008,  0.0944905 ,  0.18047093,  0.26645135,
        0.35243178,  0.4384122 ,  0.52439262,  0.61037305,  0.69635347,
        0.78233389,  0.86831432,  0.95429474,  1.04027516,  1.12625559,
        1.21223601,  1.29821643,  1.38419686,  1.47017728,  1.55615771,
        1.64213813,  1.72811855,  1.81409898,  1.9000794 ,  1.98605982,
        2.07204025,  2.15802067,  2.24400109,  2.32998152,  2.41596194,
        2.50194236,  2.58792279,  2.67390321,  2.75988364,  2.84586406,
        2.93184448,  3.01782491,  3.10380533,  3.18978575,  3.27576618,
        3.3617466 ,  3.44772702,  3.53370745,  3.61968787,  3.70566829,
        3.79164872,  3.87762914,  3.96360957,  4.04958999,  4.13557041,
        4.22155084])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[96]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># matplot 绘图</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="o">.</span><span class="mi">5</span><span class="o">*</span><span class="p">(</span><span class="n">bins</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">+</span><span class="n">bins</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> <span class="n">n</span><span class="p">)</span>  <span class="c1"># 在中点处可视化计数值</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[96]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[&lt;matplotlib.lines.Line2D at 0x209d0d71748&gt;]</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>




<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="index">index<a class="anchor-link" href="#index">&#182;</a></h1><h2 id="numpy.random&#27169;&#22359;"><code>numpy.random</code>&#27169;&#22359;<a class="anchor-link" href="#numpy.random&#27169;&#22359;">&#182;</a></h2><p>一些常用的 random 函数</p>

<pre><code>rand(d0, d1, ..., dn)               Random values in a given shape.Create an array of the given shape and populate it with random samples from a uniform distribution over [0, 1)
randn(d0, d1, ..., dn)              Return a sample (or samples) from the “standard normal” distribution.
randint(low[, high, size, dtype])   Return random integers from low (inclusive) to high (exclusive).
random_integers(low[, high, size])  Random integers of type np.int between low and high, inclusive.
random_sample([size])               Return random floats in the half-open interval [0.0, 1.0).
random([size])                      Return random floats in the half-open interval [0.0, 1.0).
ranf([size])                        Return random floats in the half-open interval [0.0, 1.0).
sample([size])                      Return random floats in the half-open interval [0.0, 1.0).
choice(a[, size, replace, p])       Generates a random sample from a given 1-D array
bytes(length)                       Return random bytes.

</code></pre>
<h2 id="ndarray-&#36716;&#25442;">ndarray &#36716;&#25442;<a class="anchor-link" href="#ndarray-&#36716;&#25442;">&#182;</a></h2>
<pre><code>ndarray.item(*args) Copy an element of an array to a standard Python scalar and return it.
ndarray.tolist()    Return the array as a (possibly nested) list.
ndarray.itemset(*args)  Insert scalar into an array (scalar is cast to array’s dtype, if possible)
ndarray.tostring([order])   Construct Python bytes containing the raw data bytes in the array.
ndarray.tobytes([order])    Construct Python bytes containing the raw data bytes in the array.
ndarray.tofile(fid[, sep, format])  Write array to a file as text or binary (default).
ndarray.dump(file)  Dump a pickle of the array to the specified file.
ndarray.dumps() Returns the pickle of the array as a string.
ndarray.astype(dtype[, order, casting, ...])    Copy of the array, cast to a specified type.
ndarray.byteswap(inplace)   Swap the bytes of the array elements
ndarray.copy([order])   Return a copy of the array.
ndarray.view([dtype, type]) New view of array with the same data.
ndarray.getfield(dtype[, offset])   Returns a field of the given array as a certain type.
ndarray.setflags([write, align, uic])   Set array flags WRITEABLE, ALIGNED, and UPDATEIFCOPY, respectively.
ndarray.fill(value) Fill the array with a scalar value.

</code></pre>
<h2 id="&#24418;&#29366;&#25805;&#20316;">&#24418;&#29366;&#25805;&#20316;<a class="anchor-link" href="#&#24418;&#29366;&#25805;&#20316;">&#182;</a></h2>
<pre><code>ndarray.reshape(shape[, order]) Returns an array containing the same data with a new shape.
ndarray.resize(new_shape[, refcheck])   Change shape and size of array in-place.
ndarray.transpose(*axes)    Returns a view of the array with axes transposed.
ndarray.swapaxes(axis1, axis2)  Return a view of the array with axis1 and axis2 interchanged.
ndarray.flatten([order])    Return a copy of the array collapsed into one dimension.
ndarray.ravel([order])  Return a flattened array.
ndarray.squeeze([axis]) Remove single-dimensional entries from the shape of a.

</code></pre>
<h2 id="&#20803;&#32032;&#32034;&#24341;&#19982;&#36716;&#25442;">&#20803;&#32032;&#32034;&#24341;&#19982;&#36716;&#25442;<a class="anchor-link" href="#&#20803;&#32032;&#32034;&#24341;&#19982;&#36716;&#25442;">&#182;</a></h2>
<pre><code>ndarray.take(indices[, axis, out, mode])    Return an array formed from the elements of a at the given indices.
ndarray.put(indices, values[, mode])    Set a.flat[n] = values[n] for all n in indices.
ndarray.repeat(repeats[, axis]) Repeat elements of an array.
ndarray.choose(choices[, out, mode])    Use an index array to construct a new array from a set of choices.
ndarray.sort([axis, kind, order])   Sort an array, in-place.
ndarray.argsort([axis, kind, order])    Returns the indices that would sort this array.
ndarray.partition(kth[, axis, kind, order]) Rearranges the elements in the array in such a way that value of the element in kth position is in the position it would be in a sorted array.
ndarray.argpartition(kth[, axis, kind, order])  Returns the indices that would partition this array.
ndarray.searchsorted(v[, side, sorter]) Find indices where elements of v should be inserted in a to maintain order.
ndarray.nonzero()   Return the indices of the elements that are non-zero.
ndarray.compress(condition[, axis, out])    Return selected slices of this array along given axis.
ndarray.diagonal([offset, axis1, axis2])    Return specified diagonals.

</code></pre>
<h2 id="&#35745;&#31639;">&#35745;&#31639;<a class="anchor-link" href="#&#35745;&#31639;">&#182;</a></h2>
<pre><code>ndarray.argmax([axis, out]) Return indices of the maximum values along the given axis.
ndarray.min([axis, out, keepdims])  Return the minimum along a given axis.
ndarray.argmin([axis, out]) Return indices of the minimum values along the given axis of a.
ndarray.ptp([axis, out])    Peak to peak (maximum - minimum) value along a given axis.
ndarray.clip([min, max, out])   Return an array whose values are limited to [min, max].
ndarray.conj()  Complex-conjugate all elements.
ndarray.round([decimals, out])  Return a with each element rounded to the given number of decimals.
ndarray.trace([offset, axis1, axis2, dtype, out])   Return the sum along diagonals of the array.
ndarray.sum([axis, dtype, out, keepdims])   Return the sum of the array elements over the given axis.
ndarray.cumsum([axis, dtype, out])  Return the cumulative sum of the elements along the given axis.
ndarray.mean([axis, dtype, out, keepdims])  Returns the average of the array elements along given axis.
ndarray.var([axis, dtype, out, ddof, keepdims]) Returns the variance of the array elements, along given axis.
ndarray.std([axis, dtype, out, ddof, keepdims]) Returns the standard deviation of the array elements along given axis.
ndarray.prod([axis, dtype, out, keepdims])  Return the product of the array elements over the given axis
ndarray.cumprod([axis, dtype, out]) Return the cumulative product of the elements along the given axis.
ndarray.all([axis, out, keepdims])  Returns True if all elements evaluate to True.
ndarray.any([axis, out, keepdims])  Returns True if any of the elements of a evaluate to True.</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="&#20197;&#19979;&#20026;&#34917;&#20805;&#20869;&#23481;">&#20197;&#19979;&#20026;&#34917;&#20805;&#20869;&#23481;<a class="anchor-link" href="#&#20197;&#19979;&#20026;&#34917;&#20805;&#20869;&#23481;">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="&#20989;&#25968;&#29702;&#35299;">&#20989;&#25968;&#29702;&#35299;<a class="anchor-link" href="#&#20989;&#25968;&#29702;&#35299;">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="numpy.apply_along_axis"><code>numpy.apply_along_axis</code><a class="anchor-link" href="#numpy.apply_along_axis">&#182;</a></h2><p>Apply a function to 1-D slices along the given axis.</p>
<p>对ndarray中的某个维度执行某一函数（即该函数认为输入为某个 1-D ndarray）</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">apply_along_axis</span><span class="p">(</span><span class="n">func1d</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">arr</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
<p><strong>将指定的维度“看作”唯一的维度，对这个1-D ndarray进行操作</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[97]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">my_func</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;取该子维度第一个值与最后一个值的平均&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">a</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">*</span> <span class="mf">0.5</span>


<span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="n">np</span><span class="o">.</span><span class="n">apply_along_axis</span><span class="p">(</span><span class="n">my_func</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">arr</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">apply_along_axis</span><span class="p">(</span><span class="n">my_func</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">arr</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[97]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[20., 21., 22., 23., 24.],
       [25., 26., 27., 28., 29.],
       [30., 31., 32., 33., 34.],
       [35., 36., 37., 38., 39.]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[97]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 7.5,  8.5,  9.5, 10.5, 11.5],
       [27.5, 28.5, 29.5, 30.5, 31.5],
       [47.5, 48.5, 49.5, 50.5, 51.5]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[98]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">np</span><span class="o">.</span><span class="n">apply_along_axis</span><span class="p">(</span><span class="nb">sorted</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">arr</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[98]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[ 0,  1,  2,  3,  4],
        [ 5,  6,  7,  8,  9],
        [10, 11, 12, 13, 14],
        [15, 16, 17, 18, 19]],

       [[20, 21, 22, 23, 24],
        [25, 26, 27, 28, 29],
        [30, 31, 32, 33, 34],
        [35, 36, 37, 38, 39]],

       [[40, 41, 42, 43, 44],
        [45, 46, 47, 48, 49],
        [50, 51, 52, 53, 54],
        [55, 56, 57, 58, 59]]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[99]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">apply_along_axis</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">arr</span><span class="p">)</span>
<span class="n">res</span>
<span class="n">res</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[99]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[[ 0,  1,  2,  3,  4],
         [ 0,  0,  0,  0,  0],
         [ 0,  0,  0,  0,  0],
         [ 0,  0,  0,  0,  0]],

        [[ 0,  0,  0,  0,  0],
         [ 5,  6,  7,  8,  9],
         [ 0,  0,  0,  0,  0],
         [ 0,  0,  0,  0,  0]],

        [[ 0,  0,  0,  0,  0],
         [ 0,  0,  0,  0,  0],
         [10, 11, 12, 13, 14],
         [ 0,  0,  0,  0,  0]],

        [[ 0,  0,  0,  0,  0],
         [ 0,  0,  0,  0,  0],
         [ 0,  0,  0,  0,  0],
         [15, 16, 17, 18, 19]]],


       [[[20, 21, 22, 23, 24],
         [ 0,  0,  0,  0,  0],
         [ 0,  0,  0,  0,  0],
         [ 0,  0,  0,  0,  0]],

        [[ 0,  0,  0,  0,  0],
         [25, 26, 27, 28, 29],
         [ 0,  0,  0,  0,  0],
         [ 0,  0,  0,  0,  0]],

        [[ 0,  0,  0,  0,  0],
         [ 0,  0,  0,  0,  0],
         [30, 31, 32, 33, 34],
         [ 0,  0,  0,  0,  0]],

        [[ 0,  0,  0,  0,  0],
         [ 0,  0,  0,  0,  0],
         [ 0,  0,  0,  0,  0],
         [35, 36, 37, 38, 39]]],


       [[[40, 41, 42, 43, 44],
         [ 0,  0,  0,  0,  0],
         [ 0,  0,  0,  0,  0],
         [ 0,  0,  0,  0,  0]],

        [[ 0,  0,  0,  0,  0],
         [45, 46, 47, 48, 49],
         [ 0,  0,  0,  0,  0],
         [ 0,  0,  0,  0,  0]],

        [[ 0,  0,  0,  0,  0],
         [ 0,  0,  0,  0,  0],
         [50, 51, 52, 53, 54],
         [ 0,  0,  0,  0,  0]],

        [[ 0,  0,  0,  0,  0],
         [ 0,  0,  0,  0,  0],
         [ 0,  0,  0,  0,  0],
         [55, 56, 57, 58, 59]]]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[99]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(3, 4, 4, 5)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="numpy.roll"><code>numpy.roll</code><a class="anchor-link" href="#numpy.roll">&#182;</a></h2><p>Roll array elements along a given axis.</p>
<p>沿指定轴顺序平移ndarray元素</p>
<div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">roll</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">shift</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[100]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="n">np</span><span class="o">.</span><span class="n">roll</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[100]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[10, 11,  0,  1],
       [ 2,  3,  4,  5],
       [ 6,  7,  8,  9]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[101]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">roll</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[101]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 4,  5,  6,  7],
       [ 8,  9, 10, 11],
       [ 0,  1,  2,  3]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#32479;&#35745;&#20989;&#25968;">&#32479;&#35745;&#20989;&#25968;<a class="anchor-link" href="#&#32479;&#35745;&#20989;&#25968;">&#182;</a></h2><p>NumPy 里的一些统计函数</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong><code>scipy.stats</code></strong> 基本统计数据</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[102]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">scipy</span> <span class="k">import</span> <span class="n">stats</span>
<span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="n">stats</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[102]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>DescribeResult(nobs=3, minmax=(array([0, 1, 2, 3]), array([ 8,  9, 10, 11])), mean=array([4., 5., 6., 7.]), variance=array([16., 16., 16., 16.]), skewness=array([0., 0., 0., 0.]), kurtosis=array([-1.5, -1.5, -1.5, -1.5]))</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[103]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 计算所有元素的和</span>
<span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[103]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>66</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[104]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 对每一列求和</span>
<span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[104]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([12, 15, 18, 21])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[105]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 对每一行求和</span>

<span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[105]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([ 6, 22, 38])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[106]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 对每一个元素求累积和（从上到下，从左到右的元素顺序），即每移动一次就把当前数字加到和值</span>

<span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[106]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([ 0,  1,  3,  6, 10, 15, 21, 28, 36, 45, 55, 66], dtype=int32)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[107]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 计算每一列的累积和，并返回二维数组</span>

<span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[107]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0,  1,  2,  3],
       [ 4,  6,  8, 10],
       [12, 15, 18, 21]], dtype=int32)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[108]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 计算每一行的累计积，并返回二维数组</span>

<span class="n">np</span><span class="o">.</span><span class="n">cumprod</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[108]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[   0,    0,    0,    0],
       [   4,   20,  120,  840],
       [   8,   72,  720, 7920]], dtype=int32)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[109]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 计算所有元素的最小值</span>

<span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[109]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>0</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[110]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 计算每一列的最大值</span>

<span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[110]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([ 8,  9, 10, 11])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[111]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 计算所有元素的均值</span>

<span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[111]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>5.5</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[112]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 计算每一行的均值</span>

<span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[112]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([1.5, 5.5, 9.5])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[113]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 计算所有元素的中位数</span>

<span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[113]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>5.5</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[114]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 计算每一列的中位数</span>

<span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[114]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([4., 5., 6., 7.])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[115]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 计算所有元素的方差</span>

<span class="n">np</span><span class="o">.</span><span class="n">var</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[115]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>11.916666666666666</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[116]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 计算每一行的标准差</span>

<span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[116]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([1.11803399, 1.11803399, 1.11803399])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>此外还有：</p>
<ul>
<li>unique(x): 计算x的唯一元素，并返回有序结果 </li>
<li>intersect(x,y)： 计算x和y的公共元素，即交集 </li>
<li>union1d(x,y): 计算x和y的并集 </li>
<li>setdiff1d(x,y): 计算x和y的差集，即元素在x中，不在y中 </li>
<li>setxor1d(x,y): 计算集合的对称差，即存在于一个数组中，但不同时存在于两个数组中 </li>
<li>in1d(x,y): 判断x的元素是否包含于y中</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Matrix-library">Matrix library<a class="anchor-link" href="#Matrix-library">&#182;</a></h2><p><code>numpy.matlib</code>库拥有所有 NumPy 命名空间的函数，只是针对 matrix 替换了以下函数。</p>
<p>numpy namespace 中返回 matrix 的函数</p>
<ul>
<li>mat(data[, dtype])  #Interpret the input as a matrix.</li>
<li>matrix  # Returns a matrix from an array-like object, or from a string of data.</li>
<li>asmatrix(data[, dtype]) Interpret the input as a matrix.</li>
<li>bmat(obj[, ldict, gdict])   # Build a matrix object from a string, nested sequence, or array.</li>
<li><p>matlib 库中替换了的函数</p>
</li>
<li><p>empty(shape[, dtype, order])    # Return a new matrix of given shape and type, without initializing entries.</p>
</li>
<li>zeros(shape[, dtype, order])    # Return a matrix of given shape and type, filled with zeros.</li>
<li>ones(shape[, dtype, order]) # Matrix of ones.</li>
<li>eye(n[, M, k, dtype])   # Return a matrix with ones on the diagonal and zeros elsewhere.</li>
<li>identity(n[, dtype])    # Returns the square identity matrix of given size.</li>
<li>repmat(a, m, n) # Repeat a 0-D to 2-D array or matrix MxN times.</li>
<li>rand(*args) # Return a matrix of random values with given shape.</li>
<li>randn(*args)    # Return a random matrix with data from the “standard normal” distribution.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>区分一下不同 shape 叠加之后的结果，大体上 (n,)与(n,1) 表现类似</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[117]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>  <span class="c1"># (10,) shape</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># (10, 1) shape</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># (1, 10) shape</span>

<span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">shape</span>
<span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">shape</span>

<span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">y</span><span class="p">,</span> <span class="n">y</span><span class="p">])</span><span class="o">.</span><span class="n">shape</span>
<span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">([</span><span class="n">y</span><span class="p">,</span> <span class="n">y</span><span class="p">])</span><span class="o">.</span><span class="n">shape</span>

<span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">z</span><span class="p">,</span> <span class="n">z</span><span class="p">])</span><span class="o">.</span><span class="n">shape</span>
<span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">([</span><span class="n">z</span><span class="p">,</span> <span class="n">z</span><span class="p">])</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[117]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(2, 10)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[117]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(20,)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[117]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(20, 1)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[117]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(10, 2)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[117]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(2, 10)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[117]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(1, 20)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="numpy.random.choice"><code>numpy.random.choice</code><a class="anchor-link" href="#numpy.random.choice">&#182;</a></h2><p>Generates a random sample from a given 1-D array</p>
<p>对给定的 1-D array 进行随机采样</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
<p>通过<code>replace</code>参数，控制是否重复选择</p>
<p><code>random.choices</code> 与其类似</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[118]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>

<span class="n">aa_milne_arr</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;pooh&#39;</span><span class="p">,</span> <span class="s1">&#39;rabbit&#39;</span><span class="p">,</span> <span class="s1">&#39;piglet&#39;</span><span class="p">,</span> <span class="s1">&#39;Christopher&#39;</span><span class="p">]</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">aa_milne_arr</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[118]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([0, 2, 3], dtype=int64)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[118]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([3, 2, 0])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[118]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([&#39;pooh&#39;, &#39;rabbit&#39;, &#39;rabbit&#39;, &#39;pooh&#39;, &#39;piglet&#39;], dtype=&#39;&lt;U11&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="array_split"><code>array_split</code><a class="anchor-link" href="#array_split">&#182;</a></h2><p>Split an array into multiple sub-arrays.</p>
<p>将 arr 分成几个 subarr，返回<strong>列表</strong></p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">array_split</span><span class="p">(</span><span class="n">ary</span><span class="p">,</span> <span class="n">indices_or_sections</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
<p><strong>注意无法均分时的处理方式</strong> 与<code>numpy.split()</code>类似</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[119]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="n">np</span><span class="o">.</span><span class="n">array_split</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">array_split</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[119]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[array([[0, 1, 2, 3]]), array([[4, 5, 6, 7]]), array([[ 8,  9, 10, 11]])]</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[119]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[array([[0, 1, 2, 3],
        [4, 5, 6, 7]]), array([[ 8,  9, 10, 11]])]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[120]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">array_split</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">array_split</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[120]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[array([[0, 1],
        [4, 5],
        [8, 9]]), array([[ 2,  3],
        [ 6,  7],
        [10, 11]])]</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[120]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[array([[0, 1],
        [4, 5],
        [8, 9]]), array([[ 2],
        [ 6],
        [10]]), array([[ 3],
        [ 7],
        [11]])]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="numpy.linalg.norm"><code>numpy.linalg.norm</code><a class="anchor-link" href="#numpy.linalg.norm">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Matrix or vector norm.</p>
<p>返回各种范数</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">ord</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">keepdims</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
<ul>
<li><a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.norm.html">https://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.norm.html</a></li>
<li><a href="https://docs.scipy.org/doc/numpy/reference/routines.linalg.html">Algebra Routine</a></li>
</ul>

<pre><code>ord norm for matrices   norm for vectors
None    Frobenius norm  2-norm
‘fro’   Frobenius norm  –
‘nuc’   nuclear norm    –
inf max(sum(abs(x), axis=1))    max(abs(x))
-inf    min(sum(abs(x), axis=1))    min(abs(x))
0   –   sum(x != 0)
1   max(sum(abs(x), axis=0))    as below
-1  min(sum(abs(x), axis=0))    as below
2   2-norm (largest sing. value)    as below
-2  smallest singular value as below
other   –   sum(abs(x)**ord)**(1./ord)

The Frobenius norm is given by:

</code></pre>
$$
||A||_F = [\sum_{i,j} abs(a_{i,j})^2]^{1/2}
$$
<pre><code>The nuclear norm is the sum of the singular values.</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[121]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">numpy</span> <span class="k">import</span> <span class="n">linalg</span> <span class="k">as</span> <span class="n">LA</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span> <span class="o">-</span> <span class="mi">4</span>
<span class="n">A</span>

<span class="n">B</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">B</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[121]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([-4, -3, -2, -1,  0,  1,  2,  3,  4])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[121]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[-4, -3, -2],
       [-1,  0,  1],
       [ 2,  3,  4]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[122]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">LA</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="n">LA</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
<span class="n">LA</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="s1">&#39;fro&#39;</span><span class="p">)</span>
<span class="n">LA</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">)</span>
<span class="n">LA</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">)</span>
<span class="n">LA</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">)</span>
<span class="n">LA</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[122]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>7.745966692414834</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[122]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>7.745966692414834</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[122]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>7.745966692414834</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[122]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>4.0</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[122]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>9.0</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[122]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>0.0</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[122]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>2.0</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="bincount"><code>bincount</code><a class="anchor-link" href="#bincount">&#182;</a></h2><p>Count number of occurrences of each value in array of non-negative ints.</p>
<p>返回从0到x中最大元素之间所有整数的出现次数，没出现的补 0，如果给定了weights，则计数不是按次数而是按照weights计算。</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">bincount</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">minlength</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
<p><strong>输入必须为int</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[123]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">bincount</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>

<span class="n">np</span><span class="o">.</span><span class="n">bincount</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">]))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[123]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([1, 1, 1, 1, 1], dtype=int64)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[123]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([1, 3, 1, 1, 0, 0, 0, 1], dtype=int64)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[124]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">23</span><span class="p">])</span>

<span class="n">np</span><span class="o">.</span><span class="n">bincount</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span><span class="o">.</span><span class="n">size</span>
<span class="n">np</span><span class="o">.</span><span class="n">bincount</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[124]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>24</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[124]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="unique"><code>unique</code><a class="anchor-link" href="#unique">&#182;</a></h2><p>Find the unique elements of an array.</p>
<p>剔除ndarray中重复的元素，返回<strong>排序后的</strong>unique元素（1-D）</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">ar</span><span class="p">,</span> <span class="n">return_index</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">return_inverse</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">return_counts</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
<p>默认<code>axis=None</code>, <code>return_index</code>控制是否返回unique元素<strong>相对原始ndarray的“坐标”</strong>，<code>return_inverse</code>控制是否返回原始ndarray<strong>相对unique元素的“坐标”</strong><code>counts</code>控制是否返回计数</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[125]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]])</span>
<span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[125]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([1, 2, 3, 4])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>指定了axis之后，<strong>是否unique则按指定维度进行判断</strong>，若<code>axis=0</code>则返回unique的行（2-D情况下）</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[126]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]])</span>
<span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[126]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[1, 0, 0],
       [2, 3, 4],
       [3, 0, 0]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[127]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]])</span>
<span class="n">u</span><span class="p">,</span> <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">return_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">u</span>
<span class="n">indices</span>

<span class="n">arr</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">unravel_index</span><span class="p">(</span><span class="n">indices</span><span class="p">,</span> <span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">)]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[127]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([1, 2, 3, 4])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[127]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([0, 1, 4, 5], dtype=int64)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[127]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([1, 2, 3, 4])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>return_inverse 控制是否返回相<strong>完整的，相对 unique 元素的 indice</strong> 可用于重新构造原始 ndarray</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[128]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">u</span><span class="p">,</span> <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">return_inverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">u</span>
<span class="n">indices</span>

<span class="n">u</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[128]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([1, 2, 3, 4])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[128]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([0, 1, 0, 1, 2, 3], dtype=int64)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[128]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[1, 2, 1],
       [2, 3, 4]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>counts 控制是否返回计数</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[129]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">u</span><span class="p">,</span> <span class="n">counts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">return_counts</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">u</span>
<span class="n">counts</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[129]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([1, 2, 3, 4])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[129]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([2, 2, 1, 1], dtype=int64)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="hypot"><code>hypot</code><a class="anchor-link" href="#hypot">&#182;</a></h2><p>Given the “legs” of a right triangle, return its hypotenuse.</p>
<p>已知两条直角边，计算斜边</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">hypot</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="o">/</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">casting</span><span class="o">=</span><span class="s1">&#39;same_kind&#39;</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="s1">&#39;K&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">subok</span><span class="o">=</span><span class="bp">True</span><span class="p">[,</span> <span class="n">signature</span><span class="p">,</span> <span class="n">extobj</span><span class="p">])</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[130]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">hypot</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)),</span> <span class="mi">4</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[130]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[5., 5., 5.],
       [5., 5., 5.],
       [5., 5., 5.]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="unravel_index"><code>unravel_index</code><a class="anchor-link" href="#unravel_index">&#182;</a></h2><p>Converts a flat index or array of flat indices into a tuple of coordinate arrays.</p>
<p><strong>将一维化“坐标”转换为一组反直觉“坐标”（列表），即列表中的每一项（ndarray）对应一个维度。</strong></p>
<div class="highlight"><pre><span></span><span class="n">unravel_index</span><span class="p">(</span><span class="n">indices</span><span class="p">,</span> <span class="n">shape</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[131]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">unravel_index</span><span class="p">([</span><span class="mi">22</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">37</span><span class="p">],</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>

<span class="n">np</span><span class="o">.</span><span class="n">unravel_index</span><span class="p">([</span><span class="mi">1621</span><span class="p">,</span> <span class="mi">1929</span><span class="p">],</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[131]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(array([3, 6, 6], dtype=int64), array([4, 5, 1], dtype=int64))</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[131]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(array([3, 3], dtype=int64),
 array([1, 5], dtype=int64),
 array([4, 6], dtype=int64),
 array([1, 3], dtype=int64))</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[132]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span>

<span class="n">np</span><span class="o">.</span><span class="n">unravel_index</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[132]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(array([  0,   0,   1, ..., 998, 999, 999], dtype=int64),
 array([0, 1, 0, ..., 1, 0, 1], dtype=int64))</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="NumPy-&#25968;&#25454;&#31867;&#22411;&#19968;&#35272;&#34920;">NumPy &#25968;&#25454;&#31867;&#22411;&#19968;&#35272;&#34920;<a class="anchor-link" href="#NumPy-&#25968;&#25454;&#31867;&#22411;&#19968;&#35272;&#34920;">&#182;</a></h2>
<pre><code>Type    Name    Bytes   Description
bool    b   1   Boolean (True or False) stored as a byte
int l   4-8 Platform (long) integer (normally either int32 or int64)
intp    p   4-8 Integer used for indexing (normally either int32 or int64)
int8    i1  1   Byte (-128 to 127)
int16   i2  2   Integer (-32768 to 32767)
int32   i4  4   Integer (-2147483648 to 2147483647)
int64   i8  8   Integer (-9223372036854775808 to 9223372036854775807)
uint8   u1  1   Unsigned integer (0 to 255)
uint16  u2  2   Unsigned integer (0 to 65535)
uint32  u4  4   Unsigned integer (0 to 4294967295)
uint64  u8  8   Unsigned integer (0 to 18446744073709551615)
float   f8  8   Shorthand for float64
float16 f2  2   Half precision float: sign bit, 5 bits exponent, 10 bits mantissa
float32 f   4   Single precision float: sign bit, 8 bits exponent, 23 bits mantissa
float64 d   8   Double precision float: sign bit, 11 bits exponent, 52 bits mantissa
complex c16 16  Shorthand for complex128.
complex64   c8  8   Complex number, represented by two 32-bit floats
complex128  c16 16  Complex number, represented by two 64-bit floats</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="&#29305;&#23450;&#20219;&#21153;">&#29305;&#23450;&#20219;&#21153;<a class="anchor-link" href="#&#29305;&#23450;&#20219;&#21153;">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="ndarray&#23548;&#20837;&#19982;&#23548;&#20986;">ndarray&#23548;&#20837;&#19982;&#23548;&#20986;<a class="anchor-link" href="#ndarray&#23548;&#20837;&#19982;&#23548;&#20986;">&#182;</a></h2><p>NumPy 提供了多种应对各种情况的导入导出方式，<strong>官方推荐使用 save 和 load 函数进行导入导出 npy 文件，npy 格式支持一键导入导出，无需额外设置，导出啥样导入还是啥样，无缝衔接</strong></p>
<h3 id="&#23548;&#20986;">&#23548;&#20986;<a class="anchor-link" href="#&#23548;&#20986;">&#182;</a></h3><h4 id="savetxt">savetxt<a class="anchor-link" href="#savetxt">&#182;</a></h4><p>Save an array to a text file.</p>
<p>将 ndarray 保存为文本文件</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%.18e</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">footer</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">comments</span><span class="o">=</span><span class="s1">&#39;# &#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
<p>savetxt 默认导出格式为科学计数</p>
<p><strong>使用 savetxt 保存数据时，最好指定编码格式 encoding，同时可以指定 header，comments 和 encoding</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[133]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="c1"># 导出为 csv</span>
<span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="s1">&#39;data/output.csv&#39;</span><span class="p">,</span> <span class="n">arr</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
           <span class="n">comments</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>  <span class="c1"># float 格式</span>

<span class="c1"># 导出为 txt</span>
<span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="s1">&#39;data/output.txt&#39;</span><span class="p">,</span> <span class="n">arr</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">,</span>
           <span class="n">header</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">comments</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="tofile">tofile<a class="anchor-link" href="#tofile">&#182;</a></h4><p>Write array to a file as text or binary (default).</p>
<p>将ndarray以文本或二进制格式写入文件</p>
<div class="highlight"><pre><span></span><span class="n">ndarray</span><span class="o">.</span><span class="n">tofile</span><span class="p">(</span><span class="n">fid</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
<p>默认为二进制形式</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[134]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span>
    <span class="p">(</span><span class="mi">2</span><span class="p">,),</span> <span class="n">dtype</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="p">[(</span><span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;sec&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)]),</span> <span class="p">(</span><span class="s1">&#39;temp&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)])</span>

<span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;time&#39;</span><span class="p">][</span><span class="s1">&#39;min&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">arr</span><span class="p">[</span><span class="s1">&#39;temp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">98.25</span>
<span class="n">arr</span>

<span class="n">arr</span><span class="o">.</span><span class="n">tofile</span><span class="p">(</span><span class="s1">&#39;data/temp.b&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[134]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([((10, 0), 98.25), (( 0, 0), 98.25)],
      dtype=[(&#39;time&#39;, [(&#39;min&#39;, &#39;&lt;i4&#39;), (&#39;sec&#39;, &#39;&lt;i4&#39;)]), (&#39;temp&#39;, &#39;&lt;f8&#39;)])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="np.save">np.save<a class="anchor-link" href="#np.save">&#182;</a></h4><p>Save an array to a binary file in NumPy .npy format.</p>
<p>把ndarray保存为npy文件</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">arr</span><span class="p">,</span> <span class="n">allow_pickle</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">fix_imports</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[135]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;data/output.npy&quot;</span><span class="p">,</span> <span class="n">arr</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#23548;&#20837;">&#23548;&#20837;<a class="anchor-link" href="#&#23548;&#20837;">&#182;</a></h3><h4 id="loadtxt">loadtxt<a class="anchor-link" href="#loadtxt">&#182;</a></h4><p>Load data from a text file.</p>
<p>从文本文件中读取数据</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">float</span><span class="s1">&#39;&gt;, comments=&#39;</span><span class="c1">#&#39;, delimiter=None, converters=None, skiprows=0, usecols=None, unpack=False, ndmin=0, encoding=&#39;bytes&#39;)</span>
</pre></div>
<p>每行的数值必须个数相同</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[136]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s1">&#39;data/output.csv&#39;</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s1">&#39;data/output.txt&#39;</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[136]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0.,  1.,  2.,  3.],
       [ 4.,  5.,  6.,  7.],
       [ 8.,  9., 10., 11.]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[136]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0.,  1.,  2.,  3.],
       [ 4.,  5.,  6.,  7.],
       [ 8.,  9., 10., 11.]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="genfromtxt">genfromtxt<a class="anchor-link" href="#genfromtxt">&#182;</a></h4><p>Load data from a text file, with missing values handled as specified.</p>
<p>从文本文件读取数据，缺失值特别处理</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">genfromtxt</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">float</span><span class="s1">&#39;&gt;, comments=&#39;</span><span class="c1">#&#39;, delimiter=None, skip_header=0, skip_footer=0, converters=None, missing_values=None, filling_values=None, usecols=None, names=None, excludelist=None, deletechars=None, replace_space=&#39;_&#39;, autostrip=False, case_sensitive=True, defaultfmt=&#39;f%i&#39;, unpack=None, usemask=False, loose=True, invalid_raise=True, max_rows=None, encoding=&#39;bytes&#39;)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[137]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">genfromtxt</span><span class="p">(</span><span class="s1">&#39;data/output.csv&#39;</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">genfromtxt</span><span class="p">(</span><span class="s1">&#39;data/output.txt&#39;</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[137]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0.,  1.,  2.,  3.],
       [ 4.,  5.,  6.,  7.],
       [ 8.,  9., 10., 11.]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[137]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0.,  1.,  2.,  3.],
       [ 4.,  5.,  6.,  7.],
       [ 8.,  9., 10., 11.]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="fromfile">fromfile<a class="anchor-link" href="#fromfile">&#182;</a></h4><p>Construct an array from data in a text or binary file.</p>
<p>从文本文件或二进制文件中读取数据</p>
<p><code>numpy.fromfile(file, dtype=float, count=-1, sep='')</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[138]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">fromfile</span><span class="p">(</span><span class="s2">&quot;data/temp.b&quot;</span><span class="p">,</span>
            <span class="n">dtype</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="p">[(</span><span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;sec&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)]),</span> <span class="p">(</span><span class="s1">&#39;temp&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[138]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([((10, 0), 98.25), (( 0, 0), 98.25)],
      dtype=[(&#39;time&#39;, [(&#39;min&#39;, &#39;&lt;i4&#39;), (&#39;sec&#39;, &#39;&lt;i4&#39;)]), (&#39;temp&#39;, &#39;&lt;f8&#39;)])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="np.load">np.load<a class="anchor-link" href="#np.load">&#182;</a></h4><p>Load arrays or pickled objects from .npy, .npz or pickled files.</p>
<p>从 npy npz 或 pickle文件中读取 ndarray 对象</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">load</span><span class="p">(</span>
    <span class="p">[</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="s1">&#39;mmap_mode=None&#39;</span><span class="p">,</span> <span class="s1">&#39;allow_pickle=True&#39;</span><span class="p">,</span> <span class="s1">&#39;fix_imports=True&#39;</span><span class="p">,</span> <span class="s2">&quot;encoding=&#39;ASCII&#39;&quot;</span><span class="p">],</span>
<span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[139]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;data/output.npy&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[139]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([((10, 0), 98.25), (( 0, 0), 98.25)],
      dtype=[(&#39;time&#39;, [(&#39;min&#39;, &#39;&lt;i4&#39;), (&#39;sec&#39;, &#39;&lt;i4&#39;)]), (&#39;temp&#39;, &#39;&lt;f8&#39;)])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#20132;&#25442;ndarray&#30340;&#36724;[&#24191;&#20041;&#36716;&#32622;]">&#20132;&#25442;ndarray&#30340;&#36724;[&#24191;&#20041;&#36716;&#32622;]<a class="anchor-link" href="#&#20132;&#25442;ndarray&#30340;&#36724;[&#24191;&#20041;&#36716;&#32622;]">&#182;</a></h2><p>Permute the dimensions of an array.</p>
<p>交换ndarray的维度，<strong>返回视图</strong></p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[140]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">arr</span>

<span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>  <span class="c1"># 完全倒置</span>
<span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[140]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[ 0,  1,  2,  3],
        [ 4,  5,  6,  7],
        [ 8,  9, 10, 11]],

       [[12, 13, 14, 15],
        [16, 17, 18, 19],
        [20, 21, 22, 23]]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[140]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[ 0, 12],
        [ 4, 16],
        [ 8, 20]],

       [[ 1, 13],
        [ 5, 17],
        [ 9, 21]],

       [[ 2, 14],
        [ 6, 18],
        [10, 22]],

       [[ 3, 15],
        [ 7, 19],
        [11, 23]]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[140]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(4, 3, 2)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[141]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[141]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[ 0,  1,  2,  3],
        [12, 13, 14, 15]],

       [[ 4,  5,  6,  7],
        [16, 17, 18, 19]],

       [[ 8,  9, 10, 11],
        [20, 21, 22, 23]]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[141]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(3, 2, 4)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[142]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[142]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[ 0,  4,  8],
        [ 1,  5,  9],
        [ 2,  6, 10],
        [ 3,  7, 11]],

       [[12, 16, 20],
        [13, 17, 21],
        [14, 18, 22],
        [15, 19, 23]]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[142]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(2, 4, 3)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="NumPy&#21521;&#37327;&#21270;&#32534;&#31243;">NumPy&#21521;&#37327;&#21270;&#32534;&#31243;<a class="anchor-link" href="#NumPy&#21521;&#37327;&#21270;&#32534;&#31243;">&#182;</a></h2><p>参考：</p>
<ul>
<li><a href="https://docs.scipy.org/doc/numpy-dev/reference/routines.functional.html">NumPy Functional programming</a></li>
</ul>
<p>NumPy 函数式编程主要有以下几种方式</p>
<ul>
<li><code>apply_along_axis(func1d, axis, arr, *args, ...)</code> Apply a function to 1-D slices along the given axis.</li>
<li><code>apply_over_axes(func, a, axes)</code>  Apply a function repeatedly over multiple axes.</li>
<li><code>vectorize(pyfunc[, otypes, doc, excluded, ...])</code> Generalized function class.</li>
<li><code>frompyfunc(func, nin, nout)</code> Takes an arbitrary Python function and returns a NumPy ufunc.</li>
<li><code>piecewise(x, condlist, funclist, *args, **kw)</code>   Evaluate a piecewise-defined function.</li>
</ul>
<h3 id="numpy.vectorize"><code>numpy.vectorize</code><a class="anchor-link" href="#numpy.vectorize">&#182;</a></h3><p><code>class numpy.vectorize(pyfunc, otypes=None, doc=None, excluded=None, cache=False, signature=None)</code></p>
<p>Define a vectorized function which takes a nested sequence of objects or numpy arrays as inputs and returns an single or tuple of numpy array as output. The vectorized function evaluates pyfunc over successive tuples of the input arrays like the python map function, except it uses the broadcasting rules of numpy.</p>
<p>基于输入的 python func 返回一个向量化的函数</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[143]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">myfunc</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="s2">&quot;Return a-b if a&gt;b, otherwise return a+b&quot;</span>
    <span class="k">if</span> <span class="n">a</span> <span class="o">&gt;</span> <span class="n">b</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>


<span class="n">vfunc</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vectorize</span><span class="p">(</span><span class="n">myfunc</span><span class="p">)</span>
<span class="n">vfunc</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[143]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([3, 4, 1, 2])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#32473;ndarray&#22686;&#21152;&#26032;&#30340;&#32500;&#24230;">&#32473;ndarray&#22686;&#21152;&#26032;&#30340;&#32500;&#24230;<a class="anchor-link" href="#&#32473;ndarray&#22686;&#21152;&#26032;&#30340;&#32500;&#24230;">&#182;</a></h2><h3 id="&#20351;&#29992;-newaxis-&#25110;&#32773;-None">&#20351;&#29992; newaxis &#25110;&#32773; None<a class="anchor-link" href="#&#20351;&#29992;-newaxis-&#25110;&#32773;-None">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[144]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">numpy</span> <span class="k">import</span> <span class="n">newaxis</span>

<span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">arr</span><span class="o">.</span><span class="n">shape</span>

<span class="n">arr</span><span class="p">[:,</span> <span class="n">newaxis</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
<span class="n">arr</span><span class="p">[:,</span> <span class="kc">None</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>

<span class="n">arr</span><span class="p">[</span><span class="n">newaxis</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">shape</span>
<span class="n">arr</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[144]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(3, 4)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[144]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(3, 1, 4)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[144]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(3, 1, 4)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[144]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(1, 3, 4)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[144]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(1, 3, 4)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#20351;&#29992;reshape">&#20351;&#29992;<code>reshape</code><a class="anchor-link" href="#&#20351;&#29992;reshape">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[145]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">arr</span><span class="o">.</span><span class="n">shape</span>

<span class="n">arr</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span><span class="o">.</span><span class="n">shape</span>
<span class="n">arr</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[145]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(3, 4)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[145]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(2, 2, 3)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[145]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(2, 3, 2)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#33258;&#23450;&#20041;-dtype">&#33258;&#23450;&#20041; dtype<a class="anchor-link" href="#&#33258;&#23450;&#20041;-dtype">&#182;</a></h2><p>创建 array 时自定义 dtype 类型</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[146]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">custom_ndarray</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;position&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
                                    <span class="p">(</span><span class="s1">&#39;size&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                                    <span class="p">(</span><span class="s1">&#39;growth&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                                    <span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                                    <span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span>
<span class="n">custom_ndarray</span>
<span class="n">custom_ndarray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">custom_ndarray</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;position&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[146]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([([0., 0.], 0., 0., [0., 0., 0., 0.], &#39;&#39;),
       ([0., 0.], 0., 0., [0., 0., 0., 0.], &#39;&#39;),
       ([0., 0.], 0., 0., [0., 0., 0., 0.], &#39;&#39;),
       ([0., 0.], 0., 0., [0., 0., 0., 0.], &#39;&#39;),
       ([0., 0.], 0., 0., [0., 0., 0., 0.], &#39;&#39;)],
      dtype=[(&#39;position&#39;, &#39;&lt;f8&#39;, (2,)), (&#39;size&#39;, &#39;&lt;f8&#39;), (&#39;growth&#39;, &#39;&lt;f8&#39;), (&#39;color&#39;, &#39;&lt;f8&#39;, (4,)), (&#39;name&#39;, &#39;&lt;U1&#39;)])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[146]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>([0., 0.], 0., 0., [0., 0., 0., 0.], &#39;&#39;)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[146]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([0., 0.])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#33719;&#21462;ndarray&#20013;&#20986;&#29616;&#27425;&#25968;&#26368;&#22810;&#30340;&#20803;&#32032;">&#33719;&#21462;ndarray&#20013;&#20986;&#29616;&#27425;&#25968;&#26368;&#22810;&#30340;&#20803;&#32032;<a class="anchor-link" href="#&#33719;&#21462;ndarray&#20013;&#20986;&#29616;&#27425;&#25968;&#26368;&#22810;&#30340;&#20803;&#32032;">&#182;</a></h2><p>参考：<a href="https://stackoverflow.com/questions/12297016/how-to-find-most-frequent-values-in-numpy-ndarray">https://stackoverflow.com/questions/12297016/how-to-find-most-frequent-values-in-numpy-ndarray</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="1&#32500;">1&#32500;<a class="anchor-link" href="#1&#32500;">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[147]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="n">u</span><span class="p">,</span> <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">return_inverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">u</span>
<span class="n">indices</span>

<span class="n">count</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">bincount</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
<span class="n">count</span>

<span class="n">u</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">count</span><span class="p">)]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[147]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([-6, -2, -1,  0,  1,  4,  5])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[147]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([6, 5, 1, 4, 1, 3, 5, 5, 0, 2], dtype=int64)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[147]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([1, 2, 1, 1, 1, 3, 1], dtype=int64)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[147]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>4</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#22810;&#32500;">&#22810;&#32500;<a class="anchor-link" href="#&#22810;&#32500;">&#182;</a></h3><p>获取某一维度上出现次数最多的元素</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[148]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span>
                <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span>  <span class="mi">8</span><span class="p">]])</span>

<span class="n">u</span><span class="p">,</span> <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">return_inverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">u</span>
<span class="n">indices</span>


<span class="c1"># 这里需要指定 bincount 的 minlenghth</span>
<span class="n">counted</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">apply_along_axis</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">bincount</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">indices</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">),</span>
                              <span class="kc">None</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">counted</span>

<span class="n">u</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">counted</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[148]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([-6, -2, -1,  0,  1,  2,  3,  4,  5,  6,  7,  8])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[148]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([ 8,  8,  8,  8,  1,  3,  7,  7,  0,  2,  3,  4,  4,  5,  6,  7,  8,
        9, 10, 11], dtype=int64)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[148]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[1, 1, 1, 1, 0, 0, 0, 2, 4, 0, 0, 0],
       [0, 0, 0, 1, 2, 1, 1, 1, 1, 1, 1, 1]], dtype=int64)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[148]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([5, 1])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="ndarray&#36716;&#25442;&#20026;DataFrame&#65288;&#22810;&#32500;-&gt;2&#32500;&#65289;">ndarray&#36716;&#25442;&#20026;DataFrame&#65288;&#22810;&#32500;-&gt;2&#32500;&#65289;<a class="anchor-link" href="#ndarray&#36716;&#25442;&#20026;DataFrame&#65288;&#22810;&#32500;-&gt;2&#32500;&#65289;">&#182;</a></h2><p>多维ndarray从数据结构上来说是比较高效的，但如果需要使用Pandas进行一些复杂的数据处理则有些麻烦，因为Pandas处理的数据本质是2-D的（虽然可以使用MultiIndex），此时需要将ndarray中多余的维度坍缩到2-D的DataFrame中。</p>
<h3 id="&#27604;&#36739;&#20445;&#23432;&#30340;&#36716;&#25442;">&#27604;&#36739;&#20445;&#23432;&#30340;&#36716;&#25442;<a class="anchor-link" href="#&#27604;&#36739;&#20445;&#23432;&#30340;&#36716;&#25442;">&#182;</a></h3><p>现有维度为 (50, 100, 3) 的数据，第一维度对应时间t，第二维度对应个体ID，第三维度对应个体坐标 x,y,z。</p>
<p>若使用Pandas进行处理，第一种转换方式是将ndarray转换为(5000, 5)的二维DataFrame，其中5000对应50x100，第二维度在x,y,z基础上增加两列t和ID，则列标签分别为t, ID, x, y, z.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[149]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;data/sample.npy&quot;</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">shape</span>
<span class="n">data</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[149]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(50, 100, 3)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[149]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[ 2.42442956e+02,  7.76911920e+01,  6.64777151e-01],
        [ 2.61380074e+02,  2.01793185e+02,  2.94516922e+00],
        [ 4.12767690e+02,  1.35482822e+02, -4.92483385e-01],
        ...,
        [ 4.10753164e+02,  2.02361917e+02, -1.47121999e-01],
        [ 2.69633830e+02,  2.68148789e+02,  1.27458590e+00],
        [ 3.30322105e+02,  1.75890005e+02, -7.97956043e-01]],

       [[ 2.45365704e+02,  7.83676099e+01,  2.27428156e-01],
        [ 2.58458717e+02,  2.02475590e+02,  2.91211536e+00],
        [ 4.14913593e+02,  1.33386372e+02, -7.73741839e-01],
        ...,
        [ 4.11856535e+02,  1.99572191e+02, -1.19416454e+00],
        [ 2.70467390e+02,  2.71030660e+02,  1.28923763e+00],
        [ 3.32290845e+02,  1.73626366e+02, -8.54962584e-01]],

       [[ 2.48239647e+02,  7.75071160e+01, -2.90917521e-01],
        [ 2.55461149e+02,  2.02596349e+02, -3.18185644e+00],
        [ 4.17462899e+02,  1.31804904e+02, -5.55250026e-01],
        ...,
        [ 4.09707081e+02,  1.97479383e+02, -2.36954656e+00],
        [ 2.68405895e+02,  2.73210163e+02,  2.32837616e+00],
        [ 3.33943130e+02,  1.71122378e+02, -9.87520127e-01]],

       ...,

       [[ 3.56975004e+02,  5.97239259e+00, -5.75102134e-01],
        [ 1.30143542e+02,  1.64376675e+02, -2.87853593e+00],
        [ 4.74988523e+02,  1.15517297e+01, -8.53119091e-01],
        ...,
        [ 4.27604192e+02,  8.84718553e+01, -7.13370919e-01],
        [ 1.53469992e+02,  2.17281949e+02, -3.01382082e+00],
        [ 3.95602341e+02,  5.33207351e+01, -9.52802521e-01]],

       [[ 3.58316991e+02,  3.28928418e+00, -1.10701967e+00],
        [ 1.27151855e+02,  1.64599848e+02, -3.21605251e+00],
        [ 4.75983562e+02,  8.72155337e+00, -1.23271295e+00],
        ...,
        [ 4.29080172e+02,  8.58600584e+01, -1.05641846e+00],
        [ 1.50495321e+02,  2.16892942e+02, -3.01155720e+00],
        [ 3.97560036e+02,  5.10475365e+01, -8.59831857e-01]],

       [[ 3.60269963e+02,  1.01202655e+00, -8.61907762e-01],
        [ 1.24279619e+02,  1.63733672e+02, -2.84869734e+00],
        [ 4.77039363e+02,  5.91347873e+00, -1.21116002e+00],
        ...,
        [ 4.31150993e+02,  8.36894137e+01, -8.08928892e-01],
        [ 1.47569414e+02,  2.16230318e+02, -2.91888170e+00],
        [ 3.99619625e+02,  4.88662316e+01, -8.14090703e-01]]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[150]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">dim_1</span><span class="p">,</span> <span class="n">dim_2</span><span class="p">,</span> <span class="n">dim_3</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span>

<span class="c1"># 生成用于填充新增维度的数值</span>
<span class="n">indice</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_product</span><span class="p">(</span>
    <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">dim_1</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">dim_2</span><span class="p">)],</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="s1">&#39;ID&#39;</span><span class="p">])</span>
<span class="n">indice</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[150]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>MultiIndex(levels=[[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49], [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99]],
           labels=[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49], [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99]],
           names=[&#39;t&#39;, &#39;ID&#39;])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[151]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">dim_3</span><span class="p">))</span>
<span class="n">data</span><span class="o">.</span><span class="n">shape</span>
<span class="n">data</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[151]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(5000, 3)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[151]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[242.44295567,  77.69119197,   0.66477715],
       [261.38007362, 201.79318451,   2.94516922],
       [412.76769009, 135.48282173,  -0.49248338],
       ...,
       [431.15099334,  83.68941366,  -0.80892889],
       [147.56941378, 216.23031823,  -2.9188817 ],
       [399.61962538,  48.86623161,  -0.8140907 ]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>转换为 DataFrame</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[152]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">indice</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">])</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[152]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>x</th>
      <th>y</th>
      <th>z</th>
    </tr>
    <tr>
      <th>t</th>
      <th>ID</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">0</th>
      <th>0</th>
      <td>242.442956</td>
      <td>77.691192</td>
      <td>0.664777</td>
    </tr>
    <tr>
      <th>1</th>
      <td>261.380074</td>
      <td>201.793185</td>
      <td>2.945169</td>
    </tr>
    <tr>
      <th>2</th>
      <td>412.767690</td>
      <td>135.482822</td>
      <td>-0.492483</td>
    </tr>
    <tr>
      <th>3</th>
      <td>135.073158</td>
      <td>406.116724</td>
      <td>2.671991</td>
    </tr>
    <tr>
      <th>4</th>
      <td>235.803192</td>
      <td>187.694907</td>
      <td>2.775133</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>转换为更“朴素”的形式</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[153]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[153]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>t</th>
      <th>ID</th>
      <th>x</th>
      <th>y</th>
      <th>z</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>0</td>
      <td>242.442956</td>
      <td>77.691192</td>
      <td>0.664777</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0</td>
      <td>1</td>
      <td>261.380074</td>
      <td>201.793185</td>
      <td>2.945169</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0</td>
      <td>2</td>
      <td>412.767690</td>
      <td>135.482822</td>
      <td>-0.492483</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0</td>
      <td>3</td>
      <td>135.073158</td>
      <td>406.116724</td>
      <td>2.671991</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0</td>
      <td>4</td>
      <td>235.803192</td>
      <td>187.694907</td>
      <td>2.775133</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="&#34917;&#20805;&#65306;&#21033;&#29992;stack&#21387;&#32553;&#21015;&#26631;&#31614;&#65292;&#36716;&#25442;&#20026;&#28608;&#36827;&#22411;">&#34917;&#20805;&#65306;&#21033;&#29992;<code>stack</code>&#21387;&#32553;&#21015;&#26631;&#31614;&#65292;&#36716;&#25442;&#20026;&#28608;&#36827;&#22411;<a class="anchor-link" href="#&#34917;&#20805;&#65306;&#21033;&#29992;stack&#21387;&#32553;&#21015;&#26631;&#31614;&#65292;&#36716;&#25442;&#20026;&#28608;&#36827;&#22411;">&#182;</a></h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[154]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ses</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">stack</span><span class="p">()</span> <span class="c1"># 将“x” “y”“z” 压缩进index中</span>
<span class="n">ses</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[154]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>t  ID   
0  0   x    242.442956
       y     77.691192
       z      0.664777
   1   x    261.380074
       y    201.793185
dtype: float64</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[155]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ses</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span>
<span class="n">ses</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s2">&quot;cat&quot;</span><span class="p">]</span> <span class="c1"># 增补类型名</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">ses</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">ses</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">])</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[155]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>FrozenList([&#39;t&#39;, &#39;ID&#39;, None])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[155]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th></th>
      <th>value</th>
    </tr>
    <tr>
      <th>t</th>
      <th>ID</th>
      <th>cat</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">0</th>
      <th rowspan="3" valign="top">0</th>
      <th>x</th>
      <td>242.442956</td>
    </tr>
    <tr>
      <th>y</th>
      <td>77.691192</td>
    </tr>
    <tr>
      <th>z</th>
      <td>0.664777</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">1</th>
      <th>x</th>
      <td>261.380074</td>
    </tr>
    <tr>
      <th>y</th>
      <td>201.793185</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>转换为更“朴素”的形式</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[156]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[156]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>t</th>
      <th>ID</th>
      <th>cat</th>
      <th>value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>0</td>
      <td>x</td>
      <td>242.442956</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0</td>
      <td>0</td>
      <td>y</td>
      <td>77.691192</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0</td>
      <td>0</td>
      <td>z</td>
      <td>0.664777</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0</td>
      <td>1</td>
      <td>x</td>
      <td>261.380074</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0</td>
      <td>1</td>
      <td>y</td>
      <td>201.793185</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#27604;&#36739;&#28608;&#36827;&#30340;&#36716;&#25442;">&#27604;&#36739;&#28608;&#36827;&#30340;&#36716;&#25442;<a class="anchor-link" href="#&#27604;&#36739;&#28608;&#36827;&#30340;&#36716;&#25442;">&#182;</a></h3><p>如果更进一步，将最后一维的三个值也坍缩到新增维度里，即将 (50, 100, 3) 的数据转换为 (15000, 4) 的数据，对应列标签 t, ID, cat, value，其中 cat 中包含 x, y, z 三个种类，这种格式可能对各种Pandas处理是更普适的形式。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[157]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;data/sample.npy&quot;</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">shape</span>
<span class="n">data</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[157]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(50, 100, 3)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[157]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[ 2.42442956e+02,  7.76911920e+01,  6.64777151e-01],
        [ 2.61380074e+02,  2.01793185e+02,  2.94516922e+00],
        [ 4.12767690e+02,  1.35482822e+02, -4.92483385e-01],
        ...,
        [ 4.10753164e+02,  2.02361917e+02, -1.47121999e-01],
        [ 2.69633830e+02,  2.68148789e+02,  1.27458590e+00],
        [ 3.30322105e+02,  1.75890005e+02, -7.97956043e-01]],

       [[ 2.45365704e+02,  7.83676099e+01,  2.27428156e-01],
        [ 2.58458717e+02,  2.02475590e+02,  2.91211536e+00],
        [ 4.14913593e+02,  1.33386372e+02, -7.73741839e-01],
        ...,
        [ 4.11856535e+02,  1.99572191e+02, -1.19416454e+00],
        [ 2.70467390e+02,  2.71030660e+02,  1.28923763e+00],
        [ 3.32290845e+02,  1.73626366e+02, -8.54962584e-01]],

       [[ 2.48239647e+02,  7.75071160e+01, -2.90917521e-01],
        [ 2.55461149e+02,  2.02596349e+02, -3.18185644e+00],
        [ 4.17462899e+02,  1.31804904e+02, -5.55250026e-01],
        ...,
        [ 4.09707081e+02,  1.97479383e+02, -2.36954656e+00],
        [ 2.68405895e+02,  2.73210163e+02,  2.32837616e+00],
        [ 3.33943130e+02,  1.71122378e+02, -9.87520127e-01]],

       ...,

       [[ 3.56975004e+02,  5.97239259e+00, -5.75102134e-01],
        [ 1.30143542e+02,  1.64376675e+02, -2.87853593e+00],
        [ 4.74988523e+02,  1.15517297e+01, -8.53119091e-01],
        ...,
        [ 4.27604192e+02,  8.84718553e+01, -7.13370919e-01],
        [ 1.53469992e+02,  2.17281949e+02, -3.01382082e+00],
        [ 3.95602341e+02,  5.33207351e+01, -9.52802521e-01]],

       [[ 3.58316991e+02,  3.28928418e+00, -1.10701967e+00],
        [ 1.27151855e+02,  1.64599848e+02, -3.21605251e+00],
        [ 4.75983562e+02,  8.72155337e+00, -1.23271295e+00],
        ...,
        [ 4.29080172e+02,  8.58600584e+01, -1.05641846e+00],
        [ 1.50495321e+02,  2.16892942e+02, -3.01155720e+00],
        [ 3.97560036e+02,  5.10475365e+01, -8.59831857e-01]],

       [[ 3.60269963e+02,  1.01202655e+00, -8.61907762e-01],
        [ 1.24279619e+02,  1.63733672e+02, -2.84869734e+00],
        [ 4.77039363e+02,  5.91347873e+00, -1.21116002e+00],
        ...,
        [ 4.31150993e+02,  8.36894137e+01, -8.08928892e-01],
        [ 1.47569414e+02,  2.16230318e+02, -2.91888170e+00],
        [ 3.99619625e+02,  4.88662316e+01, -8.14090703e-01]]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[158]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">dim_1</span><span class="p">,</span> <span class="n">dim_2</span><span class="p">,</span> <span class="n">dim_3</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span>

<span class="c1"># 生成用于填充新增维度的数值</span>
<span class="n">indice</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_product</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">dim_1</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">dim_2</span><span class="p">),</span> <span class="p">[</span>
                                    <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">]],</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">])</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">indice</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">])</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[158]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th></th>
      <th>value</th>
    </tr>
    <tr>
      <th>t</th>
      <th>ID</th>
      <th>cat</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">0</th>
      <th rowspan="3" valign="top">0</th>
      <th>x</th>
      <td>242.442956</td>
    </tr>
    <tr>
      <th>y</th>
      <td>77.691192</td>
    </tr>
    <tr>
      <th>z</th>
      <td>0.664777</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">1</th>
      <th>x</th>
      <td>261.380074</td>
    </tr>
    <tr>
      <th>y</th>
      <td>201.793185</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>转换为更“朴素”的形式</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[159]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[159]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>t</th>
      <th>ID</th>
      <th>cat</th>
      <th>value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>0</td>
      <td>x</td>
      <td>242.442956</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0</td>
      <td>0</td>
      <td>y</td>
      <td>77.691192</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0</td>
      <td>0</td>
      <td>z</td>
      <td>0.664777</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0</td>
      <td>1</td>
      <td>x</td>
      <td>261.380074</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0</td>
      <td>1</td>
      <td>y</td>
      <td>201.793185</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="&#38382;&#39064;&#19982;&#20998;&#26512;">&#38382;&#39064;&#19982;&#20998;&#26512;<a class="anchor-link" href="#&#38382;&#39064;&#19982;&#20998;&#26512;">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="numpy.sort&#19982;numpy.argsort"><code>numpy.sort</code>&#19982;<code>numpy.argsort</code><a class="anchor-link" href="#numpy.sort&#19982;numpy.argsort">&#182;</a></h2><h3 id="numpy.sort"><code>numpy.sort</code><a class="anchor-link" href="#numpy.sort">&#182;</a></h3><p>Return a sorted copy of an array.</p>
<p>返回ndarray的排序<strong>副本</strong></p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;quicksort&#39;</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[160]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">]])</span>

<span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>  <span class="c1"># 对最后一维排序</span>

<span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>  <span class="c1"># 扁平化排序</span>

<span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># 沿指定轴排序</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[160]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[1, 4],
       [2, 3]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[160]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([2, 3, 4, 5])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[160]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([2, 3, 4, 5])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>按 key 排序</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[161]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dtype</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;S10&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;height&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)]</span>
<span class="n">values</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;Arthur&#39;</span><span class="p">,</span> <span class="mf">1.8</span><span class="p">,</span> <span class="mi">41</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Lancelot&#39;</span><span class="p">,</span> <span class="mf">1.9</span><span class="p">,</span> <span class="mi">38</span><span class="p">),</span>
          <span class="p">(</span><span class="s1">&#39;Galahad&#39;</span><span class="p">,</span> <span class="mf">1.7</span><span class="p">,</span> <span class="mi">38</span><span class="p">)]</span>

<span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">)</span>

<span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="s1">&#39;height&#39;</span><span class="p">)</span>

<span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;height&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[161]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([(b&#39;Galahad&#39;, 1.7, 38), (b&#39;Arthur&#39;, 1.8, 41),
       (b&#39;Lancelot&#39;, 1.9, 38)],
      dtype=[(&#39;name&#39;, &#39;S10&#39;), (&#39;height&#39;, &#39;&lt;f8&#39;), (&#39;age&#39;, &#39;&lt;i4&#39;)])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[161]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([(b&#39;Galahad&#39;, 1.7, 38), (b&#39;Lancelot&#39;, 1.9, 38),
       (b&#39;Arthur&#39;, 1.8, 41)],
      dtype=[(&#39;name&#39;, &#39;S10&#39;), (&#39;height&#39;, &#39;&lt;f8&#39;), (&#39;age&#39;, &#39;&lt;i4&#39;)])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="numpy.argsort"><code>numpy.argsort</code><a class="anchor-link" href="#numpy.argsort">&#182;</a></h3><p>Returns the indices that would sort an array.</p>
<p>返回排序后的ndarray元素在原始ndarray中对应的“坐标”</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;quicksort&#39;</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[162]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]])</span>
<span class="n">arr</span>

<span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>  <span class="c1"># 全排序 扁平化</span>
<span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># 按轴排序</span>
<span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[162]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[0, 3, 4],
       [2, 2, 2]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[162]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([0, 3, 4, 5, 1, 2], dtype=int64)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[162]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[0, 1, 1],
       [1, 0, 0]], dtype=int64)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[162]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[0, 1, 2],
       [0, 1, 2]], dtype=int64)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>通过indice构造排序后的ndarray(只适用于axis=None的情况)</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[163]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">indice</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unravel_index</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="kc">None</span><span class="p">),</span> <span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">indice</span>

<span class="n">arr</span><span class="p">[</span><span class="n">indice</span><span class="p">]</span>  <span class="c1"># 构造排序后的ndarray</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[163]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(array([0, 1, 1, 1, 0, 0], dtype=int64),
 array([0, 0, 1, 2, 1, 2], dtype=int64))</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[163]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([0, 2, 2, 2, 3, 4])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[164]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">indice</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unravel_index</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span> <span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">indice</span>

<span class="n">arr</span><span class="p">[</span><span class="n">indice</span><span class="p">]</span>  <span class="c1"># 和 np.sort(x, axis=0) 不同</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[164]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(array([[0, 0, 0],
        [0, 0, 0]], dtype=int64), array([[0, 1, 1],
        [1, 0, 0]], dtype=int64))</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[164]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[0, 3, 3],
       [3, 0, 0]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>正确通过indice构造排序后的ndarray(适用于axis不为None的情况)</strong></p>
<p>实际上就是补上其他维度的“坐标”</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[165]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">indice0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">indice0</span>

<span class="n">indice1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mgrid</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
<span class="n">indice1</span>

<span class="n">arr</span><span class="p">[</span><span class="n">indice0</span><span class="p">,</span> <span class="n">indice1</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[165]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[0, 1, 1],
       [1, 0, 0]], dtype=int64)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[165]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[0, 1, 2],
       [0, 1, 2]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[165]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[0, 2, 2],
       [2, 3, 4]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>按 key 排序</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[166]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)],</span> <span class="n">dtype</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;i4&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;i4&#39;</span><span class="p">)])</span>
<span class="n">arr</span>

<span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">))</span>
<span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[166]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([(1, 0), (0, 1)], dtype=[(&#39;x&#39;, &#39;&lt;i4&#39;), (&#39;y&#39;, &#39;&lt;i4&#39;)])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[166]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([1, 0], dtype=int64)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[166]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([0, 1], dtype=int64)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="outer"><code>outer</code><a class="anchor-link" href="#outer">&#182;</a></h2><p>Apply the ufunc op to all pairs (a, b) with a in A and b in B.</p>
<p>对输入中的所有a in A 和 b in B组合执行 ufunc</p>
<div class="highlight"><pre><span></span><span class="n">ufunc</span><span class="o">.</span><span class="n">outer</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
<p>执行机制类似于双层for循环</p>
<div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">empty</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">A</span><span class="p">),</span><span class="nb">len</span><span class="p">(</span><span class="n">B</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">A</span><span class="p">)):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">B</span><span class="p">)):</span>
        <span class="n">r</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">op</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">B</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="c1"># op = ufunc in question</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[167]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">B</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>

<span class="n">np</span><span class="o">.</span><span class="n">multiply</span><span class="o">.</span><span class="n">outer</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[167]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 4,  5,  6],
       [ 8, 10, 12],
       [12, 15, 18]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>维度比较复杂时</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[168]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]])</span>
<span class="n">A</span><span class="o">.</span><span class="n">shape</span>

<span class="n">B</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]])</span>
<span class="n">B</span><span class="o">.</span><span class="n">shape</span>

<span class="n">C</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">multiply</span><span class="o">.</span><span class="n">outer</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>
<span class="n">C</span>
<span class="n">C</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[168]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(2, 3)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[168]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(2, 2)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[168]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[[ 1,  2],
         [ 3,  4]],

        [[ 2,  4],
         [ 6,  8]],

        [[ 3,  6],
         [ 9, 12]]],


       [[[ 4,  8],
         [12, 16]],

        [[ 5, 10],
         [15, 20]],

        [[ 6, 12],
         [18, 24]]]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[168]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(2, 3, 2, 2)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[169]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">C</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>

<span class="n">A</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">B</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[169]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>20</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[169]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>20</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>(2,3)  (2,2) -&gt; (2,3,2,2)</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="numpy.where,numpy.nonzero&#21644;numpy.argwhere"><code>numpy.where</code>,<code>numpy.nonzero</code>&#21644;<code>numpy.argwhere</code><a class="anchor-link" href="#numpy.where,numpy.nonzero&#21644;numpy.argwhere">&#182;</a></h2><p><strong><code>where</code>与<code>argwhere</code>的主要区别在于其给出“坐标”的排列方式的区别</strong></p>
<h3 id="numpy.where"><code>numpy.where</code><a class="anchor-link" href="#numpy.where">&#182;</a></h3><p>Return elements, either from x or y, depending on condition. If only condition is given, return condition.nonzero().</p>
<p>返回依据条件从x或y中选取的值，如果只给定了条件，则返回<code>condition.nonzero()</code></p>
<p><code>numpy.where(condition[, x, y])</code></p>
<p><code>numpy.where</code> 有两种用途</p>
<ul>
<li>给定 condition 和 x, y</li>
<li>只给定 condition,返回<code>condition.nonzero()</code>即复合条件的元素的反直觉“坐标”</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="&#21516;&#26102;&#32473;&#23450;condition&#21644;x,-y">&#21516;&#26102;&#32473;&#23450;condition&#21644;x, y<a class="anchor-link" href="#&#21516;&#26102;&#32473;&#23450;condition&#21644;x,-y">&#182;</a></h4><p>大概相当于（以1-D为例）</p>
<p><code>[xv if c else yv for (c,xv,yv) in zip(condition,x,y)]</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[170]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">([[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">]],</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]],</span> <span class="p">[[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">]])</span>

<span class="c1"># 类似 [xv if c else yv for (c,xv,yv) in zip(condition,x,y)]</span>
<span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">9.</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">arr</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">,</span> <span class="n">arr</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[170]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[1, 8],
       [3, 4]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[170]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0.,  1.,  2.],
       [ 3.,  4., -1.],
       [-1., -1., -1.]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="&#19981;&#32473;&#23450;x-y&#21482;&#32473;&#23450;&#19968;&#20010;&#26465;&#20214;">&#19981;&#32473;&#23450;x y&#21482;&#32473;&#23450;&#19968;&#20010;&#26465;&#20214;<a class="anchor-link" href="#&#19981;&#32473;&#23450;x-y&#21482;&#32473;&#23450;&#19968;&#20010;&#26465;&#20214;">&#182;</a></h4><p>则返回一个“坐标”<strong>(不符合直觉的“坐标”，是一个列表，列表的每一项对应一个维度上所有元素的坐标值，这种坐标可用于反向索引得到对应数据)</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[171]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>  <span class="c1"># 等价于 np.where(np.array([[0, 1], [1, 0]])!=0)</span>

<span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[171]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(array([0, 1], dtype=int64), array([1, 0], dtype=int64))</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[171]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(array([0, 1], dtype=int64), array([1, 0], dtype=int64))</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[172]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">9.</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

<span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">arr</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span>  <span class="c1"># 返回“坐标”</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[172]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(array([2, 2, 2], dtype=int64), array([0, 1, 2], dtype=int64))</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>采用这种 indexing 方式，得到的结果为 1-D，前文解释了，因为作为索引的序列为1-D，且对arr前2维度进行索引得到的也是单个元素，不会对结果的维度进行增补</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[173]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">indice</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">arr</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">indice</span>

<span class="n">arr</span><span class="p">[</span><span class="n">indice</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[173]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(array([2, 2, 2], dtype=int64), array([0, 1, 2], dtype=int64))</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[173]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([6., 7., 8.])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="numpy.nonzero"><code>numpy.nonzero</code><a class="anchor-link" href="#numpy.nonzero">&#182;</a></h3><p>Return the indices of the elements that are non-zero.</p>
<p>返回非零元素“坐标”</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
<p>给出的结果也是 <strong>反直觉“坐标”</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[174]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

<span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

<span class="n">arr</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">arr</span><span class="p">)]</span>  <span class="c1"># 反向 indexing 得到对应数据</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[174]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(array([0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2], dtype=int64),
 array([1, 2, 3, 0, 1, 2, 3, 0, 1, 2, 3], dtype=int64))</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[174]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="numpy.argwhere">numpy.argwhere<a class="anchor-link" href="#numpy.argwhere">&#182;</a></h3><p>Find the indices of array elements that are non-zero, grouped by element.</p>
<p>检索非零元素</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">argwhere</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
<p>返回的结果是一个个的 坐标 <strong>(符合直觉的坐标，每个元素都由(x,y,...)构成，即一个坐标)</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[175]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">arr</span>

<span class="n">np</span><span class="o">.</span><span class="n">argwhere</span><span class="p">(</span><span class="n">arr</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[175]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[175]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[0, 2],
       [0, 3],
       [1, 0],
       [1, 1],
       [1, 2],
       [1, 3],
       [2, 0],
       [2, 1],
       [2, 2],
       [2, 3]], dtype=int64)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>这种坐标用于索引，因为只对第一维度（ndarray 被视为一个整体）进行索引，显然不能得到条件对应的元素</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="mgrid,-ogrid,-meshgrid,-ndenumerate&#19982;indices"><code>mgrid</code>, <code>ogrid</code>, <code>meshgrid</code>, <code>ndenumerate</code>&#19982;<code>indices</code><a class="anchor-link" href="#mgrid,-ogrid,-meshgrid,-ndenumerate&#19982;indices">&#182;</a></h2><p>这些函数或方法都与“坐标”有关</p>
<h3 id="mgrid"><code>mgrid</code><a class="anchor-link" href="#mgrid">&#182;</a></h3><p>nd_grid instance which returns a dense multi-dimensional “meshgrid”.</p>
<p>返回一个类似网格化坐标的<strong>ndarray</strong></p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">mgrid</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">numpy</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">index_tricks</span><span class="o">.</span><span class="n">nd_grid</span> <span class="nb">object</span><span class="o">&gt;</span>
</pre></div>
<p><strong>对于输入序列 x1, x2,…, ‘xn，长度分别为 Ni=len(xi)，返回ndarray形状为(n, N1, N2, N3,...Nn) 的ndarray,其中x1在ndarray的第一个元素的第1维上排列，x2在ndarray的第二个元素的第2维上排列，以此类推。</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[176]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mgrid</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">6</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>  <span class="c1"># 可以加 step</span>
<span class="n">arr</span>

<span class="n">arr</span><span class="o">.</span><span class="n">shape</span>

<span class="n">np</span><span class="o">.</span><span class="n">mgrid</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span><span class="mi">5</span><span class="n">j</span><span class="p">]</span>  <span class="c1"># 也可以是复数</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[176]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[0, 0, 0],
        [2, 2, 2]],

       [[0, 2, 4],
        [0, 2, 4]]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[176]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(2, 2, 3)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[176]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([-1. , -0.5,  0. ,  0.5,  1. ])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[177]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mgrid</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">6</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">8</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>  <span class="c1"># 可以加 step</span>
<span class="n">arr</span>

<span class="n">arr</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[177]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[[0, 0, 0, 0],
         [0, 0, 0, 0],
         [0, 0, 0, 0]],

        [[2, 2, 2, 2],
         [2, 2, 2, 2],
         [2, 2, 2, 2]]],


       [[[0, 0, 0, 0],
         [2, 2, 2, 2],
         [4, 4, 4, 4]],

        [[0, 0, 0, 0],
         [2, 2, 2, 2],
         [4, 4, 4, 4]]],


       [[[0, 2, 4, 6],
         [0, 2, 4, 6],
         [0, 2, 4, 6]],

        [[0, 2, 4, 6],
         [0, 2, 4, 6],
         [0, 2, 4, 6]]]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[177]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(3, 2, 3, 4)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="ogrid"><code>ogrid</code><a class="anchor-link" href="#ogrid">&#182;</a></h3><p>nd_grid instance which returns an open multi-dimensional “meshgrid”.</p>
<p>返回一个类似网格化坐标的<strong>列表</strong>，列表中为几个ndarray</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">ogrid</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">numpy</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">index_tricks</span><span class="o">.</span><span class="n">nd_grid</span> <span class="nb">object</span><span class="o">&gt;</span>
</pre></div>
<p><strong>对于输入序列 x1, x2,…, ‘xn，长度分别为 Ni=len(xi)，返回一个列表，其中第一个形状为(N1,1,1,...)第二个为(1,N2,1,...),依次类推。其中x1在第一个ndarray的第1维上排列，x2在第二个ndarray的第2维上排列，以此类推。</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[178]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ls</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ogrid</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">6</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
<span class="n">ls</span>
<span class="n">ls</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">ls</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>

<span class="n">np</span><span class="o">.</span><span class="n">ogrid</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span><span class="mi">5</span><span class="n">j</span><span class="p">]</span>  <span class="c1"># 也可以是复数</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[178]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[array([[0],
        [2]]), array([[0, 2, 4]])]</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[178]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>((2, 1), (1, 3))</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[178]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([-1. , -0.5,  0. ,  0.5,  1. ])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[179]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ls</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ogrid</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">6</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">8</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
<span class="n">ls</span>
<span class="n">ls</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">ls</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">ls</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[179]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[array([[[0]],
 
        [[2]]]), array([[[0],
         [2],
         [4]]]), array([[[0, 2, 4, 6]]])]</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[179]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>((2, 1, 1), (1, 3, 1), (1, 1, 4))</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="meshgrid"><code>meshgrid</code><a class="anchor-link" href="#meshgrid">&#182;</a></h3><p>Return coordinate matrices from coordinate vectors.</p>
<p>基于坐标向量返回一个类似网格化坐标的<strong>列表</strong>，列表中为几个ndarray</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="o">*</span><span class="n">xi</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
<p>对于输入序列 x1, x2,…, ‘xn，长度分别为 Ni=len(xi)，</p>
<ul>
<li>如果indexing=’ij’返回列表中包含n个形状为(N1, N2, N3,...Nn) 的ndarray,其中x1在第一个ndarray的第1维上排列，x2在第二个ndarray的第2维上排列，以此类推。</li>
<li>如果indexing=’xy’返回列表中包含n个形状为(N2, N1, N3,...Nn) 的ndarray，其中x1在第一个ndarray的第2维上排列，x2在第二个ndarray的第1维上排列，其他和上一中情况类似，以此类推。</li>
</ul>
<p><strong>与 mgrid 的区别除了返回类型为列表外，排列顺序也更为复杂（分两种情况）。</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[180]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[181]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ls</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">indexing</span><span class="o">=</span><span class="s1">&#39;ij&#39;</span><span class="p">)</span>

<span class="n">ls</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
<span class="n">ls</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[181]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(2, 3, 4)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[181]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[array([[[0, 0, 0, 0],
         [0, 0, 0, 0],
         [0, 0, 0, 0]],
 
        [[2, 2, 2, 2],
         [2, 2, 2, 2],
         [2, 2, 2, 2]]]), array([[[0, 0, 0, 0],
         [2, 2, 2, 2],
         [4, 4, 4, 4]],
 
        [[0, 0, 0, 0],
         [2, 2, 2, 2],
         [4, 4, 4, 4]]]), array([[[0, 2, 4, 6],
         [0, 2, 4, 6],
         [0, 2, 4, 6]],
 
        [[0, 2, 4, 6],
         [0, 2, 4, 6],
         [0, 2, 4, 6]]])]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[182]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ls_2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">indexing</span><span class="o">=</span><span class="s1">&#39;xy&#39;</span><span class="p">)</span>
<span class="n">ls_2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
<span class="n">ls_2</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[182]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(3, 2, 4)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[182]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[array([[[0, 0, 0, 0],
         [2, 2, 2, 2]],
 
        [[0, 0, 0, 0],
         [2, 2, 2, 2]],
 
        [[0, 0, 0, 0],
         [2, 2, 2, 2]]]), array([[[0, 0, 0, 0],
         [0, 0, 0, 0]],
 
        [[2, 2, 2, 2],
         [2, 2, 2, 2]],
 
        [[4, 4, 4, 4],
         [4, 4, 4, 4]]]), array([[[0, 2, 4, 6],
         [0, 2, 4, 6]],
 
        [[0, 2, 4, 6],
         [0, 2, 4, 6]],
 
        [[0, 2, 4, 6],
         [0, 2, 4, 6]]])]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>例如用于函数在一定区间的求值</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[183]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
<span class="n">xx</span><span class="p">,</span> <span class="n">yy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">sparse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">xx</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">yy</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">xx</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">yy</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="n">h</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">contourf</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>




<div class="output_png output_subarea ">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXYAAAD8CAYAAABjAo9vAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAADl0RVh0U29mdHdhcmUAbWF0cGxvdGxpYiB2ZXJzaW9uIDIuMi4zLCBodHRwOi8vbWF0cGxvdGxpYi5vcmcvIxREBQAAIABJREFUeJztnV/IZld1h38rY8aJZowDWgOZpIY0HRqiIA6h6oWiNURN7U0vYjFIvRiEKkoMVs219EJQGxRKaC9aG7CCFktpSWKpF0UUE6tpbDqS+CdmVFQ61aQmTJPsXnxzZs535pz37D9r7bX2PuuBgfm+73332mfv8z5nnXX2OS+FEOA4juP0w0XaHXAcx3F4cbE7juN0hovdcRynM1zsjuM4neFidxzH6QwXu+M4Tme42B3HcTrDxe44jtMZLnbHcZzOeJ5G0IsPvjAcuuTIvt89e4iS2znwdPxdsznt58ThiMfVh11w948D7m3sCWvzZX1/rP2ZlXbR0P6Tvzr1ixDCS9deryL2Q5ccwatf8z4AwOljB7PaOHLyTNTrcttPjcMVj6MPc0j0qwSObdoyPc6nhc9OLV/kxnnwztt+GPM6FbEPSEq9daFb/aCk4gKXYWlcteZ8HDd3zsfv49qOoZ3YPg2vy40fG+/IyTOic6Um9pyN6l3orcvcJa7P3BzU3icsSt6i4Etj7EJF7Kk1phpll5aFriFzl3g7aMqeU/KtCj4mey+JMYdqKSYG6Sy9VaHXlrlFkVsoNeVgYSynfagxlqWS58ziawpeozxjVuzWsnSuAW9F5hbk06q411jbLo2xry16Lsn3Jniu7TIpdktZ+paEriGUXuVdwq4xqTVHEhcyl0iV6xhNwUuXZ0q2yZTYXej88XdRU+QucB6WxlFyLmtl8yVZvIbgLWfvZsQuKXUX+nlqyNwlXp+5MZea6xrZfG4W36LgJbJ3E2Jf27AaWXrPQpeUuUvcLjVkLy353CxeS/DS2XssqmLvKUvP+cC0KHMXedtM549zP6kleS3BW8jeY1ETey9ZuiWhS8jcRd43UqKXlLyW4K1k7zGoiH3tgTnSWboLfTe9ydwvEsfDcUPRFKk7LK0LXjN7N1FjH2Nd6laEzimrFmVkYZ39HBoX6qXgzualsnhNwUuWZ0rkbkbsLnS5fsxhXSpWxc2JZDlSAs5sXkLyGoKXLs/klmbYxE5EBwDcD+BUCOHmlPdalroFofcs8y0IPJe5sbEyhxKS34LgS2rvKdvDmbG/H8DDAF6U8qacjbSapbvQl3GB87A0jppzzCV5K4KXLs+UlGZwT9xrWcROREcBvA3AxwDcFvs+q1LvQejaMneR16XW3aFrcKzq0Ba89ew9Bq6M/VMAPgTgcMyLnz1EyRvkQl9HU+Yucltol3E4snjuOryG4CVXzuyiWOxEdDOAn4UQHiCiN+x43QkAJwDg4sNHll42S89SbzU770nksePX+jbXeBTAHNay+NR6dUlmnbJyhnNOKISyL6Uloj8DcCuAZwAcwl6N/YshhHcuvecFL7syXHtLXMVG8u7U2Pa5YpXElepHLJalpl12isXH8DxW9v+an38Olz14520PhBCOr7VTLPZ9je1l7LevrYqJEbu1LH2LQrciolbEXcoWx9vK56GWC0q9Fit2M+vYx0hLvcUsvdaHTUsuW5H3LnaNQc15qVmyKS3TcJUwUsozNe4oLd0uVrGHEL4C4CslbVgqvWxF6LVl7hJPZ27MasxbLcmXCJ6r/p5zcTVX7jFxSuRuKmOXlLpGlm5Z6DVl7iKXgfuW/zVqSL41wUtn77lyNyN2K1LvWei1ZO4i16FmVi8teSuCr5G9SyyJVBe7pXq6ptRbFrqL3C6ct/4vIbUWe9ymluBryX14/1r7sfgXbRTEyI3HHXsOSZm7yNtEunQjmcWXCr5U7rGxa1xYjcHsF20AbUh9K0J3mfeHZDYvlcXnCr6l7J1jLkx+0QYgL3WtLL0lobvMt4OU5C0Kvmb2riV39Rr7HNalbilL5xZ66zK3cpPPQIvjKSF5S4Kvmb3nxiqVuzmx5wy29dKLC50Pa+JeY62/1sedW/KSgtfI3iVLMyVyNyV2y1LvUeiWpdKawHNZ2k6Lc1N6l+gYCcFrZO/SpZlcuZsRu6TUe8jSexb6ViSewtyYWJm3FgRvNXuvJXcTYu9J6laFbkUKgIs8F2uy5yzTcAteK3u3Ind1sVuVunaW3pPQXeRy1LjNPwauLF5C8DWzd2m5V/1qvFx6kboLfT8uch2m466xD1gUfG72XkPu4/5xoiZ2l3p57Dm0hO4yt4dmNs8peK3svfQu0nEba3G450dF7M8eoqTXu9DX0RC6y7wdtCTPIfitZO+c86JeY1+jZ6m3KPRWZS49Ti2Ni4bkLQq+Z7mbFrtLXb4fMViWloWLw0B8P6yNZW3Jcwne5b4bs2LvVeou9DysCLyUpe2wMNaSF/OmlAqeq6+9yt2k2K1JfUtZugXB9CLxFOa2WWsuambxJbfNAzwSTD3ItCB3k2KPIXejWyy99C70LYo8hum4aMxRjSy+xey9dMWMtNzNiT1mg1uSuvUsXUMWLvI8NEXfiuBbKc2UnqmsYUrsLnXe+LuoKQUXuQwaoq8leJd7WdsXJb9DCJc6b/wljpw8U0UAp48dPPfPqUPNMZfej0q2g6NvqbFz48XEyWnbhNh7knrJTiX5oawhdJe5HWrNRQ3B57JluauLXXKn0JB6Lj0I3bFJ64LXlntKfCtyV62xSy5rbEXqkkKXxEXeHuM5k9o/pGrwJRdWa9fduR8PkINaxu5Sb1Pqnp33gfQ8Wsveaz++Iyce53yol2J24VJPQ/p02IXeH5K1eKn90eW+jkop5sDTYfU1NW9rzsGS0AGZDGlLIl8bvy2MRek68iUkyjO5feXoi3RZhmONu6l17AM1jsi9SN2FfiESY6J9al0TScFL1N616u6SlMrdpNhzcKnzYHlnn2LhuTa7WOpfK2MsIXip7L223K1fTDUndum6eg9S36LQrUs8hbltsTz+Ere/c8uuR7mXjLupi6cudbl+LGH1ouhw4a3WnbLaWN9eif1EYl+u3Q+rF1PNiN2lLtePOSwK3bLYamN1LLj3G+5tdLnvYUbskrQudSs7vwRWBWYJi2NkPWmp3QdLnymAocZORFcC+BsAlwN4DsBdIYQ/T2lDMlvXGHBuqXNhZefTEtQlD50Safep668QaXeO8dhpzyf3xVXOurvlmnuNejvHxdNnAHwwhPBNIjoM4AEiui+E8J8xb65xE1Iu2kvcepJ6rTmTknduTEnpW5E858VVC3KvQa7ccU/ca4vFHkL4CYCfnP3/E0T0MIArAESJPRXLdXWLUu9V6BoCz2Gpn9zCl3pGSyyc2bu23C2vlImFdbkjEb0cwKsAfD3m9ZI7oUtdV+oSQi+VuVT2nNOv8Xs4+6WdxXNlyVuRuxRsYieiSwF8AcAHQgi/mvn7CQAnAOD5h15stq6uKfXWSy/cO3OqMGvWulPirm3H9O9c26GVxXPKfWivFKtyl8raWcRORBdjT+p3hxC+OPeaEMJdAO4CgMOXHV1/WMyEGkfAHqTeutBTZK4l8lSm/UwRPcc2agjeYmmmttw1Y3CsiiEAfwXg4RDCJ2Le8+whKg27iMbOW8rWpR4j81YkHsPctiyNAafktQTfutxbiDWFYx376wDcCuCNRPSts//eytDuOayWYCxRW+oc66oveejU6oqS4V/vxGzrMF6l1xpq7+utJ0A11rdzzwnHqph/AyCXgleg9RJMTalzyHwXW5D4GuMxWMvkc8erdvZuLXO3GJczhrmHgE2RztZd6vGU9FdL6BpnMpwM49KD4C2sFhmoWW/X2G7TYreyE4zZotSlhM4tc+01+0t94JjrtSyeQ/CtyL3FenssXNtmWuyxaDwbooQtSL2G0C2IPIZpP0vnf1cWXyJ4l7tc3NoHEbNi77UE04rULQqdc7ufuOa5ovcffjR/3QGX6CUEX6s0Y0nuteLWXNtuVuzWcKmvI3H7fMn2lso7t+1U6Y+3MWfs1wRvNXu3IneLJZlSTIrdYrZuAatStyB0SYmnMteXWNmX3NizJPiS7L0FuWv0w3rWblLs1rCQrW9B6inbKCnyS6/+JQDgye9fxtbmtL9roi/J4p+6/gq27L1GaaZU7lolGctQCMl39xfzgpddGa695bbZv1nL1rcg9VaEnivzQdTS5B4IYrP5VuYpFwufk1p+yPXcg3fe9kAI4fja+zxjF8bCaeYuNGUhJfRaIo+JGyP7Yftis/iUOePO3i1nxtb7VxNTX43XY7ZeimQfuKSec9v/2nY9cc1z5/6tcenVv9z3zxIp/Yrd5tR9Yml+ch5NIJmotPh5yx0P6UcNeMYuiIVTyyVS+1YrS4/NzrkEfuNVJ5Nef+9jx7Jjjfu8lsmvZfFc2XvOhVXJzLjFervFMwUzYpcuWbSWrfcmdQ6h58o8Vd65baVIP1by3ILnKs1Ylnsr8SVXyJgReyzawo3Fem09FgtSTxU6p8hL48bIPmYVzhPXPLezBp8ioxbkXoLVftWkObHnUDtb76UEIy11LqFriTyGcd/WJL8m+JjsvbbcpdAuydRa1y6FiYunNZ637tSV+uljB7OlHnux8carTpqW+pTY/q5t/66xWxv3MUtzmXJRtfeLqdJIXUTtPmP3bH0P7icM7qJE6Gtwi/zWI19Nev1nT7+2OGZsFr8rg+fK3jkyd2vZ6sCWs/buxd4SVqS+tKQxBimplwo9VeCp7eQKf9iuNcHvKs9IyT0FKalpX0i1RMo4qIvdUhlGO1u3QG2pS2XpXCLPjZcq+jXBr2XvEnK3Um8voYWsXeLgpS52SVoSrYVs3ZrUU4VeW+a7GPclRfI3XnUyK3u3IHfP2u1g4uKpI0OrUk+9KHrrka+akvqU1P6tbf/S2K1dVI2h9A5ViwK22CdpVMXuZZj2kZB6LNaFPiVH8EtIyt0imn1vwT9Tus3YWxKtxI5TK1tfQlLqrQl9Skr/ueUeQ49Ze00sbH+3Yq+JhYnUYOmAJC31XogVPKfcW87aS9jaZ9TFrkyr2Xptqbeepe/CotwtZu29l2M4MS/2FutbrSBRgpmDQ+q9IyX3Erge9btFcg5snB5SE7vkqdHWTrvG1Hoq3RyptV2X+n4k5K5ZkrH2ObTWH0nMZ+zWKdlZrJ0plGTrqSUYl/o8pXKfg7sko4m1z4xVXOwbJfeUOuWD5VLPo0TuNb5BaqvlmJYOKpsXe0uTtYbWqWbp8ropW5b6APcYcM9RLFsqf1iiO7H7jpRHyUqYOXKzdZf6edbGgiNrb7EcU0JNP2i6yLTYrWfTrdbXt3oqvXU4s3bNfci6F0rg2jYVsR94OmiEdQRIkYVn6+lYydqdtjCdsTvxSJ/2cZRhnHYpWdPu5dH6uNg3Rq2bkhw+/EzGScXF7mTDWbN1eeWTsq5da3WMUxcWsRPRTUR0kogeIaIPc7Tp9EVLXzrdC14S2y7FYieiAwA+A+AtAK4D8A4iuq60XadNXCZOz7RyoZkjY78BwCMhhO+FEM4A+ByAP2Bo13Ecx8mAQ+xXAPjR6OfHz/7OcZxGaCUTdeLgEDvN/O6ChepEdIKI7iei+//vzP8yhHUcx3Hm4BD74wCuHP18FMCPpy8KIdwVQjgeQjh+8cEXMoR1HIcLX2veFxxi/waAa4noaiI6COAWAP/A0K7jOI6TQbHYQwjPAHgvgHsAPAzg8yGE75S267TJk9+/TLsLjiNGK2c2LOvYQwj/FEL47RDCNSGEj3G06fTFvY8d0+7C5vCD7HbxO0+dbA4/yrf7fPb0a9na6o21sUk5aHLOmWMXn+WN4V9Q7HDhzxiyi4u9E6TXIafUFr0E0B8lB39fI18fFbE/e2hu6bvTIimn9mslAy/HXEhuGSbl4NrKBUEnHtMZu/UdriQT0dw2y6fQLnc5OOvrmvtQq99cFgOXF0yLPQfrE2eVmFNtjnKMr46Jx0q27tdg8tB0UXdiT8X6WUEKWjtSaiboJZl1uMdAazWMJ1o6bF7sWyX3VLrWRdQtyz1m2zVr65ZLeZK0lAS62Atptc4+R8kp91JGWFKS2aLcJaRekq1bK8P0XF/nRE3skoO8pQmcUmPblz5c3CUZYFtyL5H6EktzUiOp2PLnUBvzGXuNHdBa5lyLWjcr7SoPuNz3KJW6xL0D/sXn+eQc1Dg9ZF7svSNxUEnZqXLlnpq1c8i9V8FLSb0kWy+VukS2rpmAtZb8udgZ2OopZ225A31l77EHq9pS75GtfUa7FXtLE9lq1r4Labm3LPiU/nNKPRaL2XpLWNh+VbHHDkALdXYLk6nBrnGTlDvQnuBT+8st9Zazdc3VMC34Z0q3GbtTL2uXkHtPgs8RupbUPVvvg+dpd0CS08cOJh0Jj5w8o7ZjSsVOGYOnrr/igg/2JQ+divpg7+r/4UcvwhPXPHfB75/8/mW49OpfLrY5yO3Gq06uxgf2199vPfLVqPdIkXOgiTmYbVHqLZ9paKEu9ljxaEo3ltQDiUU05A5gVfCxch+YilVa9KVnDGtS33WGY0HqVqldhtFe5jigLnbnPBaydqC+3AH+7H3KLvGmSJ+75FOSpQNyUk/Fs3V5Th87uPfN0hF0L/ba5ZjSrN2K3OfgkjuAoux9IFfyU2rX52OvH+QKHSiXeg8lmBaydSlMXDy1tDqmZ0ovpgJpF1RzLqoCe0KLuZMy9SKrNrH9Xdv+tSy9B6lvhdi5Sh3n7jN2wLP2MaUXU4H4zB3Iz96BuAweuDAD5srkS0k96KwdzLiydMC+1D1bL8OM2Hu6iAr0cSEV4JM7sLzzcwl+QEv0uWcPMWcn1qRumRb8II0ZsUvT0tJH6fgcF1OBNLkD69u06+IqsF+AsZIHdgs3VfpcpZ/Yh3ZxCh3gk7rlbL12/NyxkCrDABsSuwa9lGSA8x/83NUyA7HZO7CcwQP5kp9Ss0af8gRGbqEDfEsaLUvds/U9TIlduhzTWtYu3YecA8/SUsjhb7GsCR5YL9EMTIVZInpOUh+lG/uMF60sHbAtdY0+WMzWAWNi7xHrtfZhx9EozQxx13be2Cx+YE6o0rIveR66lNCBdqTOgfX+1YRCCNWDvuBlV4Zrb7lt8e/SRzONK94tnGJqiwNI284YyVsl5QmM2vNidd8bo/EZ1cjWH7zztgdCCMfX3mtiHbt1ODLuFp4wl9PH0vXuU1LWYR9+9KJz/6wz7mtMf4dxcKmvYyHxsobJUoy1WrsVatT8c+vuwPyF1fHfUxj3IWab52SpldGXHGhK9kvNs6dcWvwcAnZr6wMmxV4DjQupHAcUq3IHdtfeh7/nkCr5gV2CLZU+51kCx6Meluhd6p6tz2NW7BZvWNqa3IdYKSxl7+PfldwIkyv5KZrlGy6RtCp0oG2pW8/WAcNiT6G1kkwrcgfKsndgt+DHr8th2i+rqyK49zEJoQPbk3rNuLU9Y1rsFmvhXEJtTe5DvFR2CX78e47b2Zf615Kwlli7GN2C0AFbUrfmFoBv20yLHbB5IXWLcgfK+ltT8FMsfoBjkRQ64FKvEVtj/ysSOxF9HMDvAzgD4FEAfxxC+B+OjtXE5R5PSfYO7BeRZJmmZaRlDtQvZbR8cAXqjBdnjNIrSPcBuD6E8EoA3wXwkfIuXUiN57Vr1mdbvLJ/+tjB4n4/df0VOyV1yUOnzv3rnZhtXRuvGDjmLRWufVMrWy+JW/OC6ZiijD2EcO/ox68B+MOY9x14Wu5u19ZWyQy0lrkPlGbwwHoWv/T7VjP6lAMV5zZqJC+tS72VWFM4a+zvBvB3jO3tI0V8Ldbbc+PP9WdoqyZcF7pjJL/0d6uiTz3j4N6OloUOtFlX146xKnYi+jKAy2f+dEcI4UtnX3MHgGcA3L2jnRMATgDA8w+9OEuINVbJ9CB3QDd7H+KXMhVcqujX2uOitFQk0S/N0qK1LB2oL3WtEsxA8UPAiOhdAN4D4E0hhF/HvOfwZUfDq1/zPgDpG5YyQTUmhiseR/w5tNd2Sx2IW6+7Sx1keplv7c9SLXekxol9CFjpqpibAPwpgNfHSr2UGiWZ1Dgc8Tjiz6FVmhngqMHPsXbR1QI1S0O9CB1wqXNQWmP/NIDnA7iPiADgayGE96Q0IF2ScbnvoVGaGcNdptlFTelr1vW1ZT7gUk8nJ07K9pSuivmtkvcPWK2358axLPehTU1qSn6K1QussWjP3RjuudOWeq2Y0lIHGrjzlAONbJVb7kObHGhn72M0Jd8KVuZqjNUsHcjvW+1rcpKY+YYC6dMmjZuXrGc01nbG4eYZiyKrjdWx4N5vtib1Gtk6YCxj763eXhqTsx9LWCnPTJnrj7UDESfWxn+KxNi71HnbH2NK7IDLPbYfQ7tcWBX8mGnfWhW95TGe0oLQAZf6FHNiz2Vrci/pyy4s1d/X2NVPbem3Moa7cKnzxNTYF0yKvcYjAUrlPrSRgkRWLJm9j9tvDc4MqdUxyKUVoQP2pa4VQ0Xszx6i1dfUyBxLY/SevQNtlGi42MI2LiEpq16y9FrxOObCzKqYOWrcYFA6iFZWzACyj2S1uIrGKUdyXqX2R02pW66rj1ETe+xGu9zTkcxKXPB9ID2PPZVecmJrSh1QrrHHlg9q3JmqWZYZ3s+J1DNaBnqow2+NWndqS6BxH0pubAufB/VSjOQgtJK5c8ReosZNLp7F26bG/EiXAXNpReoxcVLaNrEqJibbrbFSpiTOON7QTiqSFyqlM/hp2xayli1T60ArXfbLpXbppSQmt9QBAxn7QEzHa9XXOD4UFrN3oE4GD5zPEj2br0fN8Zbej1zqZW2byNgHesrcc2JO4w9tSFAjgx/j2Tw/GgfMGmW9Elzqe5gSOyAv9+H9MXDJPSWmRB92UVvwc7Fc9HFonvnUOsvLhat/lqRegjmxx1LrsQBcYrWcvY/b1pCHi34eCyUs60IHdKReo9RaEsOk2CWXQabGGOIM7ymh9O7QmoIfx6vNXNzeZW9B4gM1x9qC1GsuZ6whdcCo2AF7ci+NNY45tJVLjcctALpZ/JRdfWhF+hbGcRdbE3pOP1qQOmBY7EC/ch/iDu3lUCN7H7CQxe9C8iIUZx8sUvugqL3ibEyvUgeMix2IF2BtuY/7VkIL5Zkx1iW/REt9lUbjDMeS0IG+pQ4oif3A0yH5PbGrZYbX5rQ/biMGK9n7+L01P7StSn6LaJWrtiz0lHjc86N2g1LOhMdufM1lU5xC47oQpLW+udbNT04cmnPCtR+2KvXY7ZeaH9VSTE7Ga7XuPryvFK4LlhoZ/MA0pmfzdbBwUOWaa02hl8bXytLHqNfYLct9aCMWztUqPQh+wEUvgwWRD1gUOtCX1FO2RV3sgF25p8QZxxvexwG34MdtauGiz0N73qZYK0OOqS30lJjSUgeMiB2Ql/vw+hxyVq5wrzXnXFNuIYsfM9ePrcveytzMYVnogEsdMCR2QFbuue2P4wxtxCIhUAnBj9u1wlJ/ehO+tXFfgnvctyb03Fi5425K7EC+3If3SrQ/jZWTvQ/v5YL7rlBrWfwSMf2zIn/rYxlDr0IHbGfpKe3PYU7sQL58a9bdh3ZSkHgUgJTgx223Rqv9toLEgVFqTjSy9JS4GlIHlMT+7CFafU0NuQ+vz8VK9j5uj/ND2YPknTikznIsCR2wX3pJjbGEWsYeeyeppNxLYoxjDe2kIC34nD7twiXfH5Ilq96EnhpbU+qAcilG8jEBqXX3nBi58bhjc/dpjWl7Lvo2kL72ILkfuNDTUK+xx8qnhew9Nd409vB+bqQEP+Cit0mti8gWhQ70JfVzbd8T16a62AcslWaG9+RSItIagh/HkcBFr0PN1UDSc9qS0EtiJkk9ATNiB+TlPrw/Bq7sPSXmNP64DW5qSX6ufRc9D7WXddaYN22hp/ZB+vEDue2ziJ2IbgfwcQAvDSH8oqQtybp7bPsccaYxx+2lUGN9eU3J74rhwp9Hc11+rTlpTeglcaWXSgIMYieiKwG8GcBjpW0NSK9H18jec+JO+zBuQ4rakh+zdeFv8caq0m3uMUsvjQHwZOyfBPAhAF9iaOsc0hdVhxi1s/dxG5YFP42hKZ212K2I34q456g9hi0KvTSuZOllSpHYiejtAE6FEL5NtH7TUQ41SjPjNtawJniuvqwxjWFJUhx9WRtDS9vLgcbBsMY8xWJN6KUxpqyKnYi+DODymT/dAeCjAG6MCUREJwCcAICLDx9J6GKdRwWkLlPkKs8MsYc2c6iZxQ9YFn0Orfd/Dc2zGivZ+UDvUgcACiH9+0cBgIheAeBfAPz67K+OAvgxgBtCCD/d9d7Dlx0Nr37N+7I2psZA1Zx4jvhzaJcneheldXqYf+3PlUWhP3jnbQ+EEI6vvS67FBNC+A8AvzH8TEQ/AHA8ZVVMTtZbK3sf2oiBO2PmuKFI+xEAvWX01tEWOcA3xy0LPSWe5Jypr2PPlfvw3rW2x69PJac8UxJvLv643Vw0SjVTlmK78NOwIPApvQi9tA/SQk/ZHjaxhxBenvte6TtKa2bv49dyCz61H1O0s/g5XPjzWJmfJazKHKgv9JSYNaQOGMjYB3JlWDN7j4nDGZOrH3NYvxu091Uq1sY7Bs4xd6Hztj/FjNgHLGfvQ5yhnVgkBZ/alyUsZvO7SOljrYNAC+OWAve4SY2PhtBT4taWOmD0izasZ+8psbjjcvVlF61Jfo0etqEWEgdBF7pcjCU2/UUbvQo+tT+7sF6yccqQOpuR3E+sC70kHtd8qH/RBrB7Y0rkvtb2OMb4PTmUCL409q7+pPZpDRd920iWpazJHKh/p6pmlj7GRI19LcOu9cgAjrtJc8sikksSpSS/1J7L3gY1ri1Iz3UrQi+JGRPjXNv+RRvp7Q8xhteXYFHw03alPvgu+/rUXCVUYy63IPTYODntmxE7EF+aGb+Wu32OOLkx5+Jz9GGJmneHLrXtwk9DY5lnrTkq2TYX+n5MiX0gNnsfXpvT/rgNqTi5MaX6sEaNbH7Krjhblb6FNfo1x35LQo+NVRrDpNiBtKWLNR4ZwC34cZux1FyGONd+beHU+ADUxoK056g9jhZkntMPy1nrRNExAAAEEElEQVT6GLNiH7CUvZfGKo091w+uvsRQs3QTi4U+tIbWwbB0rnoWemmMKSpiP/B02qOCa2XvMTHGscbvK6G0BKJ1Q5FF0TsXonlWw7FPtCr02HgS86OWsedIWPriamwMznil8Zf6w9mnWCyUb7aOhdKUNZkD2xH6gGoppuTRAdKPDbAi+JQ+LPVp2l5NdsV16edjQeBjLMocsCl0jjhrmKixS2Xv47+3KvicPsxh8Y7RpT648PewMEdLcM6RC52v/QETYgfKsvfx+7nbT40zjVcSc6kPKf1YwkI2v0Rsf1o+AFgb8xh6kzlHP6wJfcCM2AdyL4DWurM0J3uWzOJT+zKHxWw+hpR+Sh8EWhmzFLjHTGqMLAu9JFbJ+Gd/mXUJRPRzAD+sHvhCXgIg+jtaO8fHYj8+Hvvx8TiP5lj8ZgjhpWsvUhG7FYjo/phv/N4CPhb78fHYj4/HeVoYi4u0O+A4juPw4mJ3HMfpjK2L/S7tDhjCx2I/Ph778fE4j/mx2HSN3XEcp0e2nrE7juN0h4v9LER0OxEFInqJdl+0IKKPE9F/EdGDRPT3RPRi7T5pQEQ3EdFJInqEiD6s3R8tiOhKIvpXInqYiL5DRO/X7pMFiOgAEf07Ef2jdl+WcLFjbwcG8GYAj2n3RZn7AFwfQnglgO8C+Ihyf6pDRAcAfAbAWwBcB+AdRHSdbq/UeAbAB0MIvwPgdwH8yYbHYsz7ATys3YlduNj3+CSADwHY9AWHEMK9IYRnzv74NQBHNfujxA0AHgkhfC+EcAbA5wD8gXKfVAgh/CSE8M2z/38CezK7QrdXuhDRUQBvA/CX2n3ZxebFTkRvB3AqhPBt7b4Y490A/lm7EwpcAeBHo58fx8ZlBgBE9HIArwLwdd2eqPMp7CWBz2l3ZBfmnhUjARF9GcDlM3+6A8BHAdxYt0d67BqLEMKXzr7mDuydht9ds29GoJnfbfpMjoguBfAFAB8IIfxKuz9aENHNAH4WQniAiN6g3Z9dbELsIYTfm/s9Eb0CwNUAvk1EwF7p4ZtEdEMI4acVu1iNpbEYIKJ3AbgZwJvCNtfCPg7gytHPRwH8WKkv6hDRxdiT+t0hhC9q90eZ1wF4OxG9FcAhAC8ior8NIbxTuV8X4OvYRxDRDwAcDyFs8mFHRHQTgE8AeH0I4efa/dGAiJ6HvQvHbwJwCsA3APxRCOE7qh1TgPaynb8G8N8hhA9o98cSZzP220MIN2v3ZY7N19idfXwawGEA9xHRt4joL7Q7VJuzF4/fC+Ae7F0s/PwWpX6W1wG4FcAbz+4P3zqbrTrG8YzdcRynMzxjdxzH6QwXu+M4Tme42B3HcTrDxe44jtMZLnbHcZzOcLE7juN0hovdcRynM1zsjuM4nfH/jjjctb2g8noAAAAASUVORK5CYII=
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="ndenumerate"><code>ndenumerate</code><a class="anchor-link" href="#ndenumerate">&#182;</a></h3><p>Multidimensional index iterator.</p>
<p>多维数组迭代器</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">numpy</span><span class="o">.</span><span class="n">ndenumerate</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[184]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">ndenumerate</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>(0, 0) 0
(0, 1) 1
(0, 2) 2
(0, 3) 3
(1, 0) 4
(1, 1) 5
(1, 2) 6
(1, 3) 7
(2, 0) 8
(2, 1) 9
(2, 2) 10
(2, 3) 11
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="indices"><code>indices</code><a class="anchor-link" href="#indices">&#182;</a></h3><p>Return an array representing the indices of a grid.</p>
<p>返回一个指定形状的坐标ndarray</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">indices</span><span class="p">(</span><span class="n">dimensions</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">int</span><span class="s1">&#39;&gt;)</span>
</pre></div>
<p><strong>算是<code>mgrid</code>的方便版本，相比<code>mgrid</code>少了一点改动空间，但更加方便，结果的排列方式和<code>mgrid</code>也是一样的。</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[185]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

<span class="n">indice</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">indices</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">indice</span>

<span class="n">arr</span><span class="p">[</span><span class="n">indice</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">indice</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[185]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[0, 0, 0, 0],
        [1, 1, 1, 1],
        [2, 2, 2, 2]],

       [[0, 1, 2, 3],
        [0, 1, 2, 3],
        [0, 1, 2, 3]]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[185]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="allclose&#19982;array_equal"><code>allclose</code>&#19982;<code>array_equal</code><a class="anchor-link" href="#allclose&#19982;array_equal">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>allclose</strong></p>
<p>Returns True if two arrays are element-wise equal within a tolerance.</p>
<p>如果两个 array 每一项误差都在可容忍范围内则返回 True</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">1e-05</span><span class="p">,</span> <span class="n">atol</span><span class="o">=</span><span class="mf">1e-08</span><span class="p">,</span> <span class="n">equal_nan</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
<p><strong>默认两个 nan 是不相等的，可通过 <code>equal_nan=True</code> 设置</strong></p>
<p><strong>array_equal</strong></p>
<p>True if two arrays have the same shape and elements, False otherwise.</p>
<p>如果两个ndarray的形状以及所有元素相等，则返回True</p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[186]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">([</span><span class="mf">1e10</span><span class="p">,</span> <span class="mf">1e-7</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.00001e10</span><span class="p">,</span> <span class="mf">1e-8</span><span class="p">])</span>

<span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">([</span><span class="mf">1e10</span><span class="p">,</span> <span class="mf">1e-8</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.00001e10</span><span class="p">,</span> <span class="mf">1e-9</span><span class="p">])</span>

<span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">([</span><span class="mf">1e10</span><span class="p">,</span> <span class="mf">1e-8</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0001e10</span><span class="p">,</span> <span class="mf">1e-9</span><span class="p">])</span>

<span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">])</span>

<span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="n">equal_nan</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[186]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[186]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[186]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[186]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[186]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[187]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>

<span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[187]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[187]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="ndarray-&#21644;-matrix">ndarray &#21644; matrix<a class="anchor-link" href="#ndarray-&#21644;-matrix">&#182;</a></h2><p>参考：<a href="https://stackoverflow.com/questions/4151128/what-are-the-differences-between-numpy-arrays-and-matrices-which-one-should-i-u">What are the differences between numpy arrays and matrices? Which one should I use?</a></p>
<p>matrix 是严格 2 维的，而 ndarray 可以是 n 维的，matrix 是 ndarray 的一个子集，拥有全部 ndarray 的方法。matrix 主要的好处是可以方便的进行矩阵乘法，<code>a*b</code> 操作即为矩阵乘法</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[188]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mat</span><span class="p">(</span><span class="s1">&#39;4 3; 2 1&#39;</span><span class="p">)</span>
<span class="n">a</span>

<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mat</span><span class="p">(</span><span class="s1">&#39;1 2; 3 4&#39;</span><span class="p">)</span>
<span class="n">a</span>

<span class="n">a</span><span class="o">*</span><span class="n">b</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[188]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>matrix([[4, 3],
        [2, 1]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[188]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>matrix([[4, 3],
        [2, 1]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[188]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>matrix([[13, 20],
        [ 5,  8]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>不过在 Python 3.5 以后的版本，NumPy 也支持对 ndaaray 的 @ 操作符，同样也是矩阵乘法</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[189]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">a</span><span class="nd">@b</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[189]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>matrix([[13, 20],
        [ 5,  8]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>matrix 和 ndarray 都有 <code>.T</code> 方法，但是 matrix 还有 <code>.I</code> 逆矩阵和 <code>.H</code> 共轭矩阵方法，由于 <code>*</code> 操作符功能的不同， <code>**</code> 操作符的功能也不一样</p>
<p>可通过 <code>np.asmatrix</code> 和 <code>np.asarray</code> 相互转换两种类型</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="reshape&#21518;&#33258;&#21160;&#38477;&#32500;">reshape&#21518;&#33258;&#21160;&#38477;&#32500;<a class="anchor-link" href="#reshape&#21518;&#33258;&#21160;&#38477;&#32500;">&#182;</a></h2><p><strong>ndarray会在切片选择时自动将长度为1的维度隐去，比如(n, m)形状的ndarray取一列，shape 自动变为 (n,)而不是（n,1）</strong></p>
<p>这两种形状在进行矩阵运算时会产生一些不可预知的问题。<strong>为了保持情况可控，最好将形状为(n,)的ndarray先reshape为 (n,1) 或 (1,n)</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[190]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="n">sliced</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]</span>
<span class="n">sliced</span><span class="o">.</span><span class="n">shape</span>  <span class="c1"># 不是(1,3)</span>
<span class="n">sliced</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[190]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(4,)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[190]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(4,)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[191]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr_mat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asmatrix</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
<span class="n">arr_mat</span>

<span class="n">sliced_mat</span> <span class="o">=</span> <span class="n">arr_mat</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]</span>
<span class="n">sliced_mat</span><span class="o">.</span><span class="n">shape</span>
<span class="n">sliced_mat</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[191]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>matrix([[ 0,  1,  2,  3],
        [ 4,  5,  6,  7],
        [ 8,  9, 10, 11]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[191]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(1, 4)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[191]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(4, 1)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>shape 为 (n,)的 ndarray进行计算可能会出现不可预测的结果</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[192]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sliced</span><span class="nd">@np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

<span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span><span class="nd">@sliced</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">sliced</span><span class="nd">@np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span><span class="nd">@sliced</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[192]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([6.])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[192]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([6.])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)-&gt;(n?,m?) (size 1 is different from 4)
matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)-&gt;(n?,m?) (size 4 is different from 1)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="(n,-)&#21644;(n,-1)&#30340;&#24191;&#25773;&#21407;&#21017;">(n, )&#21644;(n, 1)&#30340;&#24191;&#25773;&#21407;&#21017;<a class="anchor-link" href="#(n,-)&#21644;(n,-1)&#30340;&#24191;&#25773;&#21407;&#21017;">&#182;</a></h2><p>(n, )在大多数时候类似于(1,n)</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[193]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">arr</span>

<span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">5</span>
<span class="n">mask</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[193]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([0, 1, 2])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[193]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[False, False, False],
       [False, False, False],
       [ True,  True,  True]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[194]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">*</span> <span class="n">mask</span>

<span class="n">mask</span><span class="o">*</span><span class="n">arr</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[194]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[0, 0, 0],
       [0, 0, 0],
       [0, 1, 2]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[194]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[0, 0, 0],
       [0, 0, 0],
       [0, 1, 2]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[195]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">mask</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[195]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[0, 0, 0],
       [0, 0, 0],
       [2, 2, 2]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>两者给出的结果完全不同</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>为了保证 ndarray 维度可控，不要使用类似 (5,) 形状的 ndarray。</p>
<p>解决方案：</p>
<ul>
<li>在可能出现 1维 ndarray 的地方增加一个 reshape(n, 1)操作，必要的时候放一个 assert 语句保证不出错</li>
<li>使用 keepdims 参数，不过在切片时似乎并不能使用这一参数</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[196]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sum_</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">sum_</span>
<span class="n">sum_</span><span class="o">.</span><span class="n">shape</span>

<span class="n">sum__</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">keepdims</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">sum__</span>
<span class="n">sum__</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[196]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>3</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[196]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>()</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[196]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([3])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[196]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(1,)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="tile&#21644;repeat"><code>tile</code>&#21644;<code>repeat</code><a class="anchor-link" href="#tile&#21644;repeat">&#182;</a></h2><p><strong>tile</strong></p>
<p>Construct an array by repeating A the number of times given by reps.</p>
<p><strong>整体重复</strong>输入的ndarray</p>
<p><code>numpy.tile(A, reps)</code></p>
<p><strong>repeat</strong></p>
<p>Repeat elements of an array.</p>
<p><strong>按元素重复</strong>,默认<code>axis=None</code></p>
<div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">repeats</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[197]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>

<span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[197]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0,  1,  2,  3,  0,  1,  2,  3],
       [ 4,  5,  6,  7,  4,  5,  6,  7],
       [ 8,  9, 10, 11,  8,  9, 10, 11]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[197]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0,  1,  2,  3,  0,  1,  2,  3],
       [ 4,  5,  6,  7,  4,  5,  6,  7],
       [ 8,  9, 10, 11,  8,  9, 10, 11],
       [ 0,  1,  2,  3,  0,  1,  2,  3],
       [ 4,  5,  6,  7,  4,  5,  6,  7],
       [ 8,  9, 10, 11,  8,  9, 10, 11]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[197]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[ 0,  1,  2,  3,  0,  1,  2,  3],
        [ 4,  5,  6,  7,  4,  5,  6,  7],
        [ 8,  9, 10, 11,  8,  9, 10, 11]],

       [[ 0,  1,  2,  3,  0,  1,  2,  3],
        [ 4,  5,  6,  7,  4,  5,  6,  7],
        [ 8,  9, 10, 11,  8,  9, 10, 11]]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[198]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[198]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([3, 3, 3, 3])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[199]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># 对应分别重复多少次</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[199]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([ 0,  0,  1,  1,  2,  2,  3,  3,  4,  4,  5,  5,  6,  6,  7,  7,  8,
        8,  9,  9, 10, 10, 11, 11])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[199]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0,  0,  0,  1,  1,  1,  2,  2,  2,  3,  3,  3],
       [ 4,  4,  4,  5,  5,  5,  6,  6,  6,  7,  7,  7],
       [ 8,  8,  8,  9,  9,  9, 10, 10, 10, 11, 11, 11]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[199]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11],
       [ 8,  9, 10, 11],
       [ 8,  9, 10, 11]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#21482;&#26377;&#19968;&#20010;&#25968;&#23383;&#30340;ndarray">&#21482;&#26377;&#19968;&#20010;&#25968;&#23383;&#30340;ndarray<a class="anchor-link" href="#&#21482;&#26377;&#19968;&#20010;&#25968;&#23383;&#30340;ndarray">&#182;</a></h2><p>行为比较奇怪</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>首先是比较正常的(1,)ndarray</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[200]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">12</span><span class="p">])</span>
<span class="n">arr</span><span class="o">.</span><span class="n">shape</span>
<span class="n">arr</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[200]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(1,)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[200]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([12])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>看看通过传入一个数字创建的ndarray</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[201]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
<span class="n">arr</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[201]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array(12)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[202]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[202]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>numpy.ndarray</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[203]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[203]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>()</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>为什么没有shape？</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[204]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">arr</span><span class="o">+</span><span class="mi">3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[204]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>numpy.int32</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>运算操作后变为数字</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[205]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">num</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>too many indices for array
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>甚至无法索引</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="NumPy&#24615;&#33021;&#23545;&#27604;">NumPy&#24615;&#33021;&#23545;&#27604;<a class="anchor-link" href="#NumPy&#24615;&#33021;&#23545;&#27604;">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>对比先挖坑再填坑，与先生成再组合两种方式的性能</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[206]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">func1</span><span class="p">():</span>
    <span class="n">P</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
    <span class="n">P</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">P</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">P</span>


<span class="k">def</span> <span class="nf">func2</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">P</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">P</span>


<span class="o">%</span><span class="k">timeit</span> func1()
<span class="o">%</span><span class="k">timeit</span> func2()
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>2.84 µs ± 332 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
4.95 µs ± 241 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>可见，先挖好坑之后往里填比较快</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>类似的，对比 append 操作，是列表比较快还是 ndarray 比较好？</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[207]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ls</span> <span class="o">=</span> <span class="p">[]</span>


<span class="k">def</span> <span class="nf">func1</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
        <span class="n">ls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ls</span>


<span class="k">def</span> <span class="nf">func2</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([])</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span>


<span class="o">%</span><span class="k">timeit</span> func1()
<span class="o">%</span><span class="k">timeit</span> func2()
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>8.56 µs ± 449 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
296 µs ± 8.8 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>对于经常需要改变 size 的操作，list 明显好于 ndarray</p>
<p><strong>究其原因，NumPy通过划分一整块内存，通过高效的索引对这块内存进行管理，如果频繁进行append操作，那么NumPy就需要不停的重新分配内存，也就丧失了其高效的本质。</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="NumPy&#20132;&#25442;&#25968;&#25454;&#21644;&#27604;&#36739;&#25805;&#20316;">NumPy&#20132;&#25442;&#25968;&#25454;&#21644;&#27604;&#36739;&#25805;&#20316;<a class="anchor-link" href="#NumPy&#20132;&#25442;&#25968;&#25454;&#21644;&#27604;&#36739;&#25805;&#20316;">&#182;</a></h2><p>涉及到一些复制与引用的区别</p>
<h3 id="&#20132;&#25442;">&#20132;&#25442;<a class="anchor-link" href="#&#20132;&#25442;">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Python 列表交换数据很简单，可以直接采用方便的写法</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[208]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>

<span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="n">a</span>
<span class="n">b</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[208]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[1, 6, 7, 4]</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[208]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[5, 2, 3, 8]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>ndarray这样写会出问题</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[209]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>

<span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="n">a</span>
<span class="n">b</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[209]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([1, 6, 7, 4])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[209]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([5, 6, 7, 8])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>由于执行顺序的问题，不能像原生 Python 中那样交换变量</strong></p>
<p><strong>实际上，无法完成交换是因为作为右值的切片返回视图，再加上Python的执行顺序问题，所以才无法完成交换。将赋值操作符右边替换为高级索引（返回副本）即可。</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[210]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>

<span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">b</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span> <span class="n">a</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="n">a</span>
<span class="n">b</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[210]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([1, 6, 7, 4])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[210]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([5, 2, 3, 8])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>另一种解决方案，使用 <code>copy</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[211]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>

<span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">a</span>
<span class="n">b</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[211]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([1, 6, 7, 4])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[211]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([5, 2, 3, 8])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#27604;&#36739;">&#27604;&#36739;<a class="anchor-link" href="#&#27604;&#36739;">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[212]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">a</span> <span class="o">==</span> <span class="n">b</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[212]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([False, False, False, False])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>NumPy 的比较是 itemwise 的，所以用 <code>numpy.array_equal()</code> 或 <code>numpy.allclose()</code> 替代</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[213]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[213]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="NumPy&#20013;&#30340;reshape&#25805;&#20316;">NumPy&#20013;&#30340;reshape&#25805;&#20316;<a class="anchor-link" href="#NumPy&#20013;&#30340;reshape&#25805;&#20316;">&#182;</a></h2><p>NumPy中的形状改变操作，有一些很tricky的地方</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[214]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="n">sliced</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[:</span><span class="mi">3</span><span class="p">,</span> <span class="p">:]</span>
<span class="n">sliced</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[214]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(3, 4)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>这样reshape没问题</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[215]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sliced</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span>
<span class="n">sliced</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[215]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[1., 1., 1.],
       [1., 1., 1.],
       [1., 1., 1.],
       [1., 1., 1.]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[216]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sliced_1</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="n">sliced_1</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[216]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(4, 3)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>在切片基础上，再改变形状？</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[217]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">sliced_1</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span>
<span class="k">except</span> <span class="ne">AttributeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>incompatible shape for a non-contiguous array
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>这时切片无法改变形状，这主要和ndarray在内存中的存储形式有关，<strong>在初始化ndarray的时候，里面的数据就按顺序排好了，而切片取前三列后（已经在内存中跳跃取值了）如果想进行改变形状的操作，就需要在内存中再次跳跃，此时已经无法借助strid来标记这一视图在原始数据块中的数据取用方式了，所以无法改变ndarray的形状。</strong></p>
<p>ndarray的内存管理见 <a href="http://www.labri.fr/perso/nrougier/from-python-to-numpy/#anatomy-of-an-array">http://www.labri.fr/perso/nrougier/from-python-to-numpy/#anatomy-of-an-array</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>使用resize进行形状操作，同样报错</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[218]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">sliced_1</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">refcheck</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>resize only works on single-segment arrays
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>resieze</code>给出的提示更加清晰 <code>only works on single-segment arrays</code> 即因为数据分段了,无法通过strides标记数据的取用规则（太复杂）</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#32034;&#24341;(indexing)&#19982;&#39640;&#32423;&#32034;&#24341;(advanced-indexing,-fancy-indexing)&#30340;&#21306;&#21035;&#21450;&#29305;&#27530;&#24773;&#20917;&#20998;&#26512;">&#32034;&#24341;(indexing)&#19982;&#39640;&#32423;&#32034;&#24341;(advanced indexing, fancy indexing)&#30340;&#21306;&#21035;&#21450;&#29305;&#27530;&#24773;&#20917;&#20998;&#26512;<a class="anchor-link" href="#&#32034;&#24341;(indexing)&#19982;&#39640;&#32423;&#32034;&#24341;(advanced-indexing,-fancy-indexing)&#30340;&#21306;&#21035;&#21450;&#29305;&#27530;&#24773;&#20917;&#20998;&#26512;">&#182;</a></h2><p>先来看看官方的解释 <a href="https://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#advanced-indexing">https://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#advanced-indexing</a></p>

<pre><code>Advanced indexing is triggered when the selection object, obj, is a non-tuple sequence object, an ndarray (of data type integer or bool), or a tuple with at least one sequence object or ndarray (of data type integer or bool). There are two types of advanced indexing: integer and Boolean.

Advanced indexing always returns a copy of the data (contrast with basic slicing that returns a view).

</code></pre>
<p>所谓<strong>高级索引（advanced indexing, fancy indexing）</strong>，这是一个与普通索引(indexing)相区别的概念。所谓高级索引，区别于上面的普通索引或切片概念，即对ndarray进行索引时，<strong>只要某一维度上的索引值出现了诸如<code>[1,2,4]</code>或<code>[True, True, False]</code>之类的通过明确序列给定的索引（而不是<code>1:5:2</code>这类复合<code>start:stop:step</code>范式的索引）时，那么就算作高级索引</strong>。与之相对应的，普通索引大致上等同于切片这种索引方式，所谓切片，即对ndarray进行索引时，每个维度上的索引值都是类似<code>start:stop:step</code>这样格式的，比如<code>arr[0:4:2, 1:5:1]</code>或者<code>arr[1, :-1]</code>。</p>
<p><strong>切片或者普通索引总是返回视图，高级索引总是返回副本。这一区别仅针对作为右值而言，无论是普通索引还是高级索引，作为左值时对其进行赋值都将影响原ndarray</strong></p>
<p><strong>切片或者普通索引总是返回视图，高级索引总是返回副本。这一区别仅针对作为右值而言，无论是普通索引还是高级索引，作为左值时对其进行赋值都将影响原ndarray</strong></p>
<p><strong>切片或者普通索引总是返回视图，高级索引总是返回副本。这一区别仅针对作为右值而言，无论是普通索引还是高级索引，作为左值时对其进行赋值都将影响原ndarray</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#20999;&#29255;&#19982;&#39640;&#32423;&#32034;&#24341;&#21516;&#26102;&#20986;&#29616;&#30340;&#22330;&#26223;">&#20999;&#29255;&#19982;&#39640;&#32423;&#32034;&#24341;&#21516;&#26102;&#20986;&#29616;&#30340;&#22330;&#26223;<a class="anchor-link" href="#&#20999;&#29255;&#19982;&#39640;&#32423;&#32034;&#24341;&#21516;&#26102;&#20986;&#29616;&#30340;&#22330;&#26223;">&#182;</a></h3><p>例如<code>arr[1:4, [2,3,4]]</code>这种。实际上，这种同时出现的场景分两类：</p>
<ul>
<li>高级索引项在第一维出现的情形</li>
<li>高级索引项在之后出现的情形</li>
</ul>
<p>先说结论，这种情况得到的结果都是副本，应该都归为高级索引一类，因为出现了通过明确序列给定的索引。<strong>注意，此时已然需要遵循高级索引的规则，如果出现多个明确序列，其形状需要一致</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="&#39640;&#32423;&#32034;&#24341;&#39033;&#20986;&#29616;&#22312;&#31532;&#19968;&#32500;">&#39640;&#32423;&#32034;&#24341;&#39033;&#20986;&#29616;&#22312;&#31532;&#19968;&#32500;<a class="anchor-link" href="#&#39640;&#32423;&#32034;&#24341;&#39033;&#20986;&#29616;&#22312;&#31532;&#19968;&#32500;">&#182;</a></h4><p>此时，得到的ndarray为原ndarray的部分元素的副本，且自身为base，即对数据拥有所有权。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[219]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">125</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="mi">1</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span>
<span class="n">s</span>

<span class="n">s</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[219]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 32,  37,  42,  47],
       [ 58,  63,  68,  73],
       [109, 114, 119, 124]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[219]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="&#39640;&#32423;&#32034;&#24341;&#39033;&#20986;&#29616;&#22312;&#31532;&#19968;&#32500;&#20043;&#21518;&#30340;&#32500;&#24230;">&#39640;&#32423;&#32034;&#24341;&#39033;&#20986;&#29616;&#22312;&#31532;&#19968;&#32500;&#20043;&#21518;&#30340;&#32500;&#24230;<a class="anchor-link" href="#&#39640;&#32423;&#32034;&#24341;&#39033;&#20986;&#29616;&#22312;&#31532;&#19968;&#32500;&#20043;&#21518;&#30340;&#32500;&#24230;">&#182;</a></h4><p>此时，得到的ndarray为原ndarray的部分元素的副本，但自身不是base，即对数据没有所有权，其base是某个作为中间变量的ndarray。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[220]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">125</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span>
<span class="n">s</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[220]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 32,  38,  49],
       [ 57,  63,  74],
       [ 82,  88,  99],
       [107, 113, 124]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[221]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">s</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span>  <span class="c1"># 对数据没有所有权</span>

<span class="n">s</span><span class="o">.</span><span class="n">base</span> <span class="ow">is</span> <span class="p">(</span><span class="n">arr</span> <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span> <span class="k">else</span> <span class="n">arr</span><span class="o">.</span><span class="n">base</span><span class="p">)</span>  <span class="c1"># base也不是arr</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[221]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[221]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[222]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># s的形状与其base不一样，且s的base也并不是arr</span>
<span class="n">s</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">shape</span>
<span class="n">s</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[222]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(3, 4)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[222]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(4, 3)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#20316;&#20026;&#32034;&#24341;&#30340;&#21333;&#20010;&#25972;&#25968;&#65288;&#20197;&#21450;&#21482;&#26377;&#19968;&#20010;&#25972;&#25968;&#30340;&#21015;&#34920;&#65289;">&#20316;&#20026;&#32034;&#24341;&#30340;&#21333;&#20010;&#25972;&#25968;&#65288;&#20197;&#21450;&#21482;&#26377;&#19968;&#20010;&#25972;&#25968;&#30340;&#21015;&#34920;&#65289;<a class="anchor-link" href="#&#20316;&#20026;&#32034;&#24341;&#30340;&#21333;&#20010;&#25972;&#25968;&#65288;&#20197;&#21450;&#21482;&#26377;&#19968;&#20010;&#25972;&#25968;&#30340;&#21015;&#34920;&#65289;">&#182;</a></h3><p>首先明确一点，对ndarray进行索引时，<strong>某个维度上的索引值是单个整数，此时单个整数应该看做<code>start:stop:step</code>的一种特殊形式。但是需要注意的是，虽然<code>arr[1, 2]</code> <code>arr[1:2, 2]</code>得到的数据内容是相同的，但差异在于结果的维度。</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[223]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
<span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[223]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(5,)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[223]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(1, 5)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>只有一个整数的列表作为索引时算高级索引</strong></p>
<p>作为索引的<code>1</code>和<code>[1]</code>是不同的</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[224]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">125</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="n">s</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span>
<span class="n">s</span><span class="o">.</span><span class="n">base</span> <span class="ow">is</span> <span class="p">(</span><span class="n">arr</span> <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span> <span class="k">else</span> <span class="n">arr</span><span class="o">.</span><span class="n">base</span><span class="p">)</span>  <span class="c1"># 切片，返回视图</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[224]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[224]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[225]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="n">s</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span>  <span class="c1"># 高级索引，返回副本</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[225]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#29305;&#27530;&#30340;&#20999;&#29255;&#24773;&#24418;">&#29305;&#27530;&#30340;&#20999;&#29255;&#24773;&#24418;<a class="anchor-link" href="#&#29305;&#27530;&#30340;&#20999;&#29255;&#24773;&#24418;">&#182;</a></h3><p>我们所关心的特殊情形，是所有给出的切片维度上都为单个整数的情形，分为两种情形。</p>
<ul>
<li>切片维度少于原始ndarray维度时</li>
<li>切片维度等于原始ndarray维度时</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="&#33509;&#20999;&#29255;&#32500;&#24230;&#23569;&#20110;&#21407;&#22987;ndarray&#32500;&#24230;&#65292;&#23601;&#31639;&#26576;&#20123;&#32500;&#24230;&#30340;&#32034;&#24341;&#21482;&#26159;&#21333;&#20010;&#25968;&#23383;&#65292;&#20063;&#24456;&#22909;&#29702;&#35299;&#20854;&#20173;&#20026;&#20999;&#29255;">&#33509;&#20999;&#29255;&#32500;&#24230;&#23569;&#20110;&#21407;&#22987;ndarray&#32500;&#24230;&#65292;&#23601;&#31639;&#26576;&#20123;&#32500;&#24230;&#30340;&#32034;&#24341;&#21482;&#26159;&#21333;&#20010;&#25968;&#23383;&#65292;&#20063;&#24456;&#22909;&#29702;&#35299;&#20854;&#20173;&#20026;&#20999;&#29255;<a class="anchor-link" href="#&#33509;&#20999;&#29255;&#32500;&#24230;&#23569;&#20110;&#21407;&#22987;ndarray&#32500;&#24230;&#65292;&#23601;&#31639;&#26576;&#20123;&#32500;&#24230;&#30340;&#32034;&#24341;&#21482;&#26159;&#21333;&#20010;&#25968;&#23383;&#65292;&#20063;&#24456;&#22909;&#29702;&#35299;&#20854;&#20173;&#20026;&#20999;&#29255;">&#182;</a></h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[226]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>  <span class="c1"># 切片维度和原ndarray维度不同</span>
<span class="n">s</span>  <span class="c1"># 返回 ndarray</span>

<span class="n">s</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span>  <span class="c1"># 自身不具有底层数据</span>

<span class="n">s</span><span class="o">.</span><span class="n">base</span> <span class="ow">is</span> <span class="p">(</span><span class="n">arr</span> <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span> <span class="k">else</span> <span class="n">arr</span><span class="o">.</span><span class="n">base</span><span class="p">)</span>  <span class="c1"># 是arr的视图</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[226]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([1., 1., 1., 1., 1.])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[226]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[226]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>注意结果的维度</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[227]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>  <span class="c1"># 和上面的写法没区别</span>
<span class="n">s</span>  <span class="c1"># 返回 ndarray</span>

<span class="n">s</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span>  <span class="c1"># 自身不具有底层数据</span>

<span class="n">s</span><span class="o">.</span><span class="n">base</span> <span class="ow">is</span> <span class="p">(</span><span class="n">arr</span> <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span> <span class="k">else</span> <span class="n">arr</span><span class="o">.</span><span class="n">base</span><span class="p">)</span>  <span class="c1"># 是arr的视图</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[227]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[1., 1., 1., 1., 1.]]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[227]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[227]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="&#20294;&#24403;&#20999;&#29255;&#32500;&#24230;&#31561;&#20110;&#21407;&#22987;ndarray&#26102;&#65292;&#20998;&#20004;&#31181;&#24773;&#20917;&#12290;">&#20294;&#24403;&#20999;&#29255;&#32500;&#24230;&#31561;&#20110;&#21407;&#22987;ndarray&#26102;&#65292;&#20998;&#20004;&#31181;&#24773;&#20917;&#12290;<a class="anchor-link" href="#&#20294;&#24403;&#20999;&#29255;&#32500;&#24230;&#31561;&#20110;&#21407;&#22987;ndarray&#26102;&#65292;&#20998;&#20004;&#31181;&#24773;&#20917;&#12290;">&#182;</a></h4><ul>
<li>仍然按切片写法的情况（实际上只切了一个数据点）<strong>此时返回视图，为只有一个元素的ndarray</strong></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[228]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
<span class="n">s</span>  <span class="c1"># 只有一个元素的ndarray</span>

<span class="n">s</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span>  <span class="c1"># 自身不具有底层数据</span>

<span class="n">s</span><span class="o">.</span><span class="n">base</span> <span class="ow">is</span> <span class="p">(</span><span class="n">arr</span> <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span> <span class="k">else</span> <span class="n">arr</span><span class="o">.</span><span class="n">base</span><span class="p">)</span>  <span class="c1"># 是arr的视图</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[228]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[[1.]]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[228]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[228]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>使用整数写法，每个维度的索引都为单个整数</li>
</ul>
<p><strong>此时返回原ndarray中的单个元素（副本, 不是普通Python元素），此种情况因为习惯，依然算作普通索引</strong>。（本因算作副本）</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[229]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>  <span class="c1"># 切片维度和原ndarray维度一样</span>
<span class="n">s</span>  <span class="c1"># 返回单个元素</span>
<span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>  <span class="c1"># 类型为 np类型</span>

<span class="n">s</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span>
<span class="n">s</span><span class="o">.</span><span class="n">base</span> <span class="ow">is</span> <span class="p">(</span><span class="n">arr</span> <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span> <span class="k">else</span> <span class="n">arr</span><span class="o">.</span><span class="n">base</span><span class="p">)</span>  <span class="c1"># 是arr的视图</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[229]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>1.0</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[229]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>numpy.float64</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[229]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[229]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#20854;&#20182;&#38656;&#35201;&#29305;&#27530;&#21306;&#20998;&#30340;&#22330;&#26223;">&#20854;&#20182;&#38656;&#35201;&#29305;&#27530;&#21306;&#20998;&#30340;&#22330;&#26223;<a class="anchor-link" href="#&#20854;&#20182;&#38656;&#35201;&#29305;&#27530;&#21306;&#20998;&#30340;&#22330;&#26223;">&#182;</a></h3><p>注意：<code>arr[(1,2,3),]</code>和<code>arr[(1,2,3)]</code>有本质上的不同，后者等价于<code>arr[1,2,3]</code>即切片的特殊情况，而<strong>前者触发高级索引</strong>。后者对前三个维度进行索引，前者对第一维度进行索引。</p>
<p>此外，还需注意<code>arr[[1,2,3]]</code>等价于<code>arr[[1,2,3],]</code><strong>触发高级索引</strong>，而<code>arr[[1,2,slice(None)]]</code>只是切片。</p>
<p><strong>前述高级索引技巧内容中提到，NumPy会自动剥离索引最外层的列表包裹，类似<code>arr[(1,2,3)]</code>会等价于<code>arr[1,2,3]</code>，但特殊情况是，<code>arr[[1,2,3]]</code>并不等价于<code>arr[1,2,3]</code>，而<code>arr[[1,2,slice(None)]]</code>依然等价于<code>arr[1,2]</code>或者<code>arr[1,2,...]</code>。</strong></p>
<p><strong>在<code>arr[(1,2,3)]</code>和<code>arr[[1,2,slice(None)]]</code>索引的外层仍然被剥离的情况下，<code>arr[[1,2,3]]</code>是需要特别注意的特殊情况。</strong></p>
<p><strong>在<code>arr[(1,2,3)]</code>和<code>arr[[1,2,slice(None)]]</code>索引的外层仍然被剥离的情况下，<code>arr[[1,2,3]]</code>是需要特别注意的特殊情况。</strong></p>
<p><strong>在<code>arr[(1,2,3)]</code>和<code>arr[[1,2,slice(None)]]</code>索引的外层仍然被剥离的情况下，<code>arr[[1,2,3]]</code>是需要特别注意的特殊情况。</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[230]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="n">arr</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">]</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span>  <span class="c1"># 触发高级索引</span>

<span class="n">arr</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="n">arr</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span>  <span class="c1"># 切片</span>

<span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span>  <span class="c1"># 切片</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[230]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[230]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([1., 1., 1., 1., 1.])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[230]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[230]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([1., 1., 1., 1., 1.])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[230]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[231]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span>  <span class="c1"># 对第一维度索引</span>

<span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">arr</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span> <span class="n">arr</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[231]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[231]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[232]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)]]</span>  <span class="c1"># 切片</span>
<span class="n">arr</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)]]</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span>

<span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">arr</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">)]],</span> <span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stderr output_text">
<pre>c:\users\twang\appdata\local\conda\conda\envs\py36\lib\site-packages\ipykernel_launcher.py:1: FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.
  &#34;&#34;&#34;Entry point for launching an IPython kernel.
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[232]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[1., 1., 1., 1., 1.],
       [1., 1., 1., 1., 1.],
       [1., 1., 1., 1., 1.],
       [1., 1., 1., 1., 1.],
       [1., 1., 1., 1., 1.]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stderr output_text">
<pre>c:\users\twang\appdata\local\conda\conda\envs\py36\lib\site-packages\ipykernel_launcher.py:2: FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.
  
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[232]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stderr output_text">
<pre>c:\users\twang\appdata\local\conda\conda\envs\py36\lib\site-packages\ipykernel_launcher.py:4: FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.
  after removing the cwd from sys.path.
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[232]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#26080;&#35770;&#26159;&#26222;&#36890;&#32034;&#24341;&#36824;&#26159;&#39640;&#32423;&#32034;&#24341;&#65292;&#20316;&#20026;&#24038;&#20540;&#23545;&#20854;&#36171;&#20540;&#65292;&#37117;&#23558;&#23545;&#21407;ndarray&#20135;&#29983;&#24433;&#21709;">&#26080;&#35770;&#26159;&#26222;&#36890;&#32034;&#24341;&#36824;&#26159;&#39640;&#32423;&#32034;&#24341;&#65292;&#20316;&#20026;&#24038;&#20540;&#23545;&#20854;&#36171;&#20540;&#65292;&#37117;&#23558;&#23545;&#21407;ndarray&#20135;&#29983;&#24433;&#21709;<a class="anchor-link" href="#&#26080;&#35770;&#26159;&#26222;&#36890;&#32034;&#24341;&#36824;&#26159;&#39640;&#32423;&#32034;&#24341;&#65292;&#20316;&#20026;&#24038;&#20540;&#23545;&#20854;&#36171;&#20540;&#65292;&#37117;&#23558;&#23545;&#21407;ndarray&#20135;&#29983;&#24433;&#21709;">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[233]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="n">arr</span><span class="p">[:</span><span class="mi">2</span><span class="p">,</span> <span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">999</span>  <span class="c1"># 切片作为左值</span>
<span class="n">arr</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[233]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[999., 999.,   1.,   1.,   1.],
       [999., 999.,   1.,   1.,   1.],
       [  1.,   1.,   1.,   1.,   1.],
       [  1.,   1.,   1.,   1.,   1.],
       [  1.,   1.,   1.,   1.,   1.]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[234]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="n">arr</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">999</span>  <span class="c1"># 高级索引作为左值</span>
<span class="n">arr</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[234]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[999.,   1.,   1.,   1.,   1.],
       [  1., 999.,   1.,   1.,   1.],
       [  1.,   1., 999.,   1.,   1.],
       [  1.,   1.,   1.,   1.,   1.],
       [  1.,   1.,   1.,   1.,   1.]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#33719;&#21462;&#25351;&#23450;&#34892;&#21015;&#20132;&#21449;&#28857;&#19978;&#30340;&#25968;&#25454;">&#33719;&#21462;&#25351;&#23450;&#34892;&#21015;&#20132;&#21449;&#28857;&#19978;&#30340;&#25968;&#25454;<a class="anchor-link" href="#&#33719;&#21462;&#25351;&#23450;&#34892;&#21015;&#20132;&#21449;&#28857;&#19978;&#30340;&#25968;&#25454;">&#182;</a></h2><p>由于NumPy的高级索引机制，输入<code>arr[[1,2,3], [2,3,4]]</code>并不会得到1、2、3行与2,、3、4列交叉点上的数据，而只能得到<code>arr[1,2]</code>、<code>arr[2,3]</code>、<code>arr[3,4]</code>这三个值组成的ndarray。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[235]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="n">arr</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[235]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([ 7, 13, 19])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>给出<code>arr[[1,2,3], [2,3]]</code>这样的表达式甚至会报错（各维度上的索引形状不统一）</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[236]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">arr</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>shape mismatch: indexing arrays could not be broadcast together with shapes (3,) (2,) 
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>为了得到指定行列交叉点上的数据，可以对每个维度分开进行索引</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[237]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">:][:,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[237]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 7,  9],
       [12, 14],
       [17, 19]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>或者这样，虽然感觉没什么用</strong></p>
<p>利用<code>bincount</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[238]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">indice_d1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">indice_d2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>

<span class="n">shape_d1</span><span class="p">,</span> <span class="n">shape_d2</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">shape</span>

<span class="c1"># 为了获取完整维度上的计数序列，增加该维度可能的最大索引值</span>
<span class="n">indice_d1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">shape_d1</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">indice_d2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">shape_d2</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># 处理负数情形</span>
<span class="n">indice_d1</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x</span><span class="o">+</span><span class="n">shape_d1</span><span class="p">)</span> <span class="o">%</span> <span class="n">shape_d1</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">indice_d1</span><span class="p">]</span>
<span class="n">indice_d2</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x</span><span class="o">++</span><span class="n">shape_d2</span><span class="p">)</span> <span class="o">%</span> <span class="n">shape_d2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">indice_d2</span><span class="p">]</span>

<span class="c1"># 转换为布尔序列，并去掉增加的一个计数</span>
<span class="n">indice_d1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">bincount</span><span class="p">(</span><span class="n">indice_d1</span><span class="p">)</span>
<span class="n">indice_d1</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
<span class="n">mask1</span> <span class="o">=</span> <span class="p">(</span><span class="n">indice_d1</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">indice_d2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">bincount</span><span class="p">(</span><span class="n">indice_d2</span><span class="p">)</span>
<span class="n">indice_d2</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
<span class="n">mask2</span> <span class="o">=</span> <span class="p">(</span><span class="n">indice_d2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>

<span class="n">arr</span><span class="p">[</span><span class="n">mask1</span><span class="p">,</span> <span class="p">:][:,</span> <span class="n">mask2</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[238]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 7,  9],
       [12, 14],
       [17, 19]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="ndarray&#30340;&#38142;&#24335;&#32034;&#24341;">ndarray&#30340;&#38142;&#24335;&#32034;&#24341;<a class="anchor-link" href="#ndarray&#30340;&#38142;&#24335;&#32034;&#24341;">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#20316;&#20026;&#21491;&#20540;">&#20316;&#20026;&#21491;&#20540;<a class="anchor-link" href="#&#20316;&#20026;&#21491;&#20540;">&#182;</a></h3><p>按之前的视图与副本规则判断即可</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>视图的视图还是视图</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[239]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">][</span><span class="mi">1</span><span class="p">,</span> <span class="p">:]</span>
<span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">][</span><span class="mi">1</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span>
<span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">][</span><span class="mi">1</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">base</span> <span class="ow">is</span> <span class="p">(</span><span class="n">arr</span> <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span> <span class="k">else</span> <span class="n">arr</span><span class="o">.</span><span class="n">base</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[239]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([12, 13])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[239]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[239]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>视图的副本为副本</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[240]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">][[</span><span class="mi">1</span><span class="p">],</span> <span class="p">:]</span>
<span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">][[</span><span class="mi">1</span><span class="p">],</span> <span class="p">:]</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span>
<span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">][[</span><span class="mi">1</span><span class="p">],</span> <span class="p">:]</span><span class="o">.</span><span class="n">base</span> <span class="ow">is</span> <span class="p">(</span><span class="n">arr</span> <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span> <span class="k">else</span> <span class="n">arr</span><span class="o">.</span><span class="n">base</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[240]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[12, 13]])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[240]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[240]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>副本的视图，是某个中间变量（副本）的视图</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[241]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]</span>
<span class="n">arr</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span>
<span class="n">arr</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">base</span> <span class="ow">is</span> <span class="p">(</span><span class="n">arr</span> <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">owndata</span> <span class="k">else</span> <span class="n">arr</span><span class="o">.</span><span class="n">base</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[241]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([7, 8])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[241]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[241]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#20316;&#20026;&#24038;&#20540;">&#20316;&#20026;&#24038;&#20540;<a class="anchor-link" href="#&#20316;&#20026;&#24038;&#20540;">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>对视图的视图赋值，可影响原始ndarray</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[242]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">][</span><span class="mi">1</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="mi">999</span>
<span class="n">arr</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[242]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[  0,   1,   2,   3,   4],
       [  5,   6,   7,   8,   9],
       [ 10,  11, 999, 999,  14],
       [ 15,  16,  17,  18,  19],
       [ 20,  21,  22,  23,  24]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>对视图的副本赋值，可影响原始ndarray</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[243]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">][[</span><span class="mi">1</span><span class="p">],</span> <span class="p">:]</span> <span class="o">=</span> <span class="mi">999</span>
<span class="n">arr</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[243]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[  0,   1,   2,   3,   4],
       [  5,   6,   7,   8,   9],
       [ 10,  11, 999, 999,  14],
       [ 15,  16,  17,  18,  19],
       [ 20,  21,  22,  23,  24]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>对副本的视图赋值，无法影响原始ndarray</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[244]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="n">arr</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="mi">999</span>
<span class="n">arr</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[244]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0,  1,  2,  3,  4],
       [ 5,  6,  7,  8,  9],
       [10, 11, 12, 13, 14],
       [15, 16, 17, 18, 19],
       [20, 21, 22, 23, 24]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>我判断，应该是看最后一层索引之前是原始ndarray的副本还是视图，若是视图则无论最后一层是视图还是副本，都将对原始ndarray产生影响。若为副本，则无论最后一层是视图还是副本，都无法对原始ndarray产生影响。</p>
<p>验证一下</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[245]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="c1"># 最后一层之前为视图，即使最后一层为副本也会对原ndarray产生影响</span>
<span class="n">arr</span><span class="p">[:,</span> <span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">][:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="p">:][[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">:]</span> <span class="o">=</span> <span class="mi">999</span>
<span class="n">arr</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[245]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[999, 999, 999, 999,   4],
       [999, 999, 999, 999,   9],
       [999, 999, 999, 999,  14],
       [ 15,  16,  17,  18,  19],
       [ 20,  21,  22,  23,  24]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="ndarray&#20869;&#23384;&#25490;&#24067;&#30340;&#28145;&#20837;&#29702;&#35299;">ndarray&#20869;&#23384;&#25490;&#24067;&#30340;&#28145;&#20837;&#29702;&#35299;<a class="anchor-link" href="#ndarray&#20869;&#23384;&#25490;&#24067;&#30340;&#28145;&#20837;&#29702;&#35299;">&#182;</a></h2><p><a href="http://www.labri.fr/perso/nrougier/from-python-to-numpy/#anatomy-of-an-array">From Python to Numpy Anatomy of An Array</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#24341;&#23376;">&#24341;&#23376;<a class="anchor-link" href="#&#24341;&#23376;">&#182;</a></h3><p>有如下ndarray</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[246]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="mi">1000000</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>需要将其全部赋值为8，怎么做？</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[247]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">timeit</span> arr[...] = 8
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>836 µs ± 52.4 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[248]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">timeit</span> arr.view(np.float16)[...] = 8
<span class="o">%</span><span class="k">timeit</span> arr.view(np.int16)[...] = 8
<span class="o">%</span><span class="k">timeit</span> arr.view(np.int32)[...] = 8
<span class="o">%</span><span class="k">timeit</span> arr.view(np.float32)[...] = 8
<span class="o">%</span><span class="k">timeit</span> arr.view(np.int64)[...] = 8
<span class="o">%</span><span class="k">timeit</span> arr.view(np.float64)[...] = 8
<span class="o">%</span><span class="k">timeit</span> arr.view(np.complex128)[...] = 8
<span class="o">%</span><span class="k">timeit</span> arr.view(np.int8)[...] = 8
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>867 µs ± 58.9 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
811 µs ± 9.41 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
811 µs ± 8.85 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
807 µs ± 6.69 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
813 µs ± 7.55 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
805 µs ± 4.6 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
1.31 ms ± 24.5 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
818 µs ± 6.79 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>运行时间似乎相差不大，但这种差异展示了NumPy对ndarray的内存管理的哲学。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#20869;&#23384;&#25490;&#24067;">&#20869;&#23384;&#25490;&#24067;<a class="anchor-link" href="#&#20869;&#23384;&#25490;&#24067;">&#182;</a></h3><p>NumPy文档对ndarray的定义</p>

<pre><code>An instance of class ndarray consists of a contiguous one-dimensional segment of computer memory (owned by the array, or by some other object), combined with an indexing scheme that maps N integers into the location of an item in the block.

</code></pre>
<p>连续的1-D内存块，搭配某种索引机制，将由整数组成的索引定位到内存块中对应的位置。</p>
<p>索引机制则由，形状(shape)和数据类型(data type)定义，在定义新的ndarray时也仅需这两者。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[249]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int16</span><span class="p">)</span>
<span class="n">Z</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[249]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[0, 1, 2],
       [3, 4, 5],
       [6, 7, 8]], dtype=int16)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Z的itemsize是2 bytes (int16), 形状为(3,3)，维度为2 (len(Z.shape)).</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[250]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Z</span><span class="o">.</span><span class="n">itemsize</span>

<span class="n">Z</span><span class="o">.</span><span class="n">shape</span>

<span class="n">Z</span><span class="o">.</span><span class="n">ndim</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[250]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>2</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[250]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(3, 3)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[250]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>2</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>此外，因为Z并不是其他ndarray的视图，故可以推断出strides，即当遍历ndarray时，在每个维度上每次需要跨越多少内存。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[251]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">strides</span> <span class="o">=</span> <span class="n">Z</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">Z</span><span class="o">.</span><span class="n">itemsize</span><span class="p">,</span> <span class="n">Z</span><span class="o">.</span><span class="n">itemsize</span>
<span class="n">strides</span>

<span class="n">Z</span><span class="o">.</span><span class="n">strides</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[251]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(6, 2)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[251]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(6, 2)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>基于以上信息，可以确定如何索引ndarray的某个具体元素。</p>
<p>用<code>tobytes</code>方法检验一下</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[252]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int16</span><span class="p">)</span>
<span class="n">index</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span>
<span class="n">Z</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">tobytes</span><span class="p">()</span>

<span class="n">offset_start</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">Z</span><span class="o">.</span><span class="n">ndim</span><span class="p">):</span>
    <span class="n">offset_start</span> <span class="o">+=</span> <span class="n">Z</span><span class="o">.</span><span class="n">strides</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">index</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

<span class="n">Z</span><span class="o">.</span><span class="n">tobytes</span><span class="p">()[</span><span class="n">offset_start</span><span class="p">:</span><span class="n">offset_start</span> <span class="o">+</span> <span class="n">Z</span><span class="o">.</span><span class="n">itemsize</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[252]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>b&#39;\x04\x00&#39;</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[252]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>b&#39;\x04\x00&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="&#21487;&#35270;&#21270;ndarray&#20869;&#23384;&#25490;&#24067;">&#21487;&#35270;&#21270;ndarray&#20869;&#23384;&#25490;&#24067;<a class="anchor-link" href="#&#21487;&#35270;&#21270;ndarray&#20869;&#23384;&#25490;&#24067;">&#182;</a></h4><p>元素排布</p>
<p><div align="center"> <img src="https://image-bed-zodiac.oss-cn-qingdao.aliyuncs.com/img批注 2019-06-20 100730.png" width="350"/> </div><br></p>
<p>一维化元素排布</p>
<p><div align="center"> <img src="https://image-bed-zodiac.oss-cn-qingdao.aliyuncs.com/img批注 2019-06-20 100818.png" width="500"/> </div><br></p>
<p>内存排布（C order Big endian）</p>
<p><div align="center"> <img src="https://image-bed-zodiac.oss-cn-qingdao.aliyuncs.com/img批注 2019-06-20 100846.png" width="450"/> </div><br></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>对Z进行一次切片，<strong>此时视图必须同时由形状，data type 以及 strides 才能确定，因为无法从形状和data type对strides进行推断。</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[253]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">V</span> <span class="o">=</span> <span class="n">Z</span><span class="p">[::</span><span class="mi">2</span><span class="p">,</span> <span class="p">::</span><span class="mi">2</span><span class="p">]</span>
<span class="n">V</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[253]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[0, 2],
       [6, 8]], dtype=int16)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>元素排布</p>
<p><div align="center"> <img src="https://image-bed-zodiac.oss-cn-qingdao.aliyuncs.com/img批注 2019-06-20 100919.png" width="650"/> </div><br></p>
<p>一维化元素排布</p>
<p><div align="center"> <img src="https://image-bed-zodiac.oss-cn-qingdao.aliyuncs.com/img批注 2019-06-20 100948.png" width="650"/> </div><br></p>
<p>内存排布（C order Big endian）</p>
<p><div align="center"> <img src="https://image-bed-zodiac.oss-cn-qingdao.aliyuncs.com/img批注 2019-06-20 101011.png" width="650"/> </div><br></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#35270;&#22270;&#19982;&#21103;&#26412;">&#35270;&#22270;&#19982;&#21103;&#26412;<a class="anchor-link" href="#&#35270;&#22270;&#19982;&#21103;&#26412;">&#182;</a></h3><h4 id="&#30452;&#25509;&#19982;&#38388;&#25509;&#35775;&#38382;">&#30452;&#25509;&#19982;&#38388;&#25509;&#35775;&#38382;<a class="anchor-link" href="#&#30452;&#25509;&#19982;&#38388;&#25509;&#35775;&#38382;">&#182;</a></h4><p>首先需要区分普通索引与高级索引的概念，因为普通索引总是返回视图，而高级索引总是返回副本。</p>
<p>有些函数总返回副本，如<code>flatten</code>，而有些总返回视图，如<code>ravel</code>。</p>
<h4 id="&#20013;&#38388;&#21464;&#37327;">&#20013;&#38388;&#21464;&#37327;<a class="anchor-link" href="#&#20013;&#38388;&#21464;&#37327;">&#182;</a></h4><p>通常在执行数学运算时，会产生中间变量。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[254]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int</span><span class="p">)</span>
<span class="n">Y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">X</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">Y</span>  <span class="c1"># 产生三个中间变量</span>
<span class="n">A</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[254]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([4, 4, 4, 4, 4, 4, 4, 4, 4, 4])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>使用函数替代运算符，指定输出ndarray可以避免中间变量的产生。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[255]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int</span><span class="p">)</span>
<span class="n">Y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">X</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">Y</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">Y</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">X</span><span class="p">)</span>  <span class="c1"># 不产生中间变量，就地操作</span>
<span class="n">X</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[255]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([2, 2, 2, 2, 2, 2, 2, 2, 2, 2])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[255]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([2, 2, 2, 2, 2, 2, 2, 2, 2, 2])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[255]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([4, 4, 4, 4, 4, 4, 4, 4, 4, 4])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[255]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([4, 4, 4, 4, 4, 4, 4, 4, 4, 4])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#24635;&#32467;&#20219;&#21153;">&#24635;&#32467;&#20219;&#21153;<a class="anchor-link" href="#&#24635;&#32467;&#20219;&#21153;">&#182;</a></h3><p>作为总结，考虑一个任务，如果确定某个ndarray是不是另一个ndarray的视图？如果是，其<code>start,stop,step</code>分别是多少？</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[256]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Z1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">Z2</span> <span class="o">=</span> <span class="n">Z1</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><div align="center"> <img src="https://image-bed-zodiac.oss-cn-qingdao.aliyuncs.com/img批注 2019-06-20 111429.png" width="650"/> </div><br></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>首先确定，Z2是否为Z1的视图，这个问题很好确定，只需查看Z2的base是否为Z1即可。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[257]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Z2</span><span class="o">.</span><span class="n">base</span> <span class="ow">is</span> <span class="n">Z1</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[257]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>确定了Z2是Z1的视图，如何确定<code>start,stop,step</code>？<code>step</code>的确定实际上也比较简单，利用<code>strides</code>属性即可。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[258]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">step</span> <span class="o">=</span> <span class="n">Z2</span><span class="o">.</span><span class="n">strides</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="n">Z1</span><span class="o">.</span><span class="n">strides</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># 注意，这里整除</span>

<span class="n">step</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[258]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>2</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>对于<code>start</code>和<code>stop</code>，利用<code>byte_bounds</code>方法，该方法返回<strong>指向ndarray第一个以及最后一个元素后方的指针。</strong></p>
<p><div align="center"> <img src="https://image-bed-zodiac.oss-cn-qingdao.aliyuncs.com/img批注 2019-06-20 111440.png" width="650"/> </div><br></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[259]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">byte_bounds</span><span class="p">(</span><span class="n">Z1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[259]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(2241121499232, 2241121499272)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[260]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">offset_start</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">byte_bounds</span><span class="p">(</span><span class="n">Z2</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">byte_bounds</span><span class="p">(</span><span class="n">Z1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">offset_start</span>  <span class="c1"># bytes</span>


<span class="n">offset_stop</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">byte_bounds</span><span class="p">(</span><span class="n">Z2</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">byte_bounds</span><span class="p">(</span><span class="n">Z1</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">offset_stop</span>  <span class="c1"># bytes</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[260]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>4</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[260]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>-8</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>基于此，便可计算<code>start,stop,step</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[261]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">start</span> <span class="o">=</span> <span class="n">offset_start</span> <span class="o">//</span> <span class="n">Z1</span><span class="o">.</span><span class="n">itemsize</span>
<span class="n">stop</span> <span class="o">=</span> <span class="n">Z1</span><span class="o">.</span><span class="n">size</span> <span class="o">+</span> <span class="n">offset_stop</span> <span class="o">//</span> <span class="n">Z1</span><span class="o">.</span><span class="n">itemsize</span>

<span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">step</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[261]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(1, 8, 2)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>验证结果正确性</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[262]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">Z1</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">stop</span><span class="p">:</span><span class="n">step</span><span class="p">],</span> <span class="n">Z2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[262]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#36827;&#38454;&#20219;&#21153;">&#36827;&#38454;&#20219;&#21153;<a class="anchor-link" href="#&#36827;&#38454;&#20219;&#21153;">&#182;</a></h3><p>以上任务仅针对一维ndarray而言，且未考虑负数<code>step</code>的情况，考虑多维ndarray以及负数step则</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[263]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Z1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">Z2</span> <span class="o">=</span> <span class="n">Z1</span><span class="p">[::</span><span class="mi">2</span><span class="p">,</span> <span class="p">::</span><span class="mi">2</span><span class="p">]</span>
<span class="n">Z2</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[263]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[1., 1., 1.],
       [1., 1., 1.],
       [1., 1., 1.]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[264]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">itemsize</span> <span class="o">=</span> <span class="n">Z2</span><span class="o">.</span><span class="n">itemsize</span>
<span class="n">offset_start</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">byte_bounds</span><span class="p">(</span><span class="n">Z2</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">byte_bounds</span><span class="p">(</span><span class="n">Z1</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span><span class="o">//</span><span class="n">itemsize</span>
<span class="n">offset_stop</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">byte_bounds</span><span class="p">(</span><span class="n">Z2</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">byte_bounds</span><span class="p">(</span><span class="n">Z1</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">//</span><span class="n">itemsize</span>
<span class="n">index_start</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unravel_index</span><span class="p">(</span><span class="n">offset_start</span><span class="p">,</span> <span class="n">Z1</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">index_stop</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unravel_index</span><span class="p">(</span><span class="n">Z1</span><span class="o">.</span><span class="n">size</span><span class="o">+</span><span class="n">offset_stop</span><span class="p">,</span> <span class="n">Z1</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">index_step</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">Z2</span><span class="o">.</span><span class="n">strides</span><span class="p">)</span><span class="o">//</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">Z1</span><span class="o">.</span><span class="n">strides</span><span class="p">)</span>
<span class="n">index_start</span><span class="p">,</span> <span class="n">index_stop</span><span class="p">,</span> <span class="n">index_step</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[264]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>((0, 0), (4, 4), array([2, 2], dtype=int32))</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[265]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">index</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">Z1</span><span class="o">.</span><span class="n">ndim</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int16</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">index_step</span><span class="p">)):</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">index_start</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">stop</span> <span class="o">=</span> <span class="n">index_stop</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">step</span> <span class="o">=</span> <span class="n">index_step</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">step</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">start</span><span class="p">,</span> <span class="n">stop</span> <span class="o">=</span> <span class="n">stop</span><span class="p">,</span> <span class="n">start</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">start</span><span class="p">,</span> <span class="n">stop</span> <span class="o">=</span> <span class="n">start</span><span class="p">,</span> <span class="n">stop</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="n">index</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">step</span>


<span class="n">index</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[265]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([[0, 5, 2],
       [0, 5, 2]], dtype=int16)</pre>
</div>

</div>

</div>
</div>

</div>
 


<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: 'center'," +
        "    displayIndent: '0em'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['$','$'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        " linebreaks: { automatic: true, width: '95% container' }, " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
        "    } " +
        "}); ";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>

            <div>
</div>

            
            
            <hr/>
            <aside>
            <nav>
            <ul class="articles-timeline">
                <li class="previous-article">« <a href="//zodiac911.github.io/blog/matplotlib-axis.html" title="Previous: Matplotlib中多子图绘图时，坐标轴及其label的几种排布方式">Matplotlib中多子图绘图时，坐标轴及其label的几种排布方式</a></li>
                <li class="next-article"><a href="//zodiac911.github.io/blog/pandas-tutorial.html" title="Next: Pandas入门">Pandas入门</a> »</li>
            </ul>
            </nav>
            </aside>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2019-01-03T00:00:00+08:00">Jan 3, 2019</time>
            <h4>Category</h4>
            <a class="category-link" href="//zodiac911.github.io/blog/categories.html#posts-ref">posts</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="//zodiac911.github.io/blog/tags#numpy-ref">NumPy
                    <span>2</span>
</a></li>
                <li><a href="//zodiac911.github.io/blog/tags#python-ref">Python
                    <span>16</span>
</a></li>
            </ul>
<h4>Contact</h4>
    <a href="i" title="My g Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-t sidebar-social-links"></i></a>
    <a href="t" title="My h Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-t sidebar-social-links"></i></a>
        </div>
        </section>
</div>
</article>
                </div>
                <div class="span1"></div>
            </div>
        </div>
        <div id="push"></div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-subtitle"><span class="site-name">Zodiac Wang</span> - A Fantastic Learner</li>
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="https://github.com/Pelican-Elegant/elegant/" title="Theme Elegant Home Page">Elegant</a></li>
    </ul>
</div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    
    </body>
    <!-- Theme: Elegant built for Pelican
    License : MIT -->
</html>